import{aH as Si,S as Bt,r as U,j as we}from"./vendor-XRUYIZQG.js";import{u as Pi,r as nt,f as ct,g as ut,G as pt,j as Ti}from"./index-tQL3kVgr.js";const ki=a=>{switch(a){case"PROVISIONING":return"primary";case"SUCCEEDED":case"COMPLETED":return"success";case"IN_PROGRESS":case"QUEUED":return"neutral";case"FAILED":case"DELETING":case"DELETED":case"FAILED_TO_PROVISION":case"SCHEDULED_FOR_DELETION":return"danger";case"PRE_PROVISIONED":case"READY_FOR_DEPLOYMENT":default:return"pending"}},Ci=a=>{switch(a){case"BUILD":return"Pulled from repo";case"RELEASE":return"Built from zip";case"REPO":return"Git pushed";default:return"Unknown"}},Ei=a=>a.split("_").map(l=>`${l.charAt(0).toUpperCase()}${l.slice(1).toLowerCase()}`).join(" "),Oi=a=>!["DELETING","SCHEDULED_FOR_DELETION","DELETED","PRE_PROVISIONED","PROVISIONING","PROVISION_REQUEST","FAILED_TO_PROVISION","READY_FOR_DEPLOYMENT"].includes(a);var _e={exports:{}};/*!
* Pusher JavaScript Library v7.6.0
* https://pusher.com/
*
* Copyright 2020, Pusher
* Released under the MIT licence.
*/(function(a,l){(function(g,c){a.exports=c()})(window,function(){return function(g){var c={};function d(m){if(c[m])return c[m].exports;var y=c[m]={i:m,l:!1,exports:{}};return g[m].call(y.exports,y,y.exports,d),y.l=!0,y.exports}return d.m=g,d.c=c,d.d=function(m,y,R){d.o(m,y)||Object.defineProperty(m,y,{enumerable:!0,get:R})},d.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},d.t=function(m,y){if(y&1&&(m=d(m)),y&8||y&4&&typeof m=="object"&&m&&m.__esModule)return m;var R=Object.create(null);if(d.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:m}),y&2&&typeof m!="string")for(var b in m)d.d(R,b,(function(M){return m[M]}).bind(null,b));return R},d.n=function(m){var y=m&&m.__esModule?function(){return m.default}:function(){return m};return d.d(y,"a",y),y},d.o=function(m,y){return Object.prototype.hasOwnProperty.call(m,y)},d.p="",d(d.s=2)}([function(g,c,d){var m=this&&this.__extends||function(){var v=function(u,h){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,I){S.__proto__=I}||function(S,I){for(var N in I)I.hasOwnProperty(N)&&(S[N]=I[N])},v(u,h)};return function(u,h){v(u,h);function S(){this.constructor=u}u.prototype=h===null?Object.create(h):(S.prototype=h.prototype,new S)}}();Object.defineProperty(c,"__esModule",{value:!0});var y=256,R=function(){function v(u){u===void 0&&(u="="),this._paddingCharacter=u}return v.prototype.encodedLength=function(u){return this._paddingCharacter?(u+2)/3*4|0:(u*8+5)/6|0},v.prototype.encode=function(u){for(var h="",S=0;S<u.length-2;S+=3){var I=u[S]<<16|u[S+1]<<8|u[S+2];h+=this._encodeByte(I>>>3*6&63),h+=this._encodeByte(I>>>2*6&63),h+=this._encodeByte(I>>>1*6&63),h+=this._encodeByte(I>>>0*6&63)}var N=u.length-S;if(N>0){var I=u[S]<<16|(N===2?u[S+1]<<8:0);h+=this._encodeByte(I>>>3*6&63),h+=this._encodeByte(I>>>2*6&63),N===2?h+=this._encodeByte(I>>>1*6&63):h+=this._paddingCharacter||"",h+=this._paddingCharacter||""}return h},v.prototype.maxDecodedLength=function(u){return this._paddingCharacter?u/4*3|0:(u*6+7)/8|0},v.prototype.decodedLength=function(u){return this.maxDecodedLength(u.length-this._getPaddingLength(u))},v.prototype.decode=function(u){if(u.length===0)return new Uint8Array(0);for(var h=this._getPaddingLength(u),S=u.length-h,I=new Uint8Array(this.maxDecodedLength(S)),N=0,A=0,x=0,W=0,q=0,z=0,F=0;A<S-4;A+=4)W=this._decodeChar(u.charCodeAt(A+0)),q=this._decodeChar(u.charCodeAt(A+1)),z=this._decodeChar(u.charCodeAt(A+2)),F=this._decodeChar(u.charCodeAt(A+3)),I[N++]=W<<2|q>>>4,I[N++]=q<<4|z>>>2,I[N++]=z<<6|F,x|=W&y,x|=q&y,x|=z&y,x|=F&y;if(A<S-1&&(W=this._decodeChar(u.charCodeAt(A)),q=this._decodeChar(u.charCodeAt(A+1)),I[N++]=W<<2|q>>>4,x|=W&y,x|=q&y),A<S-2&&(z=this._decodeChar(u.charCodeAt(A+2)),I[N++]=q<<4|z>>>2,x|=z&y),A<S-3&&(F=this._decodeChar(u.charCodeAt(A+3)),I[N++]=z<<6|F,x|=F&y),x!==0)throw new Error("Base64Coder: incorrect characters for decoding");return I},v.prototype._encodeByte=function(u){var h=u;return h+=65,h+=25-u>>>8&6,h+=51-u>>>8&-75,h+=61-u>>>8&-15,h+=62-u>>>8&3,String.fromCharCode(h)},v.prototype._decodeChar=function(u){var h=y;return h+=(42-u&u-44)>>>8&-y+u-43+62,h+=(46-u&u-48)>>>8&-y+u-47+63,h+=(47-u&u-58)>>>8&-y+u-48+52,h+=(64-u&u-91)>>>8&-y+u-65+0,h+=(96-u&u-123)>>>8&-y+u-97+26,h},v.prototype._getPaddingLength=function(u){var h=0;if(this._paddingCharacter){for(var S=u.length-1;S>=0&&u[S]===this._paddingCharacter;S--)h++;if(u.length<4||h>2)throw new Error("Base64Coder: incorrect padding")}return h},v}();c.Coder=R;var b=new R;function M(v){return b.encode(v)}c.encode=M;function O(v){return b.decode(v)}c.decode=O;var E=function(v){m(u,v);function u(){return v!==null&&v.apply(this,arguments)||this}return u.prototype._encodeByte=function(h){var S=h;return S+=65,S+=25-h>>>8&6,S+=51-h>>>8&-75,S+=61-h>>>8&-13,S+=62-h>>>8&49,String.fromCharCode(S)},u.prototype._decodeChar=function(h){var S=y;return S+=(44-h&h-46)>>>8&-y+h-45+62,S+=(94-h&h-96)>>>8&-y+h-95+63,S+=(47-h&h-58)>>>8&-y+h-48+52,S+=(64-h&h-91)>>>8&-y+h-65+0,S+=(96-h&h-123)>>>8&-y+h-97+26,S},u}(R);c.URLSafeCoder=E;var _=new E;function P(v){return _.encode(v)}c.encodeURLSafe=P;function T(v){return _.decode(v)}c.decodeURLSafe=T,c.encodedLength=function(v){return b.encodedLength(v)},c.maxDecodedLength=function(v){return b.maxDecodedLength(v)},c.decodedLength=function(v){return b.decodedLength(v)}},function(g,c,d){Object.defineProperty(c,"__esModule",{value:!0});var m="utf8: invalid string",y="utf8: invalid source encoding";function R(O){for(var E=new Uint8Array(b(O)),_=0,P=0;P<O.length;P++){var T=O.charCodeAt(P);T<128?E[_++]=T:T<2048?(E[_++]=192|T>>6,E[_++]=128|T&63):T<55296?(E[_++]=224|T>>12,E[_++]=128|T>>6&63,E[_++]=128|T&63):(P++,T=(T&1023)<<10,T|=O.charCodeAt(P)&1023,T+=65536,E[_++]=240|T>>18,E[_++]=128|T>>12&63,E[_++]=128|T>>6&63,E[_++]=128|T&63)}return E}c.encode=R;function b(O){for(var E=0,_=0;_<O.length;_++){var P=O.charCodeAt(_);if(P<128)E+=1;else if(P<2048)E+=2;else if(P<55296)E+=3;else if(P<=57343){if(_>=O.length-1)throw new Error(m);_++,E+=4}else throw new Error(m)}return E}c.encodedLength=b;function M(O){for(var E=[],_=0;_<O.length;_++){var P=O[_];if(P&128){var T=void 0;if(P<224){if(_>=O.length)throw new Error(y);var v=O[++_];if((v&192)!==128)throw new Error(y);P=(P&31)<<6|v&63,T=128}else if(P<240){if(_>=O.length-1)throw new Error(y);var v=O[++_],u=O[++_];if((v&192)!==128||(u&192)!==128)throw new Error(y);P=(P&15)<<12|(v&63)<<6|u&63,T=2048}else if(P<248){if(_>=O.length-2)throw new Error(y);var v=O[++_],u=O[++_],h=O[++_];if((v&192)!==128||(u&192)!==128||(h&192)!==128)throw new Error(y);P=(P&15)<<18|(v&63)<<12|(u&63)<<6|h&63,T=65536}else throw new Error(y);if(P<T||P>=55296&&P<=57343)throw new Error(y);if(P>=65536){if(P>1114111)throw new Error(y);P-=65536,E.push(String.fromCharCode(55296|P>>10)),P=56320|P&1023}}E.push(String.fromCharCode(P))}return E.join("")}c.decode=M},function(g,c,d){g.exports=d(3).default},function(g,c,d){d.r(c);var m=function(){function e(t,n){this.lastId=0,this.prefix=t,this.name=n}return e.prototype.create=function(t){this.lastId++;var n=this.lastId,r=this.prefix+n,i=this.name+"["+n+"]",o=!1,s=function(){o||(t.apply(null,arguments),o=!0)};return this[n]=s,{number:n,id:r,name:i,callback:s}},e.prototype.remove=function(t){delete this[t.number]},e}(),y=new m("_pusher_script_","Pusher.ScriptReceivers"),R={VERSION:"7.6.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},b=R,M=function(){function e(t){this.options=t,this.receivers=t.receivers||y,this.loading={}}return e.prototype.load=function(t,n,r){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(r);else{i.loading[t]=[r];var o=k.createScriptRequest(i.getPath(t,n)),s=i.receivers.create(function(p){if(i.receivers.remove(s),i.loading[t]){var w=i.loading[t];delete i.loading[t];for(var f=function(D){D||o.cleanup()},C=0;C<w.length;C++)w[C](p,f)}});o.send(s)}},e.prototype.getRoot=function(t){var n,r=k.getDocument().location.protocol;return t&&t.useTLS||r==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(t,n){return this.getRoot(n)+"/"+t+this.options.suffix+".js"},e}(),O=M,E=new m("_pusher_dependencies","Pusher.DependenciesReceivers"),_=new O({cdn_http:b.cdn_http,cdn_https:b.cdn_https,version:b.VERSION,suffix:b.dependency_suffix,receivers:E}),P={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},T=function(e){var t="See:",n=P.urls[e];if(!n)return"";var r;return n.fullUrl?r=n.fullUrl:n.path&&(r=P.baseUrl+n.path),r?t+" "+r:""},v={buildLogSuffix:T},u;(function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"})(u||(u={}));var h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),I=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),N=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),A=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),x=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),W=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),q=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),z=function(e){h(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),F=function(e){h(t,e);function t(n,r){var i=this.constructor,o=e.call(this,r)||this;return o.status=n,Object.setPrototypeOf(o,i.prototype),o}return t}(Error),rt=function(e,t,n,r,i){var o=k.createXHR();o.open("POST",n.endpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var s in n.headers)o.setRequestHeader(s,n.headers[s]);if(n.headersProvider!=null){var p=n.headersProvider();for(var s in p)o.setRequestHeader(s,p[s])}return o.onreadystatechange=function(){if(o.readyState===4)if(o.status===200){var w=void 0,f=!1;try{w=JSON.parse(o.responseText),f=!0}catch{i(new F(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+o.responseText),null)}f&&i(null,w)}else{var C="";switch(r){case u.UserAuthentication:C=v.buildLogSuffix("authenticationEndpoint");break;case u.ChannelAuthorization:C="Clients must be authorized to join private or presence channels. "+v.buildLogSuffix("authorizationEndpoint");break}i(new F(o.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - "+("received status: "+o.status+" from "+n.endpoint+". "+C)),null)}},o.send(t),o},St=rt;function Pt(e){return it(kt(e))}var Q=String.fromCharCode,B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tt=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?Q(192|t>>>6)+Q(128|t&63):Q(224|t>>>12&15)+Q(128|t>>>6&63)+Q(128|t&63)},kt=function(e){return e.replace(/[^\x00-\x7F]/g,Tt)},Ct=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[B.charAt(n>>>18),B.charAt(n>>>12&63),t>=2?"=":B.charAt(n>>>6&63),t>=1?"=":B.charAt(n&63)];return r.join("")},it=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,Ct)},dt=function(){function e(t,n,r,i){var o=this;this.clear=n,this.timer=t(function(){o.timer&&(o.timer=i(o.timer))},r)}return e.prototype.isRunning=function(){return this.timer!==null},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),ft=dt,gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function Et(e){window.clearTimeout(e)}function Ot(e){window.clearInterval(e)}var J=function(e){gt(t,e);function t(n,r){return e.call(this,setTimeout,Et,n,function(i){return r(),null})||this}return t}(ft),It=function(e){gt(t,e);function t(n,r){return e.call(this,setInterval,Ot,n,function(i){return r(),i})||this}return t}(ft),At={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(e){return new J(0,e)},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}}},j=At;function H(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)i[o]&&i[o].constructor&&i[o].constructor===Object?e[o]=H(e[o]||{},i[o]):e[o]=i[o]}return e}function xe(){for(var e=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):e.push(yt(arguments[t]));return e.join(" : ")}function Jt(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function Y(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function Yt(e){var t=[];return Y(e,function(n,r){t.push(r)}),t}function De(e){var t=[];return Y(e,function(n){t.push(n)}),t}function ot(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function Vt(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function Ne(e,t){var n={};return Y(e,function(r,i){n[i]=t(r)}),n}function Gt(e,t){t=t||function(i){return!!i};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function Qt(e,t){var n={};return Y(e,function(r,i){(t&&t(r,i,e,n)||r)&&(n[i]=r)}),n}function je(e){var t=[];return Y(e,function(n,r){t.push([r,n])}),t}function $t(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Me(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function He(e){return Ne(e,function(t){return typeof t=="object"&&(t=yt(t)),encodeURIComponent(Pt(t.toString()))})}function ze(e){var t=Qt(e,function(r){return r!==void 0}),n=Vt(je(He(t)),j.method("join","=")).join("&");return n}function qe(e){var t=[],n=[];return function r(i,o){var s,p,w;switch(typeof i){case"object":if(!i)return null;for(s=0;s<t.length;s+=1)if(t[s]===i)return{$ref:n[s]};if(t.push(i),n.push(o),Object.prototype.toString.apply(i)==="[object Array]")for(w=[],s=0;s<i.length;s+=1)w[s]=r(i[s],o+"["+s+"]");else{w={};for(p in i)Object.prototype.hasOwnProperty.call(i,p)&&(w[p]=r(i[p],o+"["+JSON.stringify(p)+"]"))}return w;case"number":case"string":case"boolean":return i}}(e,"$")}function yt(e){try{return JSON.stringify(e)}catch{return JSON.stringify(qe(e))}}var Fe=function(){function e(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLog,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogWarn,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogError,t)},e.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},e.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},e.prototype.log=function(t){var n=xe.apply(this,arguments);if(qt.log)qt.log(n);else if(qt.logToConsole){var r=t.bind(this);r(n)}},e}(),L=new Fe,We=function(e,t,n,r,i){(n.headers!==void 0||n.headersProvider!=null)&&L.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var o=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var s=e.getDocument(),p=s.createElement("script");e.auth_callbacks[o]=function(C){i(null,C)};var w="Pusher.auth_callbacks['"+o+"']";p.src=n.endpoint+"?callback="+encodeURIComponent(w)+"&"+t;var f=s.getElementsByTagName("head")[0]||s.documentElement;f.insertBefore(p,f.firstChild)},Be=We,Xe=function(){function e(t){this.src=t}return e.prototype.send=function(t){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=t.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){t.callback(r)},n.script.onload=function(){t.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&t.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=t.id+"_error",n.errorScript.text=t.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(n.script,i.firstChild),n.errorScript&&i.insertBefore(n.errorScript,n.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),Je=Xe,Ye=function(){function e(t,n){this.url=t,this.data=n}return e.prototype.send=function(t){if(!this.request){var n=ze(this.data),r=this.url+"/"+t.number+"?"+n;this.request=k.createScriptRequest(r),this.request.send(t)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),Ve=Ye,Ge=function(e,t){return function(n,r){var i="http"+(t?"s":"")+"://",o=i+(e.host||e.options.host)+e.options.path,s=k.createJSONPRequest(o,n),p=k.ScriptReceivers.create(function(w,f){y.remove(p),s.cleanup(),f&&f.host&&(e.host=f.host),r&&r(w,f)});s.send(p)}},Qe={name:"jsonp",getAgent:Ge},$e=Qe;function Rt(e,t,n){var r=e+(t.useTLS?"s":""),i=t.useTLS?t.hostTLS:t.hostNonTLS;return r+"://"+i+n}function Lt(e,t){var n="/app/"+e,r="?protocol="+b.PROTOCOL+"&client=js&version="+b.VERSION+(t?"&"+t:"");return n+r}var Ke={getInitial:function(e,t){var n=(t.httpPath||"")+Lt(e,"flash=false");return Rt("ws",t,n)}},Ze={getInitial:function(e,t){var n=(t.httpPath||"/pusher")+Lt(e);return Rt("http",t,n)}},tn={getInitial:function(e,t){return Rt("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return Lt(e)}},en=function(){function e(){this._callbacks={}}return e.prototype.get=function(t){return this._callbacks[Ut(t)]},e.prototype.add=function(t,n,r){var i=Ut(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:n,context:r})},e.prototype.remove=function(t,n,r){if(!t&&!n&&!r){this._callbacks={};return}var i=t?[Ut(t)]:Yt(this._callbacks);n||r?this.removeCallback(i,n,r):this.removeAllCallbacks(i)},e.prototype.removeCallback=function(t,n,r){ot(t,function(i){this._callbacks[i]=Gt(this._callbacks[i]||[],function(o){return n&&n!==o.fn||r&&r!==o.context}),this._callbacks[i].length===0&&delete this._callbacks[i]},this)},e.prototype.removeAllCallbacks=function(t){ot(t,function(n){delete this._callbacks[n]},this)},e}(),nn=en;function Ut(e){return"_"+e}var rn=function(){function e(t){this.callbacks=new nn,this.global_callbacks=[],this.failThrough=t}return e.prototype.bind=function(t,n,r){return this.callbacks.add(t,n,r),this},e.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},e.prototype.unbind=function(t,n,r){return this.callbacks.remove(t,n,r),this},e.prototype.unbind_global=function(t){return t?(this.global_callbacks=Gt(this.global_callbacks||[],function(n){return n!==t}),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(t,n,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,n);var o=this.callbacks.get(t),s=[];if(r?s.push(n,r):n&&s.push(n),o&&o.length>0)for(var i=0;i<o.length;i++)o[i].fn.apply(o[i].context||window,s);else this.failThrough&&this.failThrough(t,n);return this},e}(),V=rn,on=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(e){on(t,e);function t(n,r,i,o,s){var p=e.call(this)||this;return p.initialize=k.transportConnectionInitializer,p.hooks=n,p.name=r,p.priority=i,p.key=o,p.options=s,p.state="new",p.timeline=s.timeline,p.activityTimeout=s.activityTimeout,p.id=p.timeline.generateUniqueID(),p}return t.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},t.prototype.supportsPing=function(){return!!this.hooks.supportsPing},t.prototype.connect=function(){var n=this;if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(i){return j.defer(function(){n.onError(i),n.changeState("closed")}),!1}return this.bindListeners(),L.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},t.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},t.prototype.send=function(n){var r=this;return this.state==="open"?(j.defer(function(){r.socket&&r.socket.send(n)}),!0):!1},t.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},t.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(n){this.emit("message",n)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},t.prototype.buildTimelineMessage=function(n){return H({cid:this.id},n)},t}(V),an=sn,cn=function(){function e(t){this.hooks=t}return e.prototype.isSupported=function(t){return this.hooks.isSupported(t)},e.prototype.createConnection=function(t,n,r,i){return new an(this.hooks,t,n,r,i)},e}(),tt=cn,un=new tt({urls:Ke,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!k.getWebSocketAPI()},isSupported:function(){return!!k.getWebSocketAPI()},getSocket:function(e){return k.createWebSocket(e)}}),Kt={urls:Ze,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Zt=H({getSocket:function(e){return k.HTTPFactory.createStreamingSocket(e)}},Kt),te=H({getSocket:function(e){return k.HTTPFactory.createPollingSocket(e)}},Kt),ee={isSupported:function(){return k.isXHRSupported()}},pn=new tt(H({},Zt,ee)),ln=new tt(H({},te,ee)),hn={ws:un,xhr_streaming:pn,xhr_polling:ln},vt=hn,dn=new tt({file:"sockjs",urls:tn,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:_.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ne={isSupported:function(e){var t=k.isXDRSupported(e.useTLS);return t}},fn=new tt(H({},Zt,ne)),gn=new tt(H({},te,ne));vt.xdr_streaming=fn,vt.xdr_polling=gn,vt.sockjs=dn;var yn=vt,vn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(e){vn(t,e);function t(){var n=e.call(this)||this,r=n;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return t.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},t}(V),bn=new mn,wn=function(){function e(t,n,r){this.manager=t,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(t,n,r,i){var o=this;i=H({},i,{activityTimeout:this.pingDelay});var s=this.transport.createConnection(t,n,r,i),p=null,w=function(){s.unbind("open",w),s.bind("closed",f),p=j.now()},f=function(C){if(s.unbind("closed",f),C.code===1002||C.code===1003)o.manager.reportDeath();else if(!C.wasClean&&p){var D=j.now()-p;D<2*o.maxPingDelay&&(o.manager.reportDeath(),o.pingDelay=Math.max(D/2,o.minPingDelay))}};return s.bind("open",w),s},e.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},e}(),_n=wn,re={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if(typeof n=="string")try{n=JSON.parse(t.data)}catch{}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=re.decodeMessage(e);if(t.event==="pusher:connection_established"){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:t.data.activity_timeout*1e3}}else{if(t.event==="pusher:error")return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"}},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},$=re,Sn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(e){Sn(t,e);function t(n,r){var i=e.call(this)||this;return i.id=n,i.transport=r,i.activityTimeout=r.activityTimeout,i.bindListeners(),i}return t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(n){return this.transport.send(n)},t.prototype.send_event=function(n,r,i){var o={event:n,data:r};return i&&(o.channel=i),L.debug("Event sent",o),this.send($.encodeMessage(o))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var n=this,r={message:function(o){var s;try{s=$.decodeMessage(o)}catch(p){n.emit("error",{type:"MessageParseError",error:p,data:o.data})}if(s!==void 0){switch(L.debug("Event recd",s),s.event){case"pusher:error":n.emit("error",{type:"PusherError",data:s.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong");break}n.emit("message",s)}},activity:function(){n.emit("activity")},error:function(o){n.emit("error",o)},closed:function(o){i(),o&&o.code&&n.handleCloseEvent(o),n.transport=null,n.emit("closed")}},i=function(){Y(r,function(o,s){n.transport.unbind(s,o)})};Y(r,function(o,s){n.transport.bind(s,o)})},t.prototype.handleCloseEvent=function(n){var r=$.getCloseAction(n),i=$.getCloseError(n);i&&this.emit("error",i),r&&this.emit(r,{action:r,error:i})},t}(V),Tn=Pn,kn=function(){function e(t,n){this.transport=t,this.callback=n,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var t=this;this.onMessage=function(n){t.unbindListeners();var r;try{r=$.processHandshake(n)}catch(i){t.finish("error",{error:i}),t.transport.close();return}r.action==="connected"?t.finish("connected",{connection:new Tn(r.id,t.transport),activityTimeout:r.activityTimeout}):(t.finish(r.action,{error:r.error}),t.transport.close())},this.onClosed=function(n){t.unbindListeners();var r=$.getCloseAction(n)||"backoff",i=$.getCloseError(n);t.finish(r,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(t,n){this.callback(H({transport:this.transport,action:t},n))},e}(),Cn=kn,En=function(){function e(t,n){this.timeline=t,this.options=n||{}}return e.prototype.send=function(t,n){this.timeline.isEmpty()||this.timeline.send(k.TimelineTransport.getAgent(this,t),n)},e}(),On=En,In=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),An=function(e){In(t,e);function t(n,r){var i=e.call(this,function(o,s){L.debug("No callbacks on "+n+" for "+o)})||this;return i.name=n,i.pusher=r,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return t.prototype.authorize=function(n,r){return r(null,{auth:""})},t.prototype.trigger=function(n,r){if(n.indexOf("client-")!==0)throw new S("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var i=v.buildLogSuffix("triggeringClientEvents");L.warn("Client event triggered before channel 'subscription_succeeded' event . "+i)}return this.pusher.send_event(n,r,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;if(r==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(n);else if(r==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(n);else if(r.indexOf("pusher_internal:")!==0){var o={};this.emit(r,i,o)}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},t.prototype.handleSubscriptionCountEvent=function(n){n.data.subscription_count&&(this.subscriptionCount=n.data.subscription_count),this.emit("pusher:subscription_count",n.data)},t.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,i){r?(n.subscriptionPending=!1,L.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof F?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:n.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(V),xt=An,Rn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ln=function(e){Rn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},t}(xt),Dt=Ln,Un=function(){function e(){this.reset()}return e.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.prototype.each=function(t){var n=this;Y(this.members,function(r,i){t(n.get(i))})},e.prototype.setMyID=function(t){this.myID=t},e.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(t){return this.get(t.user_id)===null&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.prototype.removeMember=function(t){var n=this.get(t.user_id);return n&&(delete this.members[t.user_id],this.count--),n},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),xn=Un,Dn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function p(C){try{f(r.next(C))}catch(D){s(D)}}function w(C){try{f(r.throw(C))}catch(D){s(D)}}function f(C){C.done?o(C.value):i(C.value).then(p,w)}f((r=r.apply(e,t||[])).next())})},jn=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function p(f){return function(C){return w([f,C])}}function w(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(C){f=[6,C],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Mn=function(e){Dn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.members=new xn,i}return t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,s){return Nn(i,void 0,void 0,function(){var p,w;return jn(this,function(f){switch(f.label){case 0:return o?[3,3]:(s=s,s.channel_data==null?[3,1]:(p=JSON.parse(s.channel_data),this.members.setMyID(p.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(f.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return w=v.buildLogSuffix("authorizationEndpoint"),L.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+w+", ")+"or the user should be signed in."),r("Invalid auth response"),[2];f.label=3;case 3:return r(o,s),[2]}})})})},t.prototype.handleEvent=function(n){var r=n.event;if(r.indexOf("pusher_internal:")===0)this.handleInternalEvent(n);else{var i=n.data,o={};n.user_id&&(o.user_id=n.user_id),this.emit(r,i,o)}},t.prototype.handleInternalEvent=function(n){var r=n.event,i=n.data;switch(r){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(n);break;case"pusher_internal:member_added":var o=this.members.addMember(i);this.emit("pusher:member_added",o);break;case"pusher_internal:member_removed":var s=this.members.removeMember(i);s&&this.emit("pusher:member_removed",s);break}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(Dt),Hn=Mn,zn=d(1),Nt=d(0),qn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=function(e){qn(t,e);function t(n,r,i){var o=e.call(this,n,r)||this;return o.key=null,o.nacl=i,o}return t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,s){if(o){r(o,s);return}var p=s.shared_secret;if(!p){r(new Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null);return}i.key=Object(Nt.decode)(p),delete s.shared_secret,r(null,s)})},t.prototype.trigger=function(n,r){throw new W("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;if(r.indexOf("pusher_internal:")===0||r.indexOf("pusher:")===0){e.prototype.handleEvent.call(this,n);return}this.handleEncryptedEvent(r,i)},t.prototype.handleEncryptedEvent=function(n,r){var i=this;if(!this.key){L.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!r.ciphertext||!r.nonce){L.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);return}var o=Object(Nt.decode)(r.ciphertext);if(o.length<this.nacl.secretbox.overheadLength){L.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+o.length);return}var s=Object(Nt.decode)(r.nonce);if(s.length<this.nacl.secretbox.nonceLength){L.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+s.length);return}var p=this.nacl.secretbox.open(o,s,this.key);if(p===null){L.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(w,f){if(w){L.error("Failed to make a request to the authEndpoint: "+f+". Unable to fetch new key, so dropping encrypted event");return}if(p=i.nacl.secretbox.open(o,s,i.key),p===null){L.error("Failed to decrypt event with new key. Dropping encrypted event");return}i.emit(n,i.getDataToEmit(p))});return}this.emit(n,this.getDataToEmit(p))},t.prototype.getDataToEmit=function(n){var r=Object(zn.decode)(n);try{return JSON.parse(r)}catch{return r}},t}(Dt),Wn=Fn,Bn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xn=function(e){Bn(t,e);function t(n,r){var i=e.call(this)||this;i.state="initialized",i.connection=null,i.key=n,i.options=r,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var o=k.getNetwork();return o.bind("online",function(){i.timeline.info({netinfo:"online"}),(i.state==="connecting"||i.state==="unavailable")&&i.retryIn(0)}),o.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),i.updateStrategy(),i}return t.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(n){return this.connection?this.connection.send(n):!1},t.prototype.send_event=function(n,r,i){return this.connection?this.connection.send_event(n,r,i):!1},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var n=this,r=function(i,o){i?n.runner=n.strategy.connect(0,r):o.action==="error"?(n.emit("error",{type:"HandshakeError",error:o.error}),n.timeline.error({handshakeError:o.error})):(n.abortConnecting(),n.handshakeCallbacks[o.action](o))};this.runner=this.strategy.connect(0,r)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var n=this.abandonConnection();n.close()}},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new J(n||0,function(){r.disconnectInternally(),r.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new J(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new J(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},t.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new J(this.activityTimeout,function(){n.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(n){var r=this;return H({},n,{message:function(i){r.resetActivityCheck(),r.emit("message",i)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(i){r.emit("error",i)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(n){var r=this;return H({},n,{connected:function(i){r.activityTimeout=Math.min(r.options.activityTimeout,i.activityTimeout,i.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(i.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var n=this,r=function(i){return function(o){o.error&&n.emit("error",{type:"WebSocketError",error:o.error}),i(o)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},t.prototype.setConnection=function(n){this.connection=n;for(var r in this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var n in this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},t.prototype.updateState=function(n,r){var i=this.state;if(this.state=n,i!==n){var o=n;o==="connected"&&(o+=" with new socket ID "+r.socket_id),L.debug("State changed",i+" -> "+o),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:i,current:n}),this.emit(n,r)}},t.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},t}(V),Jn=Xn,Yn=function(){function e(){this.channels={}}return e.prototype.add=function(t,n){return this.channels[t]||(this.channels[t]=Gn(t,n)),this.channels[t]},e.prototype.all=function(){return De(this.channels)},e.prototype.find=function(t){return this.channels[t]},e.prototype.remove=function(t){var n=this.channels[t];return delete this.channels[t],n},e.prototype.disconnect=function(){Y(this.channels,function(t){t.disconnect()})},e}(),Vn=Yn;function Gn(e,t){if(e.indexOf("private-encrypted-")===0){if(t.config.nacl)return G.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=v.buildLogSuffix("encryptedChannelSupport");throw new W(n+". "+r)}else{if(e.indexOf("private-")===0)return G.createPrivateChannel(e,t);if(e.indexOf("presence-")===0)return G.createPresenceChannel(e,t);if(e.indexOf("#")===0)throw new I('Cannot create a channel with name "'+e+'".');return G.createChannel(e,t)}}var Qn={createChannels:function(){return new Vn},createConnectionManager:function(e,t){return new Jn(e,t)},createChannel:function(e,t){return new xt(e,t)},createPrivateChannel:function(e,t){return new Dt(e,t)},createPresenceChannel:function(e,t){return new Hn(e,t)},createEncryptedChannel:function(e,t,n){return new Wn(e,t,n)},createTimelineSender:function(e,t){return new On(e,t)},createHandshake:function(e,t){return new Cn(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new _n(e,t,n)}},G=Qn,$n=function(){function e(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(t){return G.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),ie=$n,Kn=function(){function e(t,n){this.strategies=t,this.loop=!!n.loop,this.failFast=!!n.failFast,this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return e.prototype.isSupported=function(){return $t(this.strategies,j.method("isSupported"))},e.prototype.connect=function(t,n){var r=this,i=this.strategies,o=0,s=this.timeout,p=null,w=function(f,C){C?n(null,C):(o=o+1,r.loop&&(o=o%i.length),o<i.length?(s&&(s=s*2,r.timeoutLimit&&(s=Math.min(s,r.timeoutLimit))),p=r.tryStrategy(i[o],t,{timeout:s,failFast:r.failFast},w)):n(!0))};return p=this.tryStrategy(i[o],t,{timeout:s,failFast:this.failFast},w),{abort:function(){p.abort()},forceMinPriority:function(f){t=f,p&&p.forceMinPriority(f)}}},e.prototype.tryStrategy=function(t,n,r,i){var o=null,s=null;return r.timeout>0&&(o=new J(r.timeout,function(){s.abort(),i(!0)})),s=t.connect(n,function(p,w){p&&o&&o.isRunning()&&!r.failFast||(o&&o.ensureAborted(),i(p,w))}),{abort:function(){o&&o.ensureAborted(),s.abort()},forceMinPriority:function(p){s.forceMinPriority(p)}}},e}(),K=Kn,Zn=function(){function e(t){this.strategies=t}return e.prototype.isSupported=function(){return $t(this.strategies,j.method("isSupported"))},e.prototype.connect=function(t,n){return tr(this.strategies,t,function(r,i){return function(o,s){if(i[r].error=o,o){er(i)&&n(!0);return}ot(i,function(p){p.forceMinPriority(s.transport.priority)}),n(null,s)}})},e}(),jt=Zn;function tr(e,t,n){var r=Vt(e,function(i,o,s,p){return i.connect(t,n(o,p))});return{abort:function(){ot(r,nr)},forceMinPriority:function(i){ot(r,function(o){o.forceMinPriority(i)})}}}function er(e){return Me(e,function(t){return!!t.error})}function nr(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var rr=function(){function e(t,n,r){this.strategy=t,this.transports=n,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.usingTLS,i=or(r),o=[this.strategy];if(i&&i.timestamp+this.ttl>=j.now()){var s=this.transports[i.transport];s&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),o.push(new K([s],{timeout:i.latency*2+1e3,failFast:!0})))}var p=j.now(),w=o.pop().connect(t,function f(C,D){C?(oe(r),o.length>0?(p=j.now(),w=o.pop().connect(t,f)):n(C)):(sr(r,D.transport.name,j.now()-p),n(null,D))});return{abort:function(){w.abort()},forceMinPriority:function(f){t=f,w&&w.forceMinPriority(f)}}},e}(),ir=rr;function Mt(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function or(e){var t=k.getLocalStorage();if(t)try{var n=t[Mt(e)];if(n)return JSON.parse(n)}catch{oe(e)}return null}function sr(e,t,n){var r=k.getLocalStorage();if(r)try{r[Mt(e)]=yt({timestamp:j.now(),transport:t,latency:n})}catch{}}function oe(e){var t=k.getLocalStorage();if(t)try{delete t[Mt(e)]}catch{}}var ar=function(){function e(t,n){var r=n.delay;this.strategy=t,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy,i,o=new J(this.options.delay,function(){i=r.connect(t,n)});return{abort:function(){o.ensureAborted(),i&&i.abort()},forceMinPriority:function(s){t=s,i&&i.forceMinPriority(s)}}},e}(),mt=ar,cr=function(){function e(t,n,r){this.test=t,this.trueBranch=n,this.falseBranch=r}return e.prototype.isSupported=function(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()},e.prototype.connect=function(t,n){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(t,n)},e}(),st=cr,ur=function(){function e(t){this.strategy=t}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy.connect(t,function(i,o){o&&r.abort(),n(i,o)});return r},e}(),pr=ur;function at(e){return function(){return e.isSupported()}}var lr=function(e,t,n){var r={};function i(me,mi,bi,wi,_i){var be=n(e,me,mi,bi,wi,_i);return r[me]=be,be}var o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),s=Object.assign({},o,{useTLS:!0}),p=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),w={loop:!0,timeout:15e3,timeoutLimit:6e4},f=new ie({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),C=new ie({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),D=i("ws","ws",3,o,f),X=i("wss","ws",3,s,f),di=i("sockjs","sockjs",1,p),he=i("xhr_streaming","xhr_streaming",1,p,C),fi=i("xdr_streaming","xdr_streaming",1,p,C),de=i("xhr_polling","xhr_polling",1,p),gi=i("xdr_polling","xdr_polling",1,p),fe=new K([D],w),yi=new K([X],w),vi=new K([di],w),ge=new K([new st(at(he),he,fi)],w),ye=new K([new st(at(de),de,gi)],w),ve=new K([new st(at(ge),new jt([ge,new mt(ye,{delay:4e3})]),ye)],w),Ft=new st(at(ve),ve,vi),Wt;return t.useTLS?Wt=new jt([fe,new mt(Ft,{delay:2e3})]):Wt=new jt([fe,new mt(yi,{delay:2e3}),new mt(Ft,{delay:5e3})]),new ir(new pr(new st(at(D),Wt,Ft)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},hr=lr,dr=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),_.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},fr={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new N),e.close()},t.onerror=function(n){e.emit("error",n),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},gr=fr,yr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vr=256*1024,mr=function(e){yr(t,e);function t(n,r,i){var o=e.call(this)||this;return o.hooks=n,o.method=r,o.url=i,o}return t.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},k.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},t.prototype.close=function(){this.unloader&&(k.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(n,r){for(;;){var i=this.advanceBuffer(r);if(i)this.emit("chunk",{status:n,data:i});else break}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(n){var r=n.slice(this.position),i=r.indexOf(`
`);return i!==-1?(this.position+=i+1,r.slice(0,i)):null},t.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>vr},t}(V),br=mr,Ht;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"})(Ht||(Ht={}));var Z=Ht,wr=1,_r=function(){function e(t,n){this.hooks=t,this.session=ae(1e3)+"/"+kr(8),this.location=Sr(n),this.readyState=Z.CONNECTING,this.openStream()}return e.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(t,n){this.onClose(t,n,!0)},e.prototype.sendRaw=function(t){if(this.readyState===Z.OPEN)try{return k.createSocketRequest("POST",se(Pr(this.location,this.session))).start(t),!0}catch{return!1}else return!1},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(t,n,r){this.closeStream(),this.readyState=Z.CLOSED,this.onclose&&this.onclose({code:t,reason:n,wasClean:r})},e.prototype.onChunk=function(t){if(t.status===200){this.readyState===Z.OPEN&&this.onActivity();var n,r=t.data.slice(0,1);switch(r){case"o":n=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<n.length;i++)this.onEvent(n[i]);break;case"m":n=JSON.parse(t.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(t.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}},e.prototype.onOpen=function(t){this.readyState===Z.CONNECTING?(t&&t.hostname&&(this.location.base=Tr(this.location.base,t.hostname)),this.readyState=Z.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(t){this.readyState===Z.OPEN&&this.onmessage&&this.onmessage({data:t})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(t){this.onerror&&this.onerror(t)},e.prototype.openStream=function(){var t=this;this.stream=k.createSocketRequest("POST",se(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){t.onChunk(n)}),this.stream.bind("finished",function(n){t.hooks.onFinished(t,n)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(n){j.defer(function(){t.onError(n),t.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function Sr(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function Pr(e,t){return e.base+"/"+t+"/xhr_send"}function se(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"t="+ +new Date+"&n="+wr++}function Tr(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function ae(e){return k.randomInt(e)}function kr(e){for(var t=[],n=0;n<e;n++)t.push(ae(32).toString(32));return t.join("")}var Cr=_r,Er={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Or=Er,Ir={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){t===200?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Ar=Ir,Rr={getRequest:function(e){var t=k.getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close();break}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},Lr=Rr,Ur={createStreamingSocket:function(e){return this.createSocket(Or,e)},createPollingSocket:function(e){return this.createSocket(Ar,e)},createSocket:function(e,t){return new Cr(e,t)},createXHR:function(e,t){return this.createRequest(Lr,e,t)},createRequest:function(e,t,n){return new br(e,t,n)}},ce=Ur;ce.createXDR=function(e,t){return this.createRequest(gr,e,t)};var xr=ce,Dr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:y,DependenciesReceivers:E,getDefaultStrategy:hr,Transports:yn,transportConnectionInitializer:dr,HTTPFactory:xr,TimelineTransport:$e,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():_.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:St,jsonp:Be}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new Ve(e,t)},createScriptRequest:function(e){return new Je(e)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var e=this.getXHRAPI();return new e},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return bn},createWebSocket:function(e){var t=this.getWebSocketAPI();return new t(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(t.indexOf("https:")===0))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return!!e&&new e().withCredentials!==void 0},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return!!window.XDomainRequest&&n===t},addUnloadListener:function(e){window.addEventListener!==void 0?window.addEventListener("unload",e,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){window.addEventListener!==void 0?window.removeEventListener("unload",e,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",e)},randomInt:function(e){var t=function(){var n=window.crypto||window.msCrypto,r=n.getRandomValues(new Uint32Array(1))[0];return r/Math.pow(2,32)};return Math.floor(t()*e)}},k=Dr,zt;(function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(zt||(zt={}));var bt=zt,Nr=function(){function e(t,n,r){this.key=t,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(t,n){t<=this.options.level&&(this.events.push(H({},n,{timestamp:j.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(t){this.log(bt.ERROR,t)},e.prototype.info=function(t){this.log(bt.INFO,t)},e.prototype.debug=function(t){this.log(bt.DEBUG,t)},e.prototype.isEmpty=function(){return this.events.length===0},e.prototype.send=function(t,n){var r=this,i=H({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,function(o,s){o||r.sent++,n&&n(o,s)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),jr=Nr,Mr=function(){function e(t,n,r,i){this.name=t,this.priority=n,this.transport=r,this.options=i||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(t,n){var r=this;if(this.isSupported()){if(this.priority<t)return ue(new A,n)}else return ue(new z,n);var i=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),s=null,p=function(){o.unbind("initialized",p),o.connect()},w=function(){s=G.createHandshake(o,function(X){i=!0,D(),n(null,X)})},f=function(X){D(),n(X)},C=function(){D();var X;X=yt(o),n(new x(X))},D=function(){o.unbind("initialized",p),o.unbind("open",w),o.unbind("error",f),o.unbind("closed",C)};return o.bind("initialized",p),o.bind("open",w),o.bind("error",f),o.bind("closed",C),o.initialize(),{abort:function(){i||(D(),s?s.close():o.close())},forceMinPriority:function(X){i||r.priority<X&&(s?s.close():o.close())}}},e}(),Hr=Mr;function ue(e,t){return j.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var zr=k.Transports,qr=function(e,t,n,r,i,o){var s=zr[n];if(!s)throw new q(n);var p=(!e.enabledTransports||Jt(e.enabledTransports,t)!==-1)&&(!e.disabledTransports||Jt(e.disabledTransports,t)===-1),w;return p?(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),w=new Hr(t,r,o?o.getAssistant(s):s,i)):w=Fr,w},Fr={isSupported:function(){return!1},connect:function(e,t){var n=j.defer(function(){t(new z)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},Wr=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){var i=t.paramsProvider();for(var r in i)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return n},Br=function(e){if(typeof k.getAuthorizers()[e.transport]>"u")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=Wr(t,e);k.getAuthorizers()[e.transport](k,r,e,u.UserAuthentication,n)}},Xr=Br,Jr=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);n+="&channel_name="+encodeURIComponent(e.channelName);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){var i=t.paramsProvider();for(var r in i)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(i[r])}return n},Yr=function(e){if(typeof k.getAuthorizers()[e.transport]>"u")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=Jr(t,e);k.getAuthorizers()[e.transport](k,r,e,u.ChannelAuthorization,n)}},Vr=Yr,Gr=function(e,t,n){var r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return function(i,o){var s=e.channel(i.channelName),p=n(s,r);p.authorize(i.socketId,o)}},et=function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},et.apply(this,arguments)};function Qr(e,t){var n={activityTimeout:e.activityTimeout||b.activityTimeout,cluster:e.cluster||b.cluster,httpPath:e.httpPath||b.httpPath,httpPort:e.httpPort||b.httpPort,httpsPort:e.httpsPort||b.httpsPort,pongTimeout:e.pongTimeout||b.pongTimeout,statsHost:e.statsHost||b.stats_host,unavailableTimeout:e.unavailableTimeout||b.unavailableTimeout,wsPath:e.wsPath||b.wsPath,wsPort:e.wsPort||b.wsPort,wssPort:e.wssPort||b.wssPort,enableStats:ti(e),httpHost:$r(e),useTLS:Zr(e),wsHost:Kr(e),userAuthenticator:ei(e),channelAuthorizer:ri(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}function $r(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":b.httpHost}function Kr(e){return e.wsHost?e.wsHost:e.cluster?pe(e.cluster):pe(b.cluster)}function pe(e){return"ws-"+e+".pusher.com"}function Zr(e){return k.getProtocol()==="https:"?!0:e.forceTLS!==!1}function ti(e){return"enableStats"in e?e.enableStats:"disableStats"in e?!e.disableStats:!1}function ei(e){var t=et(et({},b.userAuthentication),e.userAuthentication);return"customHandler"in t&&t.customHandler!=null?t.customHandler:Xr(t)}function ni(e,t){var n;return"channelAuthorization"in e?n=et(et({},b.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||b.authTransport,endpoint:e.authEndpoint||b.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=Gr(t,n,e.authorizer))),n}function ri(e,t){var n=ni(e,t);return"customHandler"in n&&n.customHandler!=null?n.customHandler:Vr(n)}var ii=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oi=function(e){ii(t,e);function t(n){var r=e.call(this,function(i,o){L.debug("No callbacks on watchlist events for "+i)})||this;return r.pusher=n,r.bindWatchlistInternalEvent(),r}return t.prototype.handleEvent=function(n){var r=this;n.data.events.forEach(function(i){r.emit(i.name,i)})},t.prototype.bindWatchlistInternalEvent=function(){var n=this;this.pusher.connection.bind("message",function(r){var i=r.event;i==="pusher_internal:watchlist_events"&&n.handleEvent(r)})},t}(V),si=oi;function ai(){var e,t,n=new Promise(function(r,i){e=r,t=i});return{promise:n,resolve:e,reject:t}}var ci=ai,ui=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pi=function(e){ui(t,e);function t(n){var r=e.call(this,function(i,o){L.debug("No callbacks on user for "+i)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.signinDonePromise=null,r._signinDoneResolve=null,r._onAuthorize=function(i,o){if(i){L.warn("Error during signin: "+i),r._cleanup();return}r.pusher.send_event("pusher:signin",{auth:o.auth,user_data:o.user_data})},r.pusher=n,r.pusher.connection.bind("state_change",function(i){var o=i.previous,s=i.current;o!=="connected"&&s==="connected"&&r._signin(),o==="connected"&&s!=="connected"&&(r._cleanup(),r._newSigninPromiseIfNeeded())}),r.watchlist=new si(n),r.pusher.connection.bind("message",function(i){var o=i.event;o==="pusher:signin_success"&&r._onSigninSuccess(i.data),r.serverToUserChannel&&r.serverToUserChannel.name===i.channel&&r.serverToUserChannel.handleEvent(i)}),r}return t.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},t.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},t.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{L.error("Failed parsing user data after signin: "+n.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){L.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},t.prototype._subscribeChannels=function(){var n=this,r=function(i){i.subscriptionPending&&i.subscriptionCancelled?i.reinstateSubscription():!i.subscriptionPending&&n.pusher.connection.state==="connected"&&i.subscribe()};this.serverToUserChannel=new xt("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(i,o){i.indexOf("pusher_internal:")===0||i.indexOf("pusher:")===0||n.emit(i,o)}),r(this.serverToUserChannel)},t.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},t.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var n=ci(),r=n.promise,i=n.resolve;r.done=!1;var o=function(){r.done=!0};r.then(o).catch(o),this.signinDonePromise=r,this._signinDoneResolve=i}},t}(V),li=pi,le=function(){function e(t,n){var r=this;if(hi(t),n=n||{},!n.cluster&&!(n.wsHost||n.httpHost)){var i=v.buildLogSuffix("javascriptQuickStart");L.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&L.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=Qr(n,this),this.channels=G.createChannels(),this.global_emitter=new V,this.sessionID=k.randomInt(1e9),this.timeline=new jr(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:bt.INFO,version:b.VERSION}),this.config.enableStats&&(this.timelineSender=G.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+k.TimelineTransport.name}));var o=function(s){return k.getDefaultStrategy(r.config,s,qr)};this.connection=G.createConnectionManager(this.key,{getStrategy:o,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(s){var p=s.event,w=p.indexOf("pusher_internal:")===0;if(s.channel){var f=r.channel(s.channel);f&&f.handleEvent(s)}w||r.global_emitter.emit(s.event,s.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(s){L.warn(s)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),this.user=new li(this),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return Yt(Qt({ws:k.Transports.ws},function(t){return t.isSupported({})}))},e.prototype.channel=function(t){return this.channels.find(t)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new It(6e4,function(){n.send(t)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(t,n,r){return this.global_emitter.bind(t,n,r),this},e.prototype.unbind=function(t,n,r){return this.global_emitter.unbind(t,n,r),this},e.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},e.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},e.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},e.prototype.subscribe=function(t){var n=this.channels.add(t,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n},e.prototype.unsubscribe=function(t){var n=this.channels.find(t);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(t),n&&n.subscribed&&n.unsubscribe())},e.prototype.send_event=function(t,n,r){return this.connection.send_event(t,n,r)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.prototype.signin=function(){this.user.signin()},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=k,e.ScriptReceivers=k.ScriptReceivers,e.DependenciesReceivers=k.DependenciesReceivers,e.auth_callbacks=k.auth_callbacks,e}(),qt=c.default=le;function hi(e){if(e==null)throw"You must pass your app key when you instantiate Pusher."}k.setup(le)}])})})(_e);var Ii=_e.exports;const Ai=Si(Ii);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lt=function(){return lt=Object.assign||function(a){for(var l,g=1,c=arguments.length;g<c;g++){l=arguments[g];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])}return a},lt.apply(this,arguments)};function Ri(a,l){var g={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&l.indexOf(c)<0&&(g[c]=a[c]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(a);d<c.length;d++)l.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(a,c[d])&&(g[c[d]]=a[c[d]]);return g}var Se=Object.prototype.hasOwnProperty;function Pe(a,l,g){for(g of a.keys())if(ht(g,l))return g}function ht(a,l){var g,c,d;if(a===l)return!0;if(a&&l&&(g=a.constructor)===l.constructor){if(g===Date)return a.getTime()===l.getTime();if(g===RegExp)return a.toString()===l.toString();if(g===Array){if((c=a.length)===l.length)for(;c--&&ht(a[c],l[c]););return c===-1}if(g===Set){if(a.size!==l.size)return!1;for(c of a)if(d=c,d&&typeof d=="object"&&(d=Pe(l,d),!d)||!l.has(d))return!1;return!0}if(g===Map){if(a.size!==l.size)return!1;for(c of a)if(d=c[0],d&&typeof d=="object"&&(d=Pe(l,d),!d)||!ht(c[1],l.get(d)))return!1;return!0}if(g===ArrayBuffer)a=new Uint8Array(a),l=new Uint8Array(l);else if(g===DataView){if((c=a.byteLength)===l.byteLength)for(;c--&&a.getInt8(c)===l.getInt8(c););return c===-1}if(ArrayBuffer.isView(a)){if((c=a.byteLength)===l.byteLength)for(;c--&&a[c]===l[c];);return c===-1}if(!g||typeof a=="object"){c=0;for(g in a)if(Se.call(a,g)&&++c&&!Se.call(l,g)||!(g in l)||!ht(a[g],l[g]))return!1;return Object.keys(l).length===c}}return a!==a&&l!==l}var Te=Bt.createContext({}),Li=Te,Ui=function(a){var l=a.clientKey,g=a.cluster,c=a.triggerEndpoint,d=a.defer,m=d===void 0?!1:d,y=a.children,R=a._PusherRuntime,b=Ri(a,["clientKey","cluster","triggerEndpoint","defer","children","_PusherRuntime"]);U.useEffect(function(){l||console.error("A client key is required for pusher"),g||console.error("A cluster is required for pusher")},[l,g]);var M=lt({cluster:g},b),O=U.useRef(b);U.useEffect(function(){O.current=b});var E=U.useState(),_=E[0],P=E[1];return U.useEffect(function(){!R||m||b.value||ht(O.current,b)&&_!==void 0||P(new R(l,M))},[_,l,b,m]),Bt.createElement(Te.Provider,lt({value:{client:_,triggerEndpoint:c},children:y},b))};function xi(){var a=U.useContext(Li);return U.useEffect(function(){Object.keys(a).length||console.warn(Di)},[a]),a}var Di="No Pusher context. Did you forget to wrap your app in a <PusherProvider />?",Ni="No channel name passed to useChannel. No channel has been subscribed to.";function ke(a){var l=xi().client,g=U.useState(),c=g[0],d=g[1];return U.useEffect(function(){if(l){if(!a){console.warn(Ni);return}var m=l.subscribe(a);return d(m),function(){return l==null?void 0:l.unsubscribe(a)}}},[a,l]),c}var ji=function(a,l,g,c,d,m,y,R){if(!a){var b;if(l===void 0)b=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var M=[g,c,d,m,y,R],O=0;b=new Error(l.replace(/%s/g,function(){return M[O++]})),b.name="Invariant Violation"}throw b.framesToPop=1,b}},Ce=ji;function Xt(a,l,g){Ce(l,"Must supply eventName and callback to onEvent"),Ce(g,"Must supply callback to onEvent"),U.useEffect(function(){if(a!==void 0)return a.bind(l,g),function(){a.unbind(l,g)}},[a,l,g])}var Mi=function(a){return Bt.createElement(Ui,lt({_PusherRuntime:Ai},a))},Hi={appEnv:"development",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",chatbotAppId:"d0f4d712-c12a-4cdf-72a1-7e9795bc061a",marketplaceUrl:"https://marketplace.dev.paas.reapit.cloud/apps",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerEditionDownloadUrl:"https://updates.reapit.net/install/setupdev.exe",adobeSignApiKey:"CBFCIBAA3AAABLblqZhCDiTpm3mtYxQo6xlPEpdTIPMUeWo1RPWyJnzmq9hUu_O9-a96bDc8nX8bBYL8pztU",liveChatWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],elementsUri:"https://elements.dev.paas.reapit.cloud/?path=/docs/welcome--page",graphQLUri:"https://graphql.dev.paas.reapit.cloud/graphql",analyticsSchemaDocsUrl:"https://reapit-analytics-schema.dev.paas.reapit.cloud",swaggerUri:"https://reapit-swagger-dev.s3.eu-west-2.amazonaws.com/foundations_swagger.json",DEPLOYMENT_SERVICE_HOST:"https://deployments.dev.paas.reapit.cloud/",PUSHER_KEY:"c48c04b607a9201f6054",zendeskUri:"https://static.zdassets.com/ekr/snippet.js?key=e8ed8416-ceb4-4e91-8186-097321c3ceda",pipelineWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],swaggerWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"]};const zi={DEPLOYMENT_SERVICE_HOST:Hi.DEPLOYMENT_SERVICE_HOST},wt={categoryIds:"",authFlow:"",screen5ImageUrl:"",screen4ImageUrl:"",screen3ImageUrl:"",screen2ImageUrl:"",screen1ImageUrl:"",name:"",telephone:"",supportEmail:"",launchUri:"",iconImageUrl:"",homePage:"",description:"",summary:"",developerId:"",scopes:"",redirectUris:"",signoutUris:"",limitToClientIds:"",desktopIntegrationTypeIds:"",isFree:!1,privacyPolicyUrl:"",pricingUrl:"",termsAndConditionsUrl:"",products:"",isListed:!1,isAgencyCloudIntegrated:!1,isPrivateApp:!1,deletionProtection:!1,videoUrl1:"",videoUrl2:"",launchWindowSizeX:950,launchWindowSizeY:750},qi={name:{name:"name",label:"Name",errorMessage:"Should only contain letters and number",placeholder:"The name of your app as it will appear to users",type:"text"},categoryIds:{name:"categoryIds",label:"App Categories"},supportEmail:{name:"supportEmail",label:"Support email",placeholder:"Email for customers to contact you",type:"email"},telephone:{name:"telephone",label:"Telephone",placeholder:"Number for customers to contact you",errorMessage:"Invalid Telephone number",type:"text"},homePage:{name:"homePage",label:"Home page",placeholder:"Your company homepage. HTTP:// or HTTPS://",errorMessage:"Invalid Home Page URL",type:"text"},launchUri:{name:"launchUri",label:"Launch URI",placeholder:"HTTPS or HTTP only for localhost",errorMessage:"Invalid Launch URI",type:"text"},summary:{name:"summary",label:"Summary",placeholder:"A short strapline summary for your app listing. Must be between 50 and 150 characters"},description:{name:"description",label:"Description",placeholder:"A detailed description for your app listing. Must be between 150 and 20000 characters. Please note: As this field supports HTML, special characters will be included in the character count"},termsAndConditionsUrl:{name:"termsAndConditionsUrl",label:"Terms and Conditions",placeholder:"URL to link to your Terms and Conditions",errorMessage:"Invalid URL - has to be https://",type:"text"},privacyPolicyUrl:{name:"privacyPolicyUrl",label:"Privacy Policy",placeholder:"URL to link to your Privacy Policy",errorMessage:"Invalid URL - has to be https://",type:"text"},pricingUrl:{name:"pricingUrl",label:"Pricing Info",placeholder:"URL to link to your Pricing Info",errorMessage:"Invalid URL - has to be https://",type:"text"},isFree:{name:"isFree",label:"This application is free",type:"checkbox"},deletionProtection:{name:"deletionProtection",label:"Check to prevent app from being deleted",type:"checkbox"},authFlow:{name:"authFlow",label:"AUTHENTICATION FLOW"},redirectUris:{name:"redirectUris",label:"Redirect URI(s)",placeholder:"Enter your Redirect URI(s)",errorMessage:"Invalid redirect uri(s)",type:"text"},signoutUris:{name:"signoutUris",label:"Sign Out URI(s)",placeholder:"Enter your Sign Out URI(s)",errorMessage:"Invalid sign out uri(s)",type:"text"},iconImageUrl:{name:"iconImageUrl",label:"Upload Icon Image",type:"file"},screen1ImageUrl:{name:"screen1ImageUrl",label:"Upload Featured Image",type:"file"},screen2ImageUrl:{name:"screen2ImageUrl",label:"Upload Other Listing Image",type:"file"},screen3ImageUrl:{name:"screen3ImageUrl",label:"Upload Other Listing Image",type:"file"},screen4ImageUrl:{name:"screen4ImageUrl",label:"Upload Other Listing Image",type:"file"},screen5ImageUrl:{name:"screen5ImageUrl",label:"Upload Other Listing Image",type:"file"},scopes:{name:"scopes",label:"Permissions",errorMessage:"At least one Permission is required"},limitToClientIds:{name:"limitToClientIds",label:"Private App Client Ids",placeholder:"Please enter the Customer ID. For multiple Customer ID\u2019s, please separate using a comma",errorMessage:"Invalid Customer ID(s). Each Customer ID should be between 3 and 15 characters.",type:"text"},desktopIntegrationTypeIds:{name:"desktopIntegrationTypeIds",label:"Integration Type",placeholder:"Please select"},isListed:{name:"isListed",label:"AppMarket Listed"},isAgencyCloudIntegrated:{name:"isAgencyCloudIntegrated",label:"AgencyCloud Integration"},isPrivateApp:{name:"isPrivateApp",label:"Private App"},developerId:{name:"developerId",label:"Developer ID"},products:{name:"products",label:"Reapit Products"},videoUrl1:{name:"videoUrl1",label:"Getting Started Video URL",placeholder:"YouTube embed preferred or any https hosted video",type:"text"},videoUrl2:{name:"videoUrl2",label:"Why Use Us Video URL",placeholder:"YouTube embed preferred or any https hosted video",type:"text"},launchWindowSizeX:{name:"launchWindowSizeX",label:"Default App Window Width",placeholder:"Width of window your app will be launched in AgencyCloud",type:"text"},launchWindowSizeY:{name:"launchWindowSizeY",label:"Default App Window Height",placeholder:"Height of window your app will be launched in AgencyCloud",type:"text"}};var _t=(a=>(a.applicationTypeStep="applicationTypeStep",a.webServicesStep="webServicesStep",a.reapitConnectStep="reapitConnectStep",a.agencyCloudStep="agencyCloudStep",a.dataFeedStep="dataFeedStep",a.serverSideStep="serverSideStep",a.clientSideStep="clientSideStep",a.websiteFeedStep="websiteFeedStep",a.permissionsStep="permissionsStep",a.externalAppStep="externalAppStep",a.rcRedirectsStep="rcRedirectsStep",a))(_t||{});const Ee={applicationTypeStep:{headingText:"What do you want to do today?",headerText:"First tell us about the kind of app or integration you are building to ensure we get you authenticated correctly. By selecting an option, relevant documentation and links will appear on the right hand side of the page before progressing.",iconName:"userInfographic"},webServicesStep:{headingText:"What kind of app are you building?",headerText:"Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.",iconName:"userDeviceInfographic"},reapitConnectStep:{headingText:"What kind of app are you building?",headerText:"Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.",iconName:"userDeviceInfographic"},externalAppStep:{headingText:"What kind of app are you building?",headerText:"Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.",iconName:"userDeviceInfographic"},agencyCloudStep:{headingText:"Authentication",headerText:"Please supply at least one redirect and logout uri. A non-https localhost uri is acceptable for quick start development.",iconName:"userAuthInfographic"},dataFeedStep:{headingText:"Permissions",headerText:"Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.",iconName:"userAuthInfographic"},serverSideStep:{headingText:"Permissions",headerText:"Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.",iconName:"userAuthInfographic"},clientSideStep:{headingText:"Authentication",headerText:"Please supply at least one redirect and logout uri. A non-https localhost uri is acceptable for quick start development.",iconName:"userAuthInfographic"},rcRedirectsStep:{headingText:"Authentication",headerText:"Please supply at least one redirect and logout uri. A non-https localhost uri is acceptable for quick start development.",iconName:"userAuthInfographic"},websiteFeedStep:{headingText:"Permissions",headerText:"Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.",iconName:"userAuthInfographic",permissions:["agencyCloud/properties.read","agencyCloud/offices.read","agencyCloud/negotiators.read"]},permissionsStep:{headingText:"Permissions",headerText:"Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.",iconName:"userAuthInfographic"}},Fi=a=>Ee[a??"applicationTypeStep"],Oe={currentStep:_t.applicationTypeStep,nextStep:null,prevStep:null,stepHistory:[_t.applicationTypeStep],authFlow:"clientCredentials",lastStep:!1},Ie={isListed:!1,isRevalidating:!1,isSaving:!1},Ae=(a,l)=>{var g,c,d,m,y,R,b;if(a&&l){const{media:M,scopes:O}=a,E=(M??[]).filter(({order:T})=>T===0)[0],_=(M??[]).filter(T=>T.type==="image").reduce((T,v,u)=>({...T,[`screen${u+1}ImageUrl`]:(v==null?void 0:v.uri)??""}),{screen1ImageUrl:""}),P=(M??[]).filter(T=>T.type==="video").reduce((T,v,u)=>({...T,[`videoUrl${u+1}`]:(v==null?void 0:v.uri)??""}),{videoUrl1:""});return{...wt,developerId:l,name:a.name??"",authFlow:a.authFlow??"",description:a.description??"",homePage:a.homePage??"",telephone:a.telephone??"",supportEmail:a.supportEmail??"",summary:a.summary??"",launchUri:a.launchUri??"",isListed:a.isListed??!1,isAgencyCloudIntegrated:!a.isDirectApi,isFree:a.isFree??!1,privacyPolicyUrl:a.privacyPolicyUrl??"",pricingUrl:a.pricingUrl??"",termsAndConditionsUrl:a.termsAndConditionsUrl??"",scopes:(O==null?void 0:O.map(T=>T.name??"").join(","))??"",redirectUris:((g=a.redirectUris)==null?void 0:g.join(","))??"",signoutUris:((c=a.signoutUris)==null?void 0:c.join(","))??"",limitToClientIds:((d=a.limitToClientIds)==null?void 0:d.join(","))??"",isPrivateApp:!!((m=a.limitToClientIds)!=null&&m.length),categoryIds:((y=a.categories)==null?void 0:y.map(T=>T.id??"").join(","))??"",desktopIntegrationTypeIds:((R=a.desktopIntegrationTypeIds)==null?void 0:R.join(","))??"",products:((b=a.products)==null?void 0:b.join(","))??"",iconImageUrl:(E==null?void 0:E.uri)??"",deletionProtection:a.deletionProtection??!1,launchWindowSizeX:a.launchWindowSizeX??wt.launchWindowSizeX,launchWindowSizeY:a.launchWindowSizeY??wt.launchWindowSizeY,..._,...P}}},Wi=(a,l,g)=>()=>{const c=Ae(l,g);c&&a(c)},Bi=(a,l)=>()=>{l(a)},Re=U.createContext({}),{Provider:Xi}=Re,Ji=({children:a})=>{const[l,g]=U.useState(Oe),[c,d]=U.useState(null),[m,y]=U.useState(1),[R,b]=U.useState(!1),[M,O]=U.useState(!1),[E,_]=U.useState(wt),[P,T]=U.useState(Ie),[v,u]=U.useState({}),[h,S]=U.useState([]),[I,N]=U.useState(null),{connectSession:A}=Pi(nt),x=A==null?void 0:A.loginIdentity.developerId,[W,q,,z,F]=ct({reapitConnectBrowserSession:nt,action:ut[pt.getApps],queryParams:{showHiddenApps:"true",developerId:x,pageSize:25,pageNumber:m},fetchWhenTrue:[x]}),[rt,St,,Pt,Q]=ct({reapitConnectBrowserSession:nt,action:ut[pt.getAppById],uriParams:{appId:I},fetchWhenTrue:[I]}),[B,Tt,,kt,Ct]=ct({reapitConnectBrowserSession:nt,action:ut[pt.getAppRevisions],queryParams:{pageSize:2},uriParams:{appId:I},fetchWhenTrue:[I]}),[it]=ct({reapitConnectBrowserSession:nt,action:ut[pt.getInstallations],queryParams:{appId:I,pageSize:1,isInstalled:!0,developerId:x},fetchWhenTrue:[x,I]}),[dt,ft,,gt]=ct({reapitConnectBrowserSession:nt,action:ut[pt.getPipeline],uriParams:{appId:I},headers:{Authorization:A==null?void 0:A.idToken},fetchWhenTrue:[A==null?void 0:A.idToken,I],onError:()=>{}}),Et=ke(`private-${x}`),Ot=x?Et:void 0,J=B!=null&&B.data?B.data[0]:null,It=!!(it!=null&&it.totalCount);U.useEffect(Wi(_,rt,x),[rt,x]),U.useEffect(Bi(dt,d),[dt]);const At={apps:W,appsLoading:q,appsRefreshing:F,appDetail:rt,appDetailLoading:St,appDetailRefreshing:Q,appRevisions:B,appRevisionsLoading:Tt,appRevisionsRefreshing:Ct,appsRefresh:z,appsDetailRefresh:Pt,appRefreshRevisions:kt,appsSetPageNumber:y},j={appEditForm:E,setAppEditForm:_,appEditSaving:P,setAppEditSaving:T,appUnsavedFields:v,setAppUnsavedFields:u,appIncompleteFields:h,setIncompleteFields:S,appLatestRevision:J,appHasInstallations:It},H={appPipeline:c,appPipelineLoading:ft,appPipelineDeploying:R,appPipelineSaving:M,appPipelinePusherChannel:Ot,appPipelineRefresh:gt,setAppPipeline:d,setAppPipelineDeploying:b,setAppPipelineSaving:O};return we.jsx(Xi,{value:{appWizardState:l,appsDataState:At,appEditState:j,appPipelineState:H,setAppWizardState:g,appId:I,setAppId:N},children:a})},Le=()=>U.useContext(Re),Ue=(a,l,g)=>c=>{const d=(a==null?void 0:a.id)||g;!c||!d||(c==null?void 0:c.id)!==d||l(c)},Yi=(a,l,g)=>c=>{var m;const d=(a==null?void 0:a.id)||g;!c||!d||((m=c.pipeline)==null?void 0:m.id)!==d||l(c.pipeline)},Vi=({children:a})=>{const{appId:l,appPipelineState:g}=Le(),{appPipeline:c,setAppPipeline:d,appPipelinePusherChannel:m}=g;return Xt(m,"pipeline-update",Ue(c,d,l)),Xt(m,"pipeline-runner-update",Yi(c,d,l)),we.jsx(Ti,{children:a})};export{_t as A,Vi as P,zi as U,Ee as a,Oe as b,qi as c,Ie as d,Ei as e,Ae as f,Fi as g,ki as h,Xt as i,Mi as j,Ji as k,ke as l,Ue as m,Oi as p,Ci as r,Le as u};
