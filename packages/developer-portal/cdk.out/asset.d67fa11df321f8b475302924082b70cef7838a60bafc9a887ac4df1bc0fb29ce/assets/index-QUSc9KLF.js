import{W as J,r as d,u as $,j as a,d as Z,aj as z,a as K,g as X,p as N,J as ee,ak as T,k as L,c as A,al as ae,D as t,E as o}from"./vendor-D_Z2viGi.js";import{r as se,R as ne,T as re}from"./index--hoyknbN.js";import{c as ie,a as m,e as c,p as le,b as te,t as oe,u as me,o as de}from"./error-messages-CMLWc-_H.js";import{s as p}from"./yup-C4O5GZsV.js";import{g as ce}from"./module-DOnifq-p.js";import{L as pe,a as ge}from"./index-BPav0DDS.js";import{c as he}from"./developer-DDAmrbIO.js";import"./index-BfR190KE.js";const M={nameField:{name:"name",label:"Full name",placeHolder:"Joe Developer",errorMessage:"Invalid full name"},companyNameField:{label:"Company name",name:"companyName",placeHolder:"Acme Industries Ltd"},emailField:{name:"email",label:"Email",placeHolder:"name@address.com",errorMessage:"Invalid email"},telephoneField:{name:"telephone",label:"Telephone",placeHolder:"0800 800 800",errorMessage:"Invalid phone number"},gitHubUsernameField:{name:"gitHubUsername",label:"GitHub Username",placeHolder:"Gihub handle",errorMessage:"Invalid GitHub Username"}},{nameField:O,companyNameField:ue,emailField:w,telephoneField:G,gitHubUsernameField:xe}=M,be=ie().shape({[O.name]:m().trim().required(c.FIELD_REQUIRED).matches(le,O.errorMessage).test(p),[ue.name]:m().trim().required(c.FIELD_REQUIRED).test(p),[w.name]:m().trim().required(c.FIELD_REQUIRED).matches(te,w.errorMessage),[G.name]:m().trim().required(c.FIELD_REQUIRED).matches(oe,G.errorMessage).test(p),[xe.name]:m().trim().test({name:"isValidDescription",message:"GitHub Username is not valid",test:s=>s?ce.test(s):!0}).test(p)}),{nameField:u,emailField:x,companyNameField:b,telephoneField:y,gitHubUsernameField:f}=M,k={name:"",companyName:"",email:"",telephone:"",agreedTerms:"",gitHubUsername:""},V=(s,n,r)=>async()=>{n("LOADING");const i=await he({...s,agreedTerms:J().format("YYYY-MM-DDTHH:mm:ssZ")});typeof i=="string"?(r(i,5e3),n("ERROR")):n("SUCCESS")},Y=s=>()=>{s(!1)},q=()=>s=>{s.preventDefault(),se.connectLoginRedirect(`${window.location.origin}${ne.APPS}`)},P=s=>()=>{s(!0)},Q=({getValues:s,errors:n,formStep:r,setFormStep:i})=>()=>{const{name:g,telephone:h}=s();g&&!n.name&&r!=3&&(h&&!n.telephone?i(3):i(2))},W=()=>{var F,S,R,H,I,D,E,U,v,C;const[s,n]=d.useState(!1),[r,i]=d.useState("INITIAL"),[g,h]=d.useState(1),{error:_}=$(),{handleSubmit:B,formState:{errors:e},register:l,getValues:j}=me({resolver:de(be),defaultValues:k});return d.useEffect(()=>{(r==="SUCCESS"||r==="ERROR")&&n(!1)},[r]),a.jsx(pe,{children:a.jsxs(ge,{children:[a.jsx(Z,{className:z,height:"40px",width:"200px",icon:"reapitLogo"}),a.jsxs(K,{isFlexColumn:!0,children:[a.jsx(X,{hasNoMargin:!0,hasCenteredText:!0,children:"Register"}),a.jsx(N,{hasCenteredText:!0,children:"for Reapit Foundations DeveloperPortal"})]}),r==="SUCCESS"?a.jsxs(a.Fragment,{children:[a.jsx(ee,{className:T,intent:"success",isExpanded:!0,isFullWidth:!0,isInline:!0,children:"Successfully registered, if you already have a Reapit Connect account, please now login. If you do not, please check your email to confirm your account."}),a.jsx(L,{alignment:"center",className:T,children:a.jsx(A,{onClick:q(),intent:"primary",children:"Login With Reapit"})})]}):a.jsx(a.Fragment,{children:a.jsxs("form",{onSubmit:B(P(n)),onChange:Q({getValues:j,errors:e,formStep:g,setFormStep:h}),children:[a.jsx(N,{hasGreyText:!0,hasCenteredText:!0,hasSectionMargin:!0,children:"By registering for the Foundations platform, you will get access to the Reapit DeveloperPortal and sandbox data. You will also get the opportunity to list apps in the Reapit Marketplace. We look forward to seeing what you build!"}),a.jsxs(ae,{hasMargin:!0,children:[a.jsx(t,{children:a.jsx(o,{type:"text",label:u.label,id:u.name,placeholder:u.placeHolder,...l("name"),intent:(F=e==null?void 0:e.name)!=null&&F.message?"danger":void 0,inputAddOnText:(S=e==null?void 0:e.name)==null?void 0:S.message})}),a.jsx(t,{children:a.jsx(o,{type:"text",label:b.label,id:b.name,placeholder:b.placeHolder,...l("companyName"),intent:(R=e==null?void 0:e.companyName)!=null&&R.message?"danger":void 0,inputAddOnText:(H=e==null?void 0:e.companyName)==null?void 0:H.message})}),a.jsx(t,{children:a.jsx(o,{type:"email",label:x.label,id:x.name,placeholder:x.placeHolder,...l("email"),intent:(I=e==null?void 0:e.email)!=null&&I.message?"danger":void 0,inputAddOnText:(D=e==null?void 0:e.email)==null?void 0:D.message})}),a.jsx(t,{children:a.jsx(o,{type:"tel",label:y.label,id:y.name,placeholder:y.placeHolder,...l("telephone"),intent:(E=e==null?void 0:e.telephone)!=null&&E.message?"danger":void 0,inputAddOnText:(U=e==null?void 0:e.telephone)==null?void 0:U.message})}),a.jsx(t,{children:a.jsx(o,{type:"tel",label:f.label,id:f.name,placeholder:f.placeHolder,...l("gitHubUsername"),intent:(v=e==null?void 0:e.gitHubUsername)!=null&&v.message?"danger":void 0,inputAddOnText:(C=e==null?void 0:e.gitHubUsername)==null?void 0:C.message})})]}),a.jsx(re,{visible:s,onAccept:V(j(),i,_),onDecline:Y(n),isSubmitting:r==="LOADING"}),a.jsx(L,{alignment:"center",children:a.jsx(A,{type:"submit",loading:r==="LOADING",intent:"primary",children:"Register"})})]})})]})})};export{W as Register,W as default,Q as formChange,P as formSubmit,Y as onDeclineTermsAndConditions,q as onLoginButtonClick,V as onSubmit,k as registerFormInitialValues};
