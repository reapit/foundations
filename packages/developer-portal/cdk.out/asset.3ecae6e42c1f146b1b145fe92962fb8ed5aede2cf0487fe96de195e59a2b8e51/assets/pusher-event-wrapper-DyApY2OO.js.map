{"version":3,"file":"pusher-event-wrapper-DyApY2OO.js","sources":["../../../utils-common/src/pipeline-helpers/index.ts","../../../../node_modules/pusher-js/dist/web/pusher.js","../../../../node_modules/@harelpls/use-pusher/dist/index.es.js","../../src/constants/api.ts","../../src/components/apps/edit/form-schema/form-fields.ts","../../src/components/apps/new/config.tsx","../../src/components/apps/state/defaults.ts","../../src/components/apps/utils/handle-default-form-values.ts","../../src/components/apps/utils/handle-pipeline-event.ts","../../src/components/apps/state/use-app-state.tsx","../../src/components/apps/page/pusher-event-wrapper.tsx"],"sourcesContent":["import { Intent } from '@reapit/elements'\nimport { PipelineRunnerType } from '@reapit/foundations-ts-definitions'\n\nexport const buildStatusToIntent = (status: string): Intent => {\n  switch (status) {\n    case 'PROVISIONING':\n      return 'primary'\n    case 'SUCCEEDED':\n    case 'COMPLETED':\n      return 'success'\n    case 'IN_PROGRESS':\n    case 'QUEUED':\n      return 'neutral'\n    case 'FAILED':\n    case 'DELETING':\n    case 'DELETED':\n    case 'FAILED_TO_PROVISION':\n    case 'SCHEDULED_FOR_DELETION':\n      return 'danger'\n    case 'PRE_PROVISIONED':\n    case 'READY_FOR_DEPLOYMENT':\n    default:\n      return 'pending'\n  }\n}\n\nexport const runnerTypeToReadable = (type: PipelineRunnerType): string => {\n  switch (type) {\n    case 'BUILD':\n      return 'Pulled from repo'\n    case 'RELEASE':\n      return 'Built from zip'\n    case 'REPO':\n      return 'Git pushed'\n    default:\n      return 'Unknown'\n  }\n}\n\nexport const buildStatusToReadable = (status: string): string =>\n  status\n    .split('_')\n    .map((str) => `${str.charAt(0).toUpperCase()}${str.slice(1).toLowerCase()}`)\n    .join(' ')\n\nexport const pipelineViewable = (status: string): boolean =>\n  ![\n    'DELETING',\n    'SCHEDULED_FOR_DELETION',\n    'DELETED',\n    'PRE_PROVISIONED',\n    'PROVISIONING',\n    'PROVISION_REQUEST',\n    'FAILED_TO_PROVISION',\n    'READY_FOR_DEPLOYMENT',\n  ].includes(status)\n","/*!\n * Pusher JavaScript Library v7.6.0\n * https://pusher.com/\n *\n * Copyright 2020, Pusher\n * Released under the MIT licence.\n */\n\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Pusher\"] = factory();\n\telse\n\t\troot[\"Pusher\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Package base64 implements Base64 encoding and decoding.\n */\n// Invalid character used in decoding to indicate\n// that the character to decode is out of range of\n// alphabet and cannot be decoded.\nvar INVALID_BYTE = 256;\n/**\n * Implements standard Base64 encoding.\n *\n * Operates in constant time.\n */\nvar Coder = /** @class */ (function () {\n    // TODO(dchest): methods to encode chunk-by-chunk.\n    function Coder(_paddingCharacter) {\n        if (_paddingCharacter === void 0) { _paddingCharacter = \"=\"; }\n        this._paddingCharacter = _paddingCharacter;\n    }\n    Coder.prototype.encodedLength = function (length) {\n        if (!this._paddingCharacter) {\n            return (length * 8 + 5) / 6 | 0;\n        }\n        return (length + 2) / 3 * 4 | 0;\n    };\n    Coder.prototype.encode = function (data) {\n        var out = \"\";\n        var i = 0;\n        for (; i < data.length - 2; i += 3) {\n            var c = (data[i] << 16) | (data[i + 1] << 8) | (data[i + 2]);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            out += this._encodeByte((c >>> 1 * 6) & 63);\n            out += this._encodeByte((c >>> 0 * 6) & 63);\n        }\n        var left = data.length - i;\n        if (left > 0) {\n            var c = (data[i] << 16) | (left === 2 ? data[i + 1] << 8 : 0);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            if (left === 2) {\n                out += this._encodeByte((c >>> 1 * 6) & 63);\n            }\n            else {\n                out += this._paddingCharacter || \"\";\n            }\n            out += this._paddingCharacter || \"\";\n        }\n        return out;\n    };\n    Coder.prototype.maxDecodedLength = function (length) {\n        if (!this._paddingCharacter) {\n            return (length * 6 + 7) / 8 | 0;\n        }\n        return length / 4 * 3 | 0;\n    };\n    Coder.prototype.decodedLength = function (s) {\n        return this.maxDecodedLength(s.length - this._getPaddingLength(s));\n    };\n    Coder.prototype.decode = function (s) {\n        if (s.length === 0) {\n            return new Uint8Array(0);\n        }\n        var paddingLength = this._getPaddingLength(s);\n        var length = s.length - paddingLength;\n        var out = new Uint8Array(this.maxDecodedLength(length));\n        var op = 0;\n        var i = 0;\n        var haveBad = 0;\n        var v0 = 0, v1 = 0, v2 = 0, v3 = 0;\n        for (; i < length - 4; i += 4) {\n            v0 = this._decodeChar(s.charCodeAt(i + 0));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n            haveBad |= v2 & INVALID_BYTE;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (i < length - 1) {\n            v0 = this._decodeChar(s.charCodeAt(i));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n        }\n        if (i < length - 2) {\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            haveBad |= v2 & INVALID_BYTE;\n        }\n        if (i < length - 3) {\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (haveBad !== 0) {\n            throw new Error(\"Base64Coder: incorrect characters for decoding\");\n        }\n        return out;\n    };\n    // Standard encoding have the following encoded/decoded ranges,\n    // which we need to convert between.\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  +   /\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   43  47\n    //\n    // Encode 6 bits in b into a new character.\n    Coder.prototype._encodeByte = function (b) {\n        // Encoding uses constant time operations as follows:\n        //\n        // 1. Define comparison of A with B using (A - B) >>> 8:\n        //          if A > B, then result is positive integer\n        //          if A <= B, then result is 0\n        //\n        // 2. Define selection of C or 0 using bitwise AND: X & C:\n        //          if X == 0, then result is 0\n        //          if X != 0, then result is C\n        //\n        // 3. Start with the smallest comparison (b >= 0), which is always\n        //    true, so set the result to the starting ASCII value (65).\n        //\n        // 4. Continue comparing b to higher ASCII values, and selecting\n        //    zero if comparison isn't true, otherwise selecting a value\n        //    to add to result, which:\n        //\n        //          a) undoes the previous addition\n        //          b) provides new value to add\n        //\n        var result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 43);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 43) - 63 + 47);\n        return String.fromCharCode(result);\n    };\n    // Decode a character code into a byte.\n    // Must return 256 if character is out of alphabet range.\n    Coder.prototype._decodeChar = function (c) {\n        // Decoding works similar to encoding: using the same comparison\n        // function, but now it works on ranges: result is always incremented\n        // by value, but this value becomes zero if the range is not\n        // satisfied.\n        //\n        // Decoding starts with invalid value, 256, which is then\n        // subtracted when the range is satisfied. If none of the ranges\n        // apply, the function returns 256, which is then checked by\n        // the caller to throw error.\n        var result = INVALID_BYTE; // start with invalid character\n        // c == 43 (c > 42 and c < 44)\n        result += (((42 - c) & (c - 44)) >>> 8) & (-INVALID_BYTE + c - 43 + 62);\n        // c == 47 (c > 46 and c < 48)\n        result += (((46 - c) & (c - 48)) >>> 8) & (-INVALID_BYTE + c - 47 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n        return result;\n    };\n    Coder.prototype._getPaddingLength = function (s) {\n        var paddingLength = 0;\n        if (this._paddingCharacter) {\n            for (var i = s.length - 1; i >= 0; i--) {\n                if (s[i] !== this._paddingCharacter) {\n                    break;\n                }\n                paddingLength++;\n            }\n            if (s.length < 4 || paddingLength > 2) {\n                throw new Error(\"Base64Coder: incorrect padding\");\n            }\n        }\n        return paddingLength;\n    };\n    return Coder;\n}());\nexports.Coder = Coder;\nvar stdCoder = new Coder();\nfunction encode(data) {\n    return stdCoder.encode(data);\n}\nexports.encode = encode;\nfunction decode(s) {\n    return stdCoder.decode(s);\n}\nexports.decode = decode;\n/**\n * Implements URL-safe Base64 encoding.\n * (Same as Base64, but '+' is replaced with '-', and '/' with '_').\n *\n * Operates in constant time.\n */\nvar URLSafeCoder = /** @class */ (function (_super) {\n    __extends(URLSafeCoder, _super);\n    function URLSafeCoder() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // URL-safe encoding have the following encoded/decoded ranges:\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  -   _\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   45  95\n    //\n    URLSafeCoder.prototype._encodeByte = function (b) {\n        var result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 45);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 45) - 63 + 95);\n        return String.fromCharCode(result);\n    };\n    URLSafeCoder.prototype._decodeChar = function (c) {\n        var result = INVALID_BYTE;\n        // c == 45 (c > 44 and c < 46)\n        result += (((44 - c) & (c - 46)) >>> 8) & (-INVALID_BYTE + c - 45 + 62);\n        // c == 95 (c > 94 and c < 96)\n        result += (((94 - c) & (c - 96)) >>> 8) & (-INVALID_BYTE + c - 95 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n        return result;\n    };\n    return URLSafeCoder;\n}(Coder));\nexports.URLSafeCoder = URLSafeCoder;\nvar urlSafeCoder = new URLSafeCoder();\nfunction encodeURLSafe(data) {\n    return urlSafeCoder.encode(data);\n}\nexports.encodeURLSafe = encodeURLSafe;\nfunction decodeURLSafe(s) {\n    return urlSafeCoder.decode(s);\n}\nexports.decodeURLSafe = decodeURLSafe;\nexports.encodedLength = function (length) {\n    return stdCoder.encodedLength(length);\n};\nexports.maxDecodedLength = function (length) {\n    return stdCoder.maxDecodedLength(length);\n};\nexports.decodedLength = function (s) {\n    return stdCoder.decodedLength(s);\n};\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Package utf8 implements UTF-8 encoding and decoding.\n */\nvar INVALID_UTF16 = \"utf8: invalid string\";\nvar INVALID_UTF8 = \"utf8: invalid source encoding\";\n/**\n * Encodes the given string into UTF-8 byte array.\n * Throws if the source string has invalid UTF-16 encoding.\n */\nfunction encode(s) {\n    // Calculate result length and allocate output array.\n    // encodedLength() also validates string and throws errors,\n    // so we don't need repeat validation here.\n    var arr = new Uint8Array(encodedLength(s));\n    var pos = 0;\n    for (var i = 0; i < s.length; i++) {\n        var c = s.charCodeAt(i);\n        if (c < 0x80) {\n            arr[pos++] = c;\n        }\n        else if (c < 0x800) {\n            arr[pos++] = 0xc0 | c >> 6;\n            arr[pos++] = 0x80 | c & 0x3f;\n        }\n        else if (c < 0xd800) {\n            arr[pos++] = 0xe0 | c >> 12;\n            arr[pos++] = 0x80 | (c >> 6) & 0x3f;\n            arr[pos++] = 0x80 | c & 0x3f;\n        }\n        else {\n            i++; // get one more character\n            c = (c & 0x3ff) << 10;\n            c |= s.charCodeAt(i) & 0x3ff;\n            c += 0x10000;\n            arr[pos++] = 0xf0 | c >> 18;\n            arr[pos++] = 0x80 | (c >> 12) & 0x3f;\n            arr[pos++] = 0x80 | (c >> 6) & 0x3f;\n            arr[pos++] = 0x80 | c & 0x3f;\n        }\n    }\n    return arr;\n}\nexports.encode = encode;\n/**\n * Returns the number of bytes required to encode the given string into UTF-8.\n * Throws if the source string has invalid UTF-16 encoding.\n */\nfunction encodedLength(s) {\n    var result = 0;\n    for (var i = 0; i < s.length; i++) {\n        var c = s.charCodeAt(i);\n        if (c < 0x80) {\n            result += 1;\n        }\n        else if (c < 0x800) {\n            result += 2;\n        }\n        else if (c < 0xd800) {\n            result += 3;\n        }\n        else if (c <= 0xdfff) {\n            if (i >= s.length - 1) {\n                throw new Error(INVALID_UTF16);\n            }\n            i++; // \"eat\" next character\n            result += 4;\n        }\n        else {\n            throw new Error(INVALID_UTF16);\n        }\n    }\n    return result;\n}\nexports.encodedLength = encodedLength;\n/**\n * Decodes the given byte array from UTF-8 into a string.\n * Throws if encoding is invalid.\n */\nfunction decode(arr) {\n    var chars = [];\n    for (var i = 0; i < arr.length; i++) {\n        var b = arr[i];\n        if (b & 0x80) {\n            var min = void 0;\n            if (b < 0xe0) {\n                // Need 1 more byte.\n                if (i >= arr.length) {\n                    throw new Error(INVALID_UTF8);\n                }\n                var n1 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x1f) << 6 | (n1 & 0x3f);\n                min = 0x80;\n            }\n            else if (b < 0xf0) {\n                // Need 2 more bytes.\n                if (i >= arr.length - 1) {\n                    throw new Error(INVALID_UTF8);\n                }\n                var n1 = arr[++i];\n                var n2 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80 || (n2 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x0f) << 12 | (n1 & 0x3f) << 6 | (n2 & 0x3f);\n                min = 0x800;\n            }\n            else if (b < 0xf8) {\n                // Need 3 more bytes.\n                if (i >= arr.length - 2) {\n                    throw new Error(INVALID_UTF8);\n                }\n                var n1 = arr[++i];\n                var n2 = arr[++i];\n                var n3 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80 || (n2 & 0xc0) !== 0x80 || (n3 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x0f) << 18 | (n1 & 0x3f) << 12 | (n2 & 0x3f) << 6 | (n3 & 0x3f);\n                min = 0x10000;\n            }\n            else {\n                throw new Error(INVALID_UTF8);\n            }\n            if (b < min || (b >= 0xd800 && b <= 0xdfff)) {\n                throw new Error(INVALID_UTF8);\n            }\n            if (b >= 0x10000) {\n                // Surrogate pair.\n                if (b > 0x10ffff) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b -= 0x10000;\n                chars.push(String.fromCharCode(0xd800 | (b >> 10)));\n                b = 0xdc00 | (b & 0x3ff);\n            }\n        }\n        chars.push(String.fromCharCode(b));\n    }\n    return chars.join(\"\");\n}\nexports.decode = decode;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// required so we don't have to do require('pusher').default etc.\nmodule.exports = __webpack_require__(3).default;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/runtimes/web/dom/script_receiver_factory.ts\nvar ScriptReceiverFactory = (function () {\n    function ScriptReceiverFactory(prefix, name) {\n        this.lastId = 0;\n        this.prefix = prefix;\n        this.name = name;\n    }\n    ScriptReceiverFactory.prototype.create = function (callback) {\n        this.lastId++;\n        var number = this.lastId;\n        var id = this.prefix + number;\n        var name = this.name + '[' + number + ']';\n        var called = false;\n        var callbackWrapper = function () {\n            if (!called) {\n                callback.apply(null, arguments);\n                called = true;\n            }\n        };\n        this[number] = callbackWrapper;\n        return { number: number, id: id, name: name, callback: callbackWrapper };\n    };\n    ScriptReceiverFactory.prototype.remove = function (receiver) {\n        delete this[receiver.number];\n    };\n    return ScriptReceiverFactory;\n}());\n\nvar ScriptReceivers = new ScriptReceiverFactory('_pusher_script_', 'Pusher.ScriptReceivers');\n\n// CONCATENATED MODULE: ./src/core/defaults.ts\nvar Defaults = {\n    VERSION: \"7.6.0\",\n    PROTOCOL: 7,\n    wsPort: 80,\n    wssPort: 443,\n    wsPath: '',\n    httpHost: 'sockjs.pusher.com',\n    httpPort: 80,\n    httpsPort: 443,\n    httpPath: '/pusher',\n    stats_host: 'stats.pusher.com',\n    authEndpoint: '/pusher/auth',\n    authTransport: 'ajax',\n    activityTimeout: 120000,\n    pongTimeout: 30000,\n    unavailableTimeout: 10000,\n    cluster: 'mt1',\n    userAuthentication: {\n        endpoint: '/pusher/user-auth',\n        transport: 'ajax'\n    },\n    channelAuthorization: {\n        endpoint: '/pusher/auth',\n        transport: 'ajax'\n    },\n    cdn_http: \"http://js.pusher.com\",\n    cdn_https: \"https://js.pusher.com\",\n    dependency_suffix: \"\"\n};\n/* harmony default export */ var defaults = (Defaults);\n\n// CONCATENATED MODULE: ./src/runtimes/web/dom/dependency_loader.ts\n\n\nvar dependency_loader_DependencyLoader = (function () {\n    function DependencyLoader(options) {\n        this.options = options;\n        this.receivers = options.receivers || ScriptReceivers;\n        this.loading = {};\n    }\n    DependencyLoader.prototype.load = function (name, options, callback) {\n        var self = this;\n        if (self.loading[name] && self.loading[name].length > 0) {\n            self.loading[name].push(callback);\n        }\n        else {\n            self.loading[name] = [callback];\n            var request = runtime.createScriptRequest(self.getPath(name, options));\n            var receiver = self.receivers.create(function (error) {\n                self.receivers.remove(receiver);\n                if (self.loading[name]) {\n                    var callbacks = self.loading[name];\n                    delete self.loading[name];\n                    var successCallback = function (wasSuccessful) {\n                        if (!wasSuccessful) {\n                            request.cleanup();\n                        }\n                    };\n                    for (var i = 0; i < callbacks.length; i++) {\n                        callbacks[i](error, successCallback);\n                    }\n                }\n            });\n            request.send(receiver);\n        }\n    };\n    DependencyLoader.prototype.getRoot = function (options) {\n        var cdn;\n        var protocol = runtime.getDocument().location.protocol;\n        if ((options && options.useTLS) || protocol === 'https:') {\n            cdn = this.options.cdn_https;\n        }\n        else {\n            cdn = this.options.cdn_http;\n        }\n        return cdn.replace(/\\/*$/, '') + '/' + this.options.version;\n    };\n    DependencyLoader.prototype.getPath = function (name, options) {\n        return this.getRoot(options) + '/' + name + this.options.suffix + '.js';\n    };\n    return DependencyLoader;\n}());\n/* harmony default export */ var dependency_loader = (dependency_loader_DependencyLoader);\n\n// CONCATENATED MODULE: ./src/runtimes/web/dom/dependencies.ts\n\n\n\nvar DependenciesReceivers = new ScriptReceiverFactory('_pusher_dependencies', 'Pusher.DependenciesReceivers');\nvar Dependencies = new dependency_loader({\n    cdn_http: defaults.cdn_http,\n    cdn_https: defaults.cdn_https,\n    version: defaults.VERSION,\n    suffix: defaults.dependency_suffix,\n    receivers: DependenciesReceivers\n});\n\n// CONCATENATED MODULE: ./src/core/utils/url_store.ts\nvar urlStore = {\n    baseUrl: 'https://pusher.com',\n    urls: {\n        authenticationEndpoint: {\n            path: '/docs/channels/server_api/authenticating_users'\n        },\n        authorizationEndpoint: {\n            path: '/docs/channels/server_api/authorizing-users/'\n        },\n        javascriptQuickStart: {\n            path: '/docs/javascript_quick_start'\n        },\n        triggeringClientEvents: {\n            path: '/docs/client_api_guide/client_events#trigger-events'\n        },\n        encryptedChannelSupport: {\n            fullUrl: 'https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support'\n        }\n    }\n};\nvar buildLogSuffix = function (key) {\n    var urlPrefix = 'See:';\n    var urlObj = urlStore.urls[key];\n    if (!urlObj)\n        return '';\n    var url;\n    if (urlObj.fullUrl) {\n        url = urlObj.fullUrl;\n    }\n    else if (urlObj.path) {\n        url = urlStore.baseUrl + urlObj.path;\n    }\n    if (!url)\n        return '';\n    return urlPrefix + \" \" + url;\n};\n/* harmony default export */ var url_store = ({ buildLogSuffix: buildLogSuffix });\n\n// CONCATENATED MODULE: ./src/core/auth/options.ts\nvar AuthRequestType;\n(function (AuthRequestType) {\n    AuthRequestType[\"UserAuthentication\"] = \"user-authentication\";\n    AuthRequestType[\"ChannelAuthorization\"] = \"channel-authorization\";\n})(AuthRequestType || (AuthRequestType = {}));\n\n// CONCATENATED MODULE: ./src/core/errors.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BadEventName = (function (_super) {\n    __extends(BadEventName, _super);\n    function BadEventName(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return BadEventName;\n}(Error));\n\nvar BadChannelName = (function (_super) {\n    __extends(BadChannelName, _super);\n    function BadChannelName(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return BadChannelName;\n}(Error));\n\nvar RequestTimedOut = (function (_super) {\n    __extends(RequestTimedOut, _super);\n    function RequestTimedOut(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return RequestTimedOut;\n}(Error));\n\nvar TransportPriorityTooLow = (function (_super) {\n    __extends(TransportPriorityTooLow, _super);\n    function TransportPriorityTooLow(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return TransportPriorityTooLow;\n}(Error));\n\nvar TransportClosed = (function (_super) {\n    __extends(TransportClosed, _super);\n    function TransportClosed(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return TransportClosed;\n}(Error));\n\nvar UnsupportedFeature = (function (_super) {\n    __extends(UnsupportedFeature, _super);\n    function UnsupportedFeature(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return UnsupportedFeature;\n}(Error));\n\nvar UnsupportedTransport = (function (_super) {\n    __extends(UnsupportedTransport, _super);\n    function UnsupportedTransport(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return UnsupportedTransport;\n}(Error));\n\nvar UnsupportedStrategy = (function (_super) {\n    __extends(UnsupportedStrategy, _super);\n    function UnsupportedStrategy(msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return UnsupportedStrategy;\n}(Error));\n\nvar HTTPAuthError = (function (_super) {\n    __extends(HTTPAuthError, _super);\n    function HTTPAuthError(status, msg) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, msg) || this;\n        _this.status = status;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return HTTPAuthError;\n}(Error));\n\n\n// CONCATENATED MODULE: ./src/runtimes/isomorphic/auth/xhr_auth.ts\n\n\n\n\nvar ajax = function (context, query, authOptions, authRequestType, callback) {\n    var xhr = runtime.createXHR();\n    xhr.open('POST', authOptions.endpoint, true);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    for (var headerName in authOptions.headers) {\n        xhr.setRequestHeader(headerName, authOptions.headers[headerName]);\n    }\n    if (authOptions.headersProvider != null) {\n        var dynamicHeaders = authOptions.headersProvider();\n        for (var headerName in dynamicHeaders) {\n            xhr.setRequestHeader(headerName, dynamicHeaders[headerName]);\n        }\n    }\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            if (xhr.status === 200) {\n                var data = void 0;\n                var parsed = false;\n                try {\n                    data = JSON.parse(xhr.responseText);\n                    parsed = true;\n                }\n                catch (e) {\n                    callback(new HTTPAuthError(200, \"JSON returned from \" + authRequestType.toString() + \" endpoint was invalid, yet status code was 200. Data was: \" + xhr.responseText), null);\n                }\n                if (parsed) {\n                    callback(null, data);\n                }\n            }\n            else {\n                var suffix = '';\n                switch (authRequestType) {\n                    case AuthRequestType.UserAuthentication:\n                        suffix = url_store.buildLogSuffix('authenticationEndpoint');\n                        break;\n                    case AuthRequestType.ChannelAuthorization:\n                        suffix = \"Clients must be authorized to join private or presence channels. \" + url_store.buildLogSuffix('authorizationEndpoint');\n                        break;\n                }\n                callback(new HTTPAuthError(xhr.status, \"Unable to retrieve auth string from \" + authRequestType.toString() + \" endpoint - \" +\n                    (\"received status: \" + xhr.status + \" from \" + authOptions.endpoint + \". \" + suffix)), null);\n            }\n        }\n    };\n    xhr.send(query);\n    return xhr;\n};\n/* harmony default export */ var xhr_auth = (ajax);\n\n// CONCATENATED MODULE: ./src/core/base64.ts\nfunction encode(s) {\n    return btoa(utob(s));\n}\nvar fromCharCode = String.fromCharCode;\nvar b64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar b64tab = {};\nfor (var base64_i = 0, l = b64chars.length; base64_i < l; base64_i++) {\n    b64tab[b64chars.charAt(base64_i)] = base64_i;\n}\nvar cb_utob = function (c) {\n    var cc = c.charCodeAt(0);\n    return cc < 0x80\n        ? c\n        : cc < 0x800\n            ? fromCharCode(0xc0 | (cc >>> 6)) + fromCharCode(0x80 | (cc & 0x3f))\n            : fromCharCode(0xe0 | ((cc >>> 12) & 0x0f)) +\n                fromCharCode(0x80 | ((cc >>> 6) & 0x3f)) +\n                fromCharCode(0x80 | (cc & 0x3f));\n};\nvar utob = function (u) {\n    return u.replace(/[^\\x00-\\x7F]/g, cb_utob);\n};\nvar cb_encode = function (ccc) {\n    var padlen = [0, 2, 1][ccc.length % 3];\n    var ord = (ccc.charCodeAt(0) << 16) |\n        ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8) |\n        (ccc.length > 2 ? ccc.charCodeAt(2) : 0);\n    var chars = [\n        b64chars.charAt(ord >>> 18),\n        b64chars.charAt((ord >>> 12) & 63),\n        padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\n        padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\n    ];\n    return chars.join('');\n};\nvar btoa = window.btoa ||\n    function (b) {\n        return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\n    };\n\n// CONCATENATED MODULE: ./src/core/utils/timers/abstract_timer.ts\nvar Timer = (function () {\n    function Timer(set, clear, delay, callback) {\n        var _this = this;\n        this.clear = clear;\n        this.timer = set(function () {\n            if (_this.timer) {\n                _this.timer = callback(_this.timer);\n            }\n        }, delay);\n    }\n    Timer.prototype.isRunning = function () {\n        return this.timer !== null;\n    };\n    Timer.prototype.ensureAborted = function () {\n        if (this.timer) {\n            this.clear(this.timer);\n            this.timer = null;\n        }\n    };\n    return Timer;\n}());\n/* harmony default export */ var abstract_timer = (Timer);\n\n// CONCATENATED MODULE: ./src/core/utils/timers/index.ts\nvar timers_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nfunction timers_clearTimeout(timer) {\n    window.clearTimeout(timer);\n}\nfunction timers_clearInterval(timer) {\n    window.clearInterval(timer);\n}\nvar OneOffTimer = (function (_super) {\n    timers_extends(OneOffTimer, _super);\n    function OneOffTimer(delay, callback) {\n        return _super.call(this, setTimeout, timers_clearTimeout, delay, function (timer) {\n            callback();\n            return null;\n        }) || this;\n    }\n    return OneOffTimer;\n}(abstract_timer));\n\nvar PeriodicTimer = (function (_super) {\n    timers_extends(PeriodicTimer, _super);\n    function PeriodicTimer(delay, callback) {\n        return _super.call(this, setInterval, timers_clearInterval, delay, function (timer) {\n            callback();\n            return timer;\n        }) || this;\n    }\n    return PeriodicTimer;\n}(abstract_timer));\n\n\n// CONCATENATED MODULE: ./src/core/util.ts\n\nvar Util = {\n    now: function () {\n        if (Date.now) {\n            return Date.now();\n        }\n        else {\n            return new Date().valueOf();\n        }\n    },\n    defer: function (callback) {\n        return new OneOffTimer(0, callback);\n    },\n    method: function (name) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var boundArguments = Array.prototype.slice.call(arguments, 1);\n        return function (object) {\n            return object[name].apply(object, boundArguments.concat(arguments));\n        };\n    }\n};\n/* harmony default export */ var util = (Util);\n\n// CONCATENATED MODULE: ./src/core/utils/collections.ts\n\n\nfunction extend(target) {\n    var sources = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        sources[_i - 1] = arguments[_i];\n    }\n    for (var i = 0; i < sources.length; i++) {\n        var extensions = sources[i];\n        for (var property in extensions) {\n            if (extensions[property] &&\n                extensions[property].constructor &&\n                extensions[property].constructor === Object) {\n                target[property] = extend(target[property] || {}, extensions[property]);\n            }\n            else {\n                target[property] = extensions[property];\n            }\n        }\n    }\n    return target;\n}\nfunction stringify() {\n    var m = ['Pusher'];\n    for (var i = 0; i < arguments.length; i++) {\n        if (typeof arguments[i] === 'string') {\n            m.push(arguments[i]);\n        }\n        else {\n            m.push(safeJSONStringify(arguments[i]));\n        }\n    }\n    return m.join(' : ');\n}\nfunction arrayIndexOf(array, item) {\n    var nativeIndexOf = Array.prototype.indexOf;\n    if (array === null) {\n        return -1;\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) {\n        return array.indexOf(item);\n    }\n    for (var i = 0, l = array.length; i < l; i++) {\n        if (array[i] === item) {\n            return i;\n        }\n    }\n    return -1;\n}\nfunction objectApply(object, f) {\n    for (var key in object) {\n        if (Object.prototype.hasOwnProperty.call(object, key)) {\n            f(object[key], key, object);\n        }\n    }\n}\nfunction keys(object) {\n    var keys = [];\n    objectApply(object, function (_, key) {\n        keys.push(key);\n    });\n    return keys;\n}\nfunction values(object) {\n    var values = [];\n    objectApply(object, function (value) {\n        values.push(value);\n    });\n    return values;\n}\nfunction apply(array, f, context) {\n    for (var i = 0; i < array.length; i++) {\n        f.call(context || window, array[i], i, array);\n    }\n}\nfunction map(array, f) {\n    var result = [];\n    for (var i = 0; i < array.length; i++) {\n        result.push(f(array[i], i, array, result));\n    }\n    return result;\n}\nfunction mapObject(object, f) {\n    var result = {};\n    objectApply(object, function (value, key) {\n        result[key] = f(value);\n    });\n    return result;\n}\nfunction filter(array, test) {\n    test =\n        test ||\n            function (value) {\n                return !!value;\n            };\n    var result = [];\n    for (var i = 0; i < array.length; i++) {\n        if (test(array[i], i, array, result)) {\n            result.push(array[i]);\n        }\n    }\n    return result;\n}\nfunction filterObject(object, test) {\n    var result = {};\n    objectApply(object, function (value, key) {\n        if ((test && test(value, key, object, result)) || Boolean(value)) {\n            result[key] = value;\n        }\n    });\n    return result;\n}\nfunction flatten(object) {\n    var result = [];\n    objectApply(object, function (value, key) {\n        result.push([key, value]);\n    });\n    return result;\n}\nfunction any(array, test) {\n    for (var i = 0; i < array.length; i++) {\n        if (test(array[i], i, array)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction collections_all(array, test) {\n    for (var i = 0; i < array.length; i++) {\n        if (!test(array[i], i, array)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction encodeParamsObject(data) {\n    return mapObject(data, function (value) {\n        if (typeof value === 'object') {\n            value = safeJSONStringify(value);\n        }\n        return encodeURIComponent(encode(value.toString()));\n    });\n}\nfunction buildQueryString(data) {\n    var params = filterObject(data, function (value) {\n        return value !== undefined;\n    });\n    var query = map(flatten(encodeParamsObject(params)), util.method('join', '=')).join('&');\n    return query;\n}\nfunction decycleObject(object) {\n    var objects = [], paths = [];\n    return (function derez(value, path) {\n        var i, name, nu;\n        switch (typeof value) {\n            case 'object':\n                if (!value) {\n                    return null;\n                }\n                for (i = 0; i < objects.length; i += 1) {\n                    if (objects[i] === value) {\n                        return { $ref: paths[i] };\n                    }\n                }\n                objects.push(value);\n                paths.push(path);\n                if (Object.prototype.toString.apply(value) === '[object Array]') {\n                    nu = [];\n                    for (i = 0; i < value.length; i += 1) {\n                        nu[i] = derez(value[i], path + '[' + i + ']');\n                    }\n                }\n                else {\n                    nu = {};\n                    for (name in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, name)) {\n                            nu[name] = derez(value[name], path + '[' + JSON.stringify(name) + ']');\n                        }\n                    }\n                }\n                return nu;\n            case 'number':\n            case 'string':\n            case 'boolean':\n                return value;\n        }\n    })(object, '$');\n}\nfunction safeJSONStringify(source) {\n    try {\n        return JSON.stringify(source);\n    }\n    catch (e) {\n        return JSON.stringify(decycleObject(source));\n    }\n}\n\n// CONCATENATED MODULE: ./src/core/logger.ts\n\n\nvar logger_Logger = (function () {\n    function Logger() {\n        this.globalLog = function (message) {\n            if (window.console && window.console.log) {\n                window.console.log(message);\n            }\n        };\n    }\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.log(this.globalLog, args);\n    };\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.log(this.globalLogWarn, args);\n    };\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        this.log(this.globalLogError, args);\n    };\n    Logger.prototype.globalLogWarn = function (message) {\n        if (window.console && window.console.warn) {\n            window.console.warn(message);\n        }\n        else {\n            this.globalLog(message);\n        }\n    };\n    Logger.prototype.globalLogError = function (message) {\n        if (window.console && window.console.error) {\n            window.console.error(message);\n        }\n        else {\n            this.globalLogWarn(message);\n        }\n    };\n    Logger.prototype.log = function (defaultLoggingFunction) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var message = stringify.apply(this, arguments);\n        if (core_pusher.log) {\n            core_pusher.log(message);\n        }\n        else if (core_pusher.logToConsole) {\n            var log = defaultLoggingFunction.bind(this);\n            log(message);\n        }\n    };\n    return Logger;\n}());\n/* harmony default export */ var logger = (new logger_Logger());\n\n// CONCATENATED MODULE: ./src/runtimes/web/auth/jsonp_auth.ts\n\nvar jsonp = function (context, query, authOptions, authRequestType, callback) {\n    if (authOptions.headers !== undefined ||\n        authOptions.headersProvider != null) {\n        logger.warn(\"To send headers with the \" + authRequestType.toString() + \" request, you must use AJAX, rather than JSONP.\");\n    }\n    var callbackName = context.nextAuthCallbackID.toString();\n    context.nextAuthCallbackID++;\n    var document = context.getDocument();\n    var script = document.createElement('script');\n    context.auth_callbacks[callbackName] = function (data) {\n        callback(null, data);\n    };\n    var callback_name = \"Pusher.auth_callbacks['\" + callbackName + \"']\";\n    script.src =\n        authOptions.endpoint +\n            '?callback=' +\n            encodeURIComponent(callback_name) +\n            '&' +\n            query;\n    var head = document.getElementsByTagName('head')[0] || document.documentElement;\n    head.insertBefore(script, head.firstChild);\n};\n/* harmony default export */ var jsonp_auth = (jsonp);\n\n// CONCATENATED MODULE: ./src/runtimes/web/dom/script_request.ts\nvar ScriptRequest = (function () {\n    function ScriptRequest(src) {\n        this.src = src;\n    }\n    ScriptRequest.prototype.send = function (receiver) {\n        var self = this;\n        var errorString = 'Error loading ' + self.src;\n        self.script = document.createElement('script');\n        self.script.id = receiver.id;\n        self.script.src = self.src;\n        self.script.type = 'text/javascript';\n        self.script.charset = 'UTF-8';\n        if (self.script.addEventListener) {\n            self.script.onerror = function () {\n                receiver.callback(errorString);\n            };\n            self.script.onload = function () {\n                receiver.callback(null);\n            };\n        }\n        else {\n            self.script.onreadystatechange = function () {\n                if (self.script.readyState === 'loaded' ||\n                    self.script.readyState === 'complete') {\n                    receiver.callback(null);\n                }\n            };\n        }\n        if (self.script.async === undefined &&\n            document.attachEvent &&\n            /opera/i.test(navigator.userAgent)) {\n            self.errorScript = document.createElement('script');\n            self.errorScript.id = receiver.id + '_error';\n            self.errorScript.text = receiver.name + \"('\" + errorString + \"');\";\n            self.script.async = self.errorScript.async = false;\n        }\n        else {\n            self.script.async = true;\n        }\n        var head = document.getElementsByTagName('head')[0];\n        head.insertBefore(self.script, head.firstChild);\n        if (self.errorScript) {\n            head.insertBefore(self.errorScript, self.script.nextSibling);\n        }\n    };\n    ScriptRequest.prototype.cleanup = function () {\n        if (this.script) {\n            this.script.onload = this.script.onerror = null;\n            this.script.onreadystatechange = null;\n        }\n        if (this.script && this.script.parentNode) {\n            this.script.parentNode.removeChild(this.script);\n        }\n        if (this.errorScript && this.errorScript.parentNode) {\n            this.errorScript.parentNode.removeChild(this.errorScript);\n        }\n        this.script = null;\n        this.errorScript = null;\n    };\n    return ScriptRequest;\n}());\n/* harmony default export */ var script_request = (ScriptRequest);\n\n// CONCATENATED MODULE: ./src/runtimes/web/dom/jsonp_request.ts\n\n\nvar jsonp_request_JSONPRequest = (function () {\n    function JSONPRequest(url, data) {\n        this.url = url;\n        this.data = data;\n    }\n    JSONPRequest.prototype.send = function (receiver) {\n        if (this.request) {\n            return;\n        }\n        var query = buildQueryString(this.data);\n        var url = this.url + '/' + receiver.number + '?' + query;\n        this.request = runtime.createScriptRequest(url);\n        this.request.send(receiver);\n    };\n    JSONPRequest.prototype.cleanup = function () {\n        if (this.request) {\n            this.request.cleanup();\n        }\n    };\n    return JSONPRequest;\n}());\n/* harmony default export */ var jsonp_request = (jsonp_request_JSONPRequest);\n\n// CONCATENATED MODULE: ./src/runtimes/web/timeline/jsonp_timeline.ts\n\n\nvar getAgent = function (sender, useTLS) {\n    return function (data, callback) {\n        var scheme = 'http' + (useTLS ? 's' : '') + '://';\n        var url = scheme + (sender.host || sender.options.host) + sender.options.path;\n        var request = runtime.createJSONPRequest(url, data);\n        var receiver = runtime.ScriptReceivers.create(function (error, result) {\n            ScriptReceivers.remove(receiver);\n            request.cleanup();\n            if (result && result.host) {\n                sender.host = result.host;\n            }\n            if (callback) {\n                callback(error, result);\n            }\n        });\n        request.send(receiver);\n    };\n};\nvar jsonp_timeline_jsonp = {\n    name: 'jsonp',\n    getAgent: getAgent\n};\n/* harmony default export */ var jsonp_timeline = (jsonp_timeline_jsonp);\n\n// CONCATENATED MODULE: ./src/core/transports/url_schemes.ts\n\nfunction getGenericURL(baseScheme, params, path) {\n    var scheme = baseScheme + (params.useTLS ? 's' : '');\n    var host = params.useTLS ? params.hostTLS : params.hostNonTLS;\n    return scheme + '://' + host + path;\n}\nfunction getGenericPath(key, queryString) {\n    var path = '/app/' + key;\n    var query = '?protocol=' +\n        defaults.PROTOCOL +\n        '&client=js' +\n        '&version=' +\n        defaults.VERSION +\n        (queryString ? '&' + queryString : '');\n    return path + query;\n}\nvar ws = {\n    getInitial: function (key, params) {\n        var path = (params.httpPath || '') + getGenericPath(key, 'flash=false');\n        return getGenericURL('ws', params, path);\n    }\n};\nvar http = {\n    getInitial: function (key, params) {\n        var path = (params.httpPath || '/pusher') + getGenericPath(key);\n        return getGenericURL('http', params, path);\n    }\n};\nvar sockjs = {\n    getInitial: function (key, params) {\n        return getGenericURL('http', params, params.httpPath || '/pusher');\n    },\n    getPath: function (key, params) {\n        return getGenericPath(key);\n    }\n};\n\n// CONCATENATED MODULE: ./src/core/events/callback_registry.ts\n\nvar callback_registry_CallbackRegistry = (function () {\n    function CallbackRegistry() {\n        this._callbacks = {};\n    }\n    CallbackRegistry.prototype.get = function (name) {\n        return this._callbacks[prefix(name)];\n    };\n    CallbackRegistry.prototype.add = function (name, callback, context) {\n        var prefixedEventName = prefix(name);\n        this._callbacks[prefixedEventName] =\n            this._callbacks[prefixedEventName] || [];\n        this._callbacks[prefixedEventName].push({\n            fn: callback,\n            context: context\n        });\n    };\n    CallbackRegistry.prototype.remove = function (name, callback, context) {\n        if (!name && !callback && !context) {\n            this._callbacks = {};\n            return;\n        }\n        var names = name ? [prefix(name)] : keys(this._callbacks);\n        if (callback || context) {\n            this.removeCallback(names, callback, context);\n        }\n        else {\n            this.removeAllCallbacks(names);\n        }\n    };\n    CallbackRegistry.prototype.removeCallback = function (names, callback, context) {\n        apply(names, function (name) {\n            this._callbacks[name] = filter(this._callbacks[name] || [], function (binding) {\n                return ((callback && callback !== binding.fn) ||\n                    (context && context !== binding.context));\n            });\n            if (this._callbacks[name].length === 0) {\n                delete this._callbacks[name];\n            }\n        }, this);\n    };\n    CallbackRegistry.prototype.removeAllCallbacks = function (names) {\n        apply(names, function (name) {\n            delete this._callbacks[name];\n        }, this);\n    };\n    return CallbackRegistry;\n}());\n/* harmony default export */ var callback_registry = (callback_registry_CallbackRegistry);\nfunction prefix(name) {\n    return '_' + name;\n}\n\n// CONCATENATED MODULE: ./src/core/events/dispatcher.ts\n\n\nvar dispatcher_Dispatcher = (function () {\n    function Dispatcher(failThrough) {\n        this.callbacks = new callback_registry();\n        this.global_callbacks = [];\n        this.failThrough = failThrough;\n    }\n    Dispatcher.prototype.bind = function (eventName, callback, context) {\n        this.callbacks.add(eventName, callback, context);\n        return this;\n    };\n    Dispatcher.prototype.bind_global = function (callback) {\n        this.global_callbacks.push(callback);\n        return this;\n    };\n    Dispatcher.prototype.unbind = function (eventName, callback, context) {\n        this.callbacks.remove(eventName, callback, context);\n        return this;\n    };\n    Dispatcher.prototype.unbind_global = function (callback) {\n        if (!callback) {\n            this.global_callbacks = [];\n            return this;\n        }\n        this.global_callbacks = filter(this.global_callbacks || [], function (c) { return c !== callback; });\n        return this;\n    };\n    Dispatcher.prototype.unbind_all = function () {\n        this.unbind();\n        this.unbind_global();\n        return this;\n    };\n    Dispatcher.prototype.emit = function (eventName, data, metadata) {\n        for (var i = 0; i < this.global_callbacks.length; i++) {\n            this.global_callbacks[i](eventName, data);\n        }\n        var callbacks = this.callbacks.get(eventName);\n        var args = [];\n        if (metadata) {\n            args.push(data, metadata);\n        }\n        else if (data) {\n            args.push(data);\n        }\n        if (callbacks && callbacks.length > 0) {\n            for (var i = 0; i < callbacks.length; i++) {\n                callbacks[i].fn.apply(callbacks[i].context || window, args);\n            }\n        }\n        else if (this.failThrough) {\n            this.failThrough(eventName, data);\n        }\n        return this;\n    };\n    return Dispatcher;\n}());\n/* harmony default export */ var dispatcher = (dispatcher_Dispatcher);\n\n// CONCATENATED MODULE: ./src/core/transports/transport_connection.ts\nvar transport_connection_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar transport_connection_TransportConnection = (function (_super) {\n    transport_connection_extends(TransportConnection, _super);\n    function TransportConnection(hooks, name, priority, key, options) {\n        var _this = _super.call(this) || this;\n        _this.initialize = runtime.transportConnectionInitializer;\n        _this.hooks = hooks;\n        _this.name = name;\n        _this.priority = priority;\n        _this.key = key;\n        _this.options = options;\n        _this.state = 'new';\n        _this.timeline = options.timeline;\n        _this.activityTimeout = options.activityTimeout;\n        _this.id = _this.timeline.generateUniqueID();\n        return _this;\n    }\n    TransportConnection.prototype.handlesActivityChecks = function () {\n        return Boolean(this.hooks.handlesActivityChecks);\n    };\n    TransportConnection.prototype.supportsPing = function () {\n        return Boolean(this.hooks.supportsPing);\n    };\n    TransportConnection.prototype.connect = function () {\n        var _this = this;\n        if (this.socket || this.state !== 'initialized') {\n            return false;\n        }\n        var url = this.hooks.urls.getInitial(this.key, this.options);\n        try {\n            this.socket = this.hooks.getSocket(url, this.options);\n        }\n        catch (e) {\n            util.defer(function () {\n                _this.onError(e);\n                _this.changeState('closed');\n            });\n            return false;\n        }\n        this.bindListeners();\n        logger.debug('Connecting', { transport: this.name, url: url });\n        this.changeState('connecting');\n        return true;\n    };\n    TransportConnection.prototype.close = function () {\n        if (this.socket) {\n            this.socket.close();\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    TransportConnection.prototype.send = function (data) {\n        var _this = this;\n        if (this.state === 'open') {\n            util.defer(function () {\n                if (_this.socket) {\n                    _this.socket.send(data);\n                }\n            });\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    TransportConnection.prototype.ping = function () {\n        if (this.state === 'open' && this.supportsPing()) {\n            this.socket.ping();\n        }\n    };\n    TransportConnection.prototype.onOpen = function () {\n        if (this.hooks.beforeOpen) {\n            this.hooks.beforeOpen(this.socket, this.hooks.urls.getPath(this.key, this.options));\n        }\n        this.changeState('open');\n        this.socket.onopen = undefined;\n    };\n    TransportConnection.prototype.onError = function (error) {\n        this.emit('error', { type: 'WebSocketError', error: error });\n        this.timeline.error(this.buildTimelineMessage({ error: error.toString() }));\n    };\n    TransportConnection.prototype.onClose = function (closeEvent) {\n        if (closeEvent) {\n            this.changeState('closed', {\n                code: closeEvent.code,\n                reason: closeEvent.reason,\n                wasClean: closeEvent.wasClean\n            });\n        }\n        else {\n            this.changeState('closed');\n        }\n        this.unbindListeners();\n        this.socket = undefined;\n    };\n    TransportConnection.prototype.onMessage = function (message) {\n        this.emit('message', message);\n    };\n    TransportConnection.prototype.onActivity = function () {\n        this.emit('activity');\n    };\n    TransportConnection.prototype.bindListeners = function () {\n        var _this = this;\n        this.socket.onopen = function () {\n            _this.onOpen();\n        };\n        this.socket.onerror = function (error) {\n            _this.onError(error);\n        };\n        this.socket.onclose = function (closeEvent) {\n            _this.onClose(closeEvent);\n        };\n        this.socket.onmessage = function (message) {\n            _this.onMessage(message);\n        };\n        if (this.supportsPing()) {\n            this.socket.onactivity = function () {\n                _this.onActivity();\n            };\n        }\n    };\n    TransportConnection.prototype.unbindListeners = function () {\n        if (this.socket) {\n            this.socket.onopen = undefined;\n            this.socket.onerror = undefined;\n            this.socket.onclose = undefined;\n            this.socket.onmessage = undefined;\n            if (this.supportsPing()) {\n                this.socket.onactivity = undefined;\n            }\n        }\n    };\n    TransportConnection.prototype.changeState = function (state, params) {\n        this.state = state;\n        this.timeline.info(this.buildTimelineMessage({\n            state: state,\n            params: params\n        }));\n        this.emit(state, params);\n    };\n    TransportConnection.prototype.buildTimelineMessage = function (message) {\n        return extend({ cid: this.id }, message);\n    };\n    return TransportConnection;\n}(dispatcher));\n/* harmony default export */ var transport_connection = (transport_connection_TransportConnection);\n\n// CONCATENATED MODULE: ./src/core/transports/transport.ts\n\nvar transport_Transport = (function () {\n    function Transport(hooks) {\n        this.hooks = hooks;\n    }\n    Transport.prototype.isSupported = function (environment) {\n        return this.hooks.isSupported(environment);\n    };\n    Transport.prototype.createConnection = function (name, priority, key, options) {\n        return new transport_connection(this.hooks, name, priority, key, options);\n    };\n    return Transport;\n}());\n/* harmony default export */ var transports_transport = (transport_Transport);\n\n// CONCATENATED MODULE: ./src/runtimes/isomorphic/transports/transports.ts\n\n\n\n\nvar WSTransport = new transports_transport({\n    urls: ws,\n    handlesActivityChecks: false,\n    supportsPing: false,\n    isInitialized: function () {\n        return Boolean(runtime.getWebSocketAPI());\n    },\n    isSupported: function () {\n        return Boolean(runtime.getWebSocketAPI());\n    },\n    getSocket: function (url) {\n        return runtime.createWebSocket(url);\n    }\n});\nvar httpConfiguration = {\n    urls: http,\n    handlesActivityChecks: false,\n    supportsPing: true,\n    isInitialized: function () {\n        return true;\n    }\n};\nvar streamingConfiguration = extend({\n    getSocket: function (url) {\n        return runtime.HTTPFactory.createStreamingSocket(url);\n    }\n}, httpConfiguration);\nvar pollingConfiguration = extend({\n    getSocket: function (url) {\n        return runtime.HTTPFactory.createPollingSocket(url);\n    }\n}, httpConfiguration);\nvar xhrConfiguration = {\n    isSupported: function () {\n        return runtime.isXHRSupported();\n    }\n};\nvar XHRStreamingTransport = new transports_transport((extend({}, streamingConfiguration, xhrConfiguration)));\nvar XHRPollingTransport = new transports_transport(extend({}, pollingConfiguration, xhrConfiguration));\nvar Transports = {\n    ws: WSTransport,\n    xhr_streaming: XHRStreamingTransport,\n    xhr_polling: XHRPollingTransport\n};\n/* harmony default export */ var transports = (Transports);\n\n// CONCATENATED MODULE: ./src/runtimes/web/transports/transports.ts\n\n\n\n\n\n\nvar SockJSTransport = new transports_transport({\n    file: 'sockjs',\n    urls: sockjs,\n    handlesActivityChecks: true,\n    supportsPing: false,\n    isSupported: function () {\n        return true;\n    },\n    isInitialized: function () {\n        return window.SockJS !== undefined;\n    },\n    getSocket: function (url, options) {\n        return new window.SockJS(url, null, {\n            js_path: Dependencies.getPath('sockjs', {\n                useTLS: options.useTLS\n            }),\n            ignore_null_origin: options.ignoreNullOrigin\n        });\n    },\n    beforeOpen: function (socket, path) {\n        socket.send(JSON.stringify({\n            path: path\n        }));\n    }\n});\nvar xdrConfiguration = {\n    isSupported: function (environment) {\n        var yes = runtime.isXDRSupported(environment.useTLS);\n        return yes;\n    }\n};\nvar XDRStreamingTransport = new transports_transport((extend({}, streamingConfiguration, xdrConfiguration)));\nvar XDRPollingTransport = new transports_transport(extend({}, pollingConfiguration, xdrConfiguration));\ntransports.xdr_streaming = XDRStreamingTransport;\ntransports.xdr_polling = XDRPollingTransport;\ntransports.sockjs = SockJSTransport;\n/* harmony default export */ var transports_transports = (transports);\n\n// CONCATENATED MODULE: ./src/runtimes/web/net_info.ts\nvar net_info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar NetInfo = (function (_super) {\n    net_info_extends(NetInfo, _super);\n    function NetInfo() {\n        var _this = _super.call(this) || this;\n        var self = _this;\n        if (window.addEventListener !== undefined) {\n            window.addEventListener('online', function () {\n                self.emit('online');\n            }, false);\n            window.addEventListener('offline', function () {\n                self.emit('offline');\n            }, false);\n        }\n        return _this;\n    }\n    NetInfo.prototype.isOnline = function () {\n        if (window.navigator.onLine === undefined) {\n            return true;\n        }\n        else {\n            return window.navigator.onLine;\n        }\n    };\n    return NetInfo;\n}(dispatcher));\n\nvar net_info_Network = new NetInfo();\n\n// CONCATENATED MODULE: ./src/core/transports/assistant_to_the_transport_manager.ts\n\n\nvar assistant_to_the_transport_manager_AssistantToTheTransportManager = (function () {\n    function AssistantToTheTransportManager(manager, transport, options) {\n        this.manager = manager;\n        this.transport = transport;\n        this.minPingDelay = options.minPingDelay;\n        this.maxPingDelay = options.maxPingDelay;\n        this.pingDelay = undefined;\n    }\n    AssistantToTheTransportManager.prototype.createConnection = function (name, priority, key, options) {\n        var _this = this;\n        options = extend({}, options, {\n            activityTimeout: this.pingDelay\n        });\n        var connection = this.transport.createConnection(name, priority, key, options);\n        var openTimestamp = null;\n        var onOpen = function () {\n            connection.unbind('open', onOpen);\n            connection.bind('closed', onClosed);\n            openTimestamp = util.now();\n        };\n        var onClosed = function (closeEvent) {\n            connection.unbind('closed', onClosed);\n            if (closeEvent.code === 1002 || closeEvent.code === 1003) {\n                _this.manager.reportDeath();\n            }\n            else if (!closeEvent.wasClean && openTimestamp) {\n                var lifespan = util.now() - openTimestamp;\n                if (lifespan < 2 * _this.maxPingDelay) {\n                    _this.manager.reportDeath();\n                    _this.pingDelay = Math.max(lifespan / 2, _this.minPingDelay);\n                }\n            }\n        };\n        connection.bind('open', onOpen);\n        return connection;\n    };\n    AssistantToTheTransportManager.prototype.isSupported = function (environment) {\n        return this.manager.isAlive() && this.transport.isSupported(environment);\n    };\n    return AssistantToTheTransportManager;\n}());\n/* harmony default export */ var assistant_to_the_transport_manager = (assistant_to_the_transport_manager_AssistantToTheTransportManager);\n\n// CONCATENATED MODULE: ./src/core/connection/protocol/protocol.ts\nvar Protocol = {\n    decodeMessage: function (messageEvent) {\n        try {\n            var messageData = JSON.parse(messageEvent.data);\n            var pusherEventData = messageData.data;\n            if (typeof pusherEventData === 'string') {\n                try {\n                    pusherEventData = JSON.parse(messageData.data);\n                }\n                catch (e) { }\n            }\n            var pusherEvent = {\n                event: messageData.event,\n                channel: messageData.channel,\n                data: pusherEventData\n            };\n            if (messageData.user_id) {\n                pusherEvent.user_id = messageData.user_id;\n            }\n            return pusherEvent;\n        }\n        catch (e) {\n            throw { type: 'MessageParseError', error: e, data: messageEvent.data };\n        }\n    },\n    encodeMessage: function (event) {\n        return JSON.stringify(event);\n    },\n    processHandshake: function (messageEvent) {\n        var message = Protocol.decodeMessage(messageEvent);\n        if (message.event === 'pusher:connection_established') {\n            if (!message.data.activity_timeout) {\n                throw 'No activity timeout specified in handshake';\n            }\n            return {\n                action: 'connected',\n                id: message.data.socket_id,\n                activityTimeout: message.data.activity_timeout * 1000\n            };\n        }\n        else if (message.event === 'pusher:error') {\n            return {\n                action: this.getCloseAction(message.data),\n                error: this.getCloseError(message.data)\n            };\n        }\n        else {\n            throw 'Invalid handshake';\n        }\n    },\n    getCloseAction: function (closeEvent) {\n        if (closeEvent.code < 4000) {\n            if (closeEvent.code >= 1002 && closeEvent.code <= 1004) {\n                return 'backoff';\n            }\n            else {\n                return null;\n            }\n        }\n        else if (closeEvent.code === 4000) {\n            return 'tls_only';\n        }\n        else if (closeEvent.code < 4100) {\n            return 'refused';\n        }\n        else if (closeEvent.code < 4200) {\n            return 'backoff';\n        }\n        else if (closeEvent.code < 4300) {\n            return 'retry';\n        }\n        else {\n            return 'refused';\n        }\n    },\n    getCloseError: function (closeEvent) {\n        if (closeEvent.code !== 1000 && closeEvent.code !== 1001) {\n            return {\n                type: 'PusherError',\n                data: {\n                    code: closeEvent.code,\n                    message: closeEvent.reason || closeEvent.message\n                }\n            };\n        }\n        else {\n            return null;\n        }\n    }\n};\n/* harmony default export */ var protocol_protocol = (Protocol);\n\n// CONCATENATED MODULE: ./src/core/connection/connection.ts\nvar connection_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar connection_Connection = (function (_super) {\n    connection_extends(Connection, _super);\n    function Connection(id, transport) {\n        var _this = _super.call(this) || this;\n        _this.id = id;\n        _this.transport = transport;\n        _this.activityTimeout = transport.activityTimeout;\n        _this.bindListeners();\n        return _this;\n    }\n    Connection.prototype.handlesActivityChecks = function () {\n        return this.transport.handlesActivityChecks();\n    };\n    Connection.prototype.send = function (data) {\n        return this.transport.send(data);\n    };\n    Connection.prototype.send_event = function (name, data, channel) {\n        var event = { event: name, data: data };\n        if (channel) {\n            event.channel = channel;\n        }\n        logger.debug('Event sent', event);\n        return this.send(protocol_protocol.encodeMessage(event));\n    };\n    Connection.prototype.ping = function () {\n        if (this.transport.supportsPing()) {\n            this.transport.ping();\n        }\n        else {\n            this.send_event('pusher:ping', {});\n        }\n    };\n    Connection.prototype.close = function () {\n        this.transport.close();\n    };\n    Connection.prototype.bindListeners = function () {\n        var _this = this;\n        var listeners = {\n            message: function (messageEvent) {\n                var pusherEvent;\n                try {\n                    pusherEvent = protocol_protocol.decodeMessage(messageEvent);\n                }\n                catch (e) {\n                    _this.emit('error', {\n                        type: 'MessageParseError',\n                        error: e,\n                        data: messageEvent.data\n                    });\n                }\n                if (pusherEvent !== undefined) {\n                    logger.debug('Event recd', pusherEvent);\n                    switch (pusherEvent.event) {\n                        case 'pusher:error':\n                            _this.emit('error', {\n                                type: 'PusherError',\n                                data: pusherEvent.data\n                            });\n                            break;\n                        case 'pusher:ping':\n                            _this.emit('ping');\n                            break;\n                        case 'pusher:pong':\n                            _this.emit('pong');\n                            break;\n                    }\n                    _this.emit('message', pusherEvent);\n                }\n            },\n            activity: function () {\n                _this.emit('activity');\n            },\n            error: function (error) {\n                _this.emit('error', error);\n            },\n            closed: function (closeEvent) {\n                unbindListeners();\n                if (closeEvent && closeEvent.code) {\n                    _this.handleCloseEvent(closeEvent);\n                }\n                _this.transport = null;\n                _this.emit('closed');\n            }\n        };\n        var unbindListeners = function () {\n            objectApply(listeners, function (listener, event) {\n                _this.transport.unbind(event, listener);\n            });\n        };\n        objectApply(listeners, function (listener, event) {\n            _this.transport.bind(event, listener);\n        });\n    };\n    Connection.prototype.handleCloseEvent = function (closeEvent) {\n        var action = protocol_protocol.getCloseAction(closeEvent);\n        var error = protocol_protocol.getCloseError(closeEvent);\n        if (error) {\n            this.emit('error', error);\n        }\n        if (action) {\n            this.emit(action, { action: action, error: error });\n        }\n    };\n    return Connection;\n}(dispatcher));\n/* harmony default export */ var connection_connection = (connection_Connection);\n\n// CONCATENATED MODULE: ./src/core/connection/handshake/index.ts\n\n\n\nvar handshake_Handshake = (function () {\n    function Handshake(transport, callback) {\n        this.transport = transport;\n        this.callback = callback;\n        this.bindListeners();\n    }\n    Handshake.prototype.close = function () {\n        this.unbindListeners();\n        this.transport.close();\n    };\n    Handshake.prototype.bindListeners = function () {\n        var _this = this;\n        this.onMessage = function (m) {\n            _this.unbindListeners();\n            var result;\n            try {\n                result = protocol_protocol.processHandshake(m);\n            }\n            catch (e) {\n                _this.finish('error', { error: e });\n                _this.transport.close();\n                return;\n            }\n            if (result.action === 'connected') {\n                _this.finish('connected', {\n                    connection: new connection_connection(result.id, _this.transport),\n                    activityTimeout: result.activityTimeout\n                });\n            }\n            else {\n                _this.finish(result.action, { error: result.error });\n                _this.transport.close();\n            }\n        };\n        this.onClosed = function (closeEvent) {\n            _this.unbindListeners();\n            var action = protocol_protocol.getCloseAction(closeEvent) || 'backoff';\n            var error = protocol_protocol.getCloseError(closeEvent);\n            _this.finish(action, { error: error });\n        };\n        this.transport.bind('message', this.onMessage);\n        this.transport.bind('closed', this.onClosed);\n    };\n    Handshake.prototype.unbindListeners = function () {\n        this.transport.unbind('message', this.onMessage);\n        this.transport.unbind('closed', this.onClosed);\n    };\n    Handshake.prototype.finish = function (action, params) {\n        this.callback(extend({ transport: this.transport, action: action }, params));\n    };\n    return Handshake;\n}());\n/* harmony default export */ var connection_handshake = (handshake_Handshake);\n\n// CONCATENATED MODULE: ./src/core/timeline/timeline_sender.ts\n\nvar timeline_sender_TimelineSender = (function () {\n    function TimelineSender(timeline, options) {\n        this.timeline = timeline;\n        this.options = options || {};\n    }\n    TimelineSender.prototype.send = function (useTLS, callback) {\n        if (this.timeline.isEmpty()) {\n            return;\n        }\n        this.timeline.send(runtime.TimelineTransport.getAgent(this, useTLS), callback);\n    };\n    return TimelineSender;\n}());\n/* harmony default export */ var timeline_sender = (timeline_sender_TimelineSender);\n\n// CONCATENATED MODULE: ./src/core/channels/channel.ts\nvar channel_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar channel_Channel = (function (_super) {\n    channel_extends(Channel, _super);\n    function Channel(name, pusher) {\n        var _this = _super.call(this, function (event, data) {\n            logger.debug('No callbacks on ' + name + ' for ' + event);\n        }) || this;\n        _this.name = name;\n        _this.pusher = pusher;\n        _this.subscribed = false;\n        _this.subscriptionPending = false;\n        _this.subscriptionCancelled = false;\n        return _this;\n    }\n    Channel.prototype.authorize = function (socketId, callback) {\n        return callback(null, { auth: '' });\n    };\n    Channel.prototype.trigger = function (event, data) {\n        if (event.indexOf('client-') !== 0) {\n            throw new BadEventName(\"Event '\" + event + \"' does not start with 'client-'\");\n        }\n        if (!this.subscribed) {\n            var suffix = url_store.buildLogSuffix('triggeringClientEvents');\n            logger.warn(\"Client event triggered before channel 'subscription_succeeded' event . \" + suffix);\n        }\n        return this.pusher.send_event(event, data, this.name);\n    };\n    Channel.prototype.disconnect = function () {\n        this.subscribed = false;\n        this.subscriptionPending = false;\n    };\n    Channel.prototype.handleEvent = function (event) {\n        var eventName = event.event;\n        var data = event.data;\n        if (eventName === 'pusher_internal:subscription_succeeded') {\n            this.handleSubscriptionSucceededEvent(event);\n        }\n        else if (eventName === 'pusher_internal:subscription_count') {\n            this.handleSubscriptionCountEvent(event);\n        }\n        else if (eventName.indexOf('pusher_internal:') !== 0) {\n            var metadata = {};\n            this.emit(eventName, data, metadata);\n        }\n    };\n    Channel.prototype.handleSubscriptionSucceededEvent = function (event) {\n        this.subscriptionPending = false;\n        this.subscribed = true;\n        if (this.subscriptionCancelled) {\n            this.pusher.unsubscribe(this.name);\n        }\n        else {\n            this.emit('pusher:subscription_succeeded', event.data);\n        }\n    };\n    Channel.prototype.handleSubscriptionCountEvent = function (event) {\n        if (event.data.subscription_count) {\n            this.subscriptionCount = event.data.subscription_count;\n        }\n        this.emit('pusher:subscription_count', event.data);\n    };\n    Channel.prototype.subscribe = function () {\n        var _this = this;\n        if (this.subscribed) {\n            return;\n        }\n        this.subscriptionPending = true;\n        this.subscriptionCancelled = false;\n        this.authorize(this.pusher.connection.socket_id, function (error, data) {\n            if (error) {\n                _this.subscriptionPending = false;\n                logger.error(error.toString());\n                _this.emit('pusher:subscription_error', Object.assign({}, {\n                    type: 'AuthError',\n                    error: error.message\n                }, error instanceof HTTPAuthError ? { status: error.status } : {}));\n            }\n            else {\n                _this.pusher.send_event('pusher:subscribe', {\n                    auth: data.auth,\n                    channel_data: data.channel_data,\n                    channel: _this.name\n                });\n            }\n        });\n    };\n    Channel.prototype.unsubscribe = function () {\n        this.subscribed = false;\n        this.pusher.send_event('pusher:unsubscribe', {\n            channel: this.name\n        });\n    };\n    Channel.prototype.cancelSubscription = function () {\n        this.subscriptionCancelled = true;\n    };\n    Channel.prototype.reinstateSubscription = function () {\n        this.subscriptionCancelled = false;\n    };\n    return Channel;\n}(dispatcher));\n/* harmony default export */ var channels_channel = (channel_Channel);\n\n// CONCATENATED MODULE: ./src/core/channels/private_channel.ts\nvar private_channel_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar PrivateChannel = (function (_super) {\n    private_channel_extends(PrivateChannel, _super);\n    function PrivateChannel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PrivateChannel.prototype.authorize = function (socketId, callback) {\n        return this.pusher.config.channelAuthorizer({\n            channelName: this.name,\n            socketId: socketId\n        }, callback);\n    };\n    return PrivateChannel;\n}(channels_channel));\n/* harmony default export */ var private_channel = (PrivateChannel);\n\n// CONCATENATED MODULE: ./src/core/channels/members.ts\n\nvar members_Members = (function () {\n    function Members() {\n        this.reset();\n    }\n    Members.prototype.get = function (id) {\n        if (Object.prototype.hasOwnProperty.call(this.members, id)) {\n            return {\n                id: id,\n                info: this.members[id]\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    Members.prototype.each = function (callback) {\n        var _this = this;\n        objectApply(this.members, function (member, id) {\n            callback(_this.get(id));\n        });\n    };\n    Members.prototype.setMyID = function (id) {\n        this.myID = id;\n    };\n    Members.prototype.onSubscription = function (subscriptionData) {\n        this.members = subscriptionData.presence.hash;\n        this.count = subscriptionData.presence.count;\n        this.me = this.get(this.myID);\n    };\n    Members.prototype.addMember = function (memberData) {\n        if (this.get(memberData.user_id) === null) {\n            this.count++;\n        }\n        this.members[memberData.user_id] = memberData.user_info;\n        return this.get(memberData.user_id);\n    };\n    Members.prototype.removeMember = function (memberData) {\n        var member = this.get(memberData.user_id);\n        if (member) {\n            delete this.members[memberData.user_id];\n            this.count--;\n        }\n        return member;\n    };\n    Members.prototype.reset = function () {\n        this.members = {};\n        this.count = 0;\n        this.myID = null;\n        this.me = null;\n    };\n    return Members;\n}());\n/* harmony default export */ var members = (members_Members);\n\n// CONCATENATED MODULE: ./src/core/channels/presence_channel.ts\nvar presence_channel_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar presence_channel_PresenceChannel = (function (_super) {\n    presence_channel_extends(PresenceChannel, _super);\n    function PresenceChannel(name, pusher) {\n        var _this = _super.call(this, name, pusher) || this;\n        _this.members = new members();\n        return _this;\n    }\n    PresenceChannel.prototype.authorize = function (socketId, callback) {\n        var _this = this;\n        _super.prototype.authorize.call(this, socketId, function (error, authData) { return __awaiter(_this, void 0, void 0, function () {\n            var channelData, suffix;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!error) return [3, 3];\n                        authData = authData;\n                        if (!(authData.channel_data != null)) return [3, 1];\n                        channelData = JSON.parse(authData.channel_data);\n                        this.members.setMyID(channelData.user_id);\n                        return [3, 3];\n                    case 1: return [4, this.pusher.user.signinDonePromise];\n                    case 2:\n                        _a.sent();\n                        if (this.pusher.user.user_data != null) {\n                            this.members.setMyID(this.pusher.user.user_data.id);\n                        }\n                        else {\n                            suffix = url_store.buildLogSuffix('authorizationEndpoint');\n                            logger.error(\"Invalid auth response for channel '\" + this.name + \"', \" +\n                                (\"expected 'channel_data' field. \" + suffix + \", \") +\n                                \"or the user should be signed in.\");\n                            callback('Invalid auth response');\n                            return [2];\n                        }\n                        _a.label = 3;\n                    case 3:\n                        callback(error, authData);\n                        return [2];\n                }\n            });\n        }); });\n    };\n    PresenceChannel.prototype.handleEvent = function (event) {\n        var eventName = event.event;\n        if (eventName.indexOf('pusher_internal:') === 0) {\n            this.handleInternalEvent(event);\n        }\n        else {\n            var data = event.data;\n            var metadata = {};\n            if (event.user_id) {\n                metadata.user_id = event.user_id;\n            }\n            this.emit(eventName, data, metadata);\n        }\n    };\n    PresenceChannel.prototype.handleInternalEvent = function (event) {\n        var eventName = event.event;\n        var data = event.data;\n        switch (eventName) {\n            case 'pusher_internal:subscription_succeeded':\n                this.handleSubscriptionSucceededEvent(event);\n                break;\n            case 'pusher_internal:subscription_count':\n                this.handleSubscriptionCountEvent(event);\n                break;\n            case 'pusher_internal:member_added':\n                var addedMember = this.members.addMember(data);\n                this.emit('pusher:member_added', addedMember);\n                break;\n            case 'pusher_internal:member_removed':\n                var removedMember = this.members.removeMember(data);\n                if (removedMember) {\n                    this.emit('pusher:member_removed', removedMember);\n                }\n                break;\n        }\n    };\n    PresenceChannel.prototype.handleSubscriptionSucceededEvent = function (event) {\n        this.subscriptionPending = false;\n        this.subscribed = true;\n        if (this.subscriptionCancelled) {\n            this.pusher.unsubscribe(this.name);\n        }\n        else {\n            this.members.onSubscription(event.data);\n            this.emit('pusher:subscription_succeeded', this.members);\n        }\n    };\n    PresenceChannel.prototype.disconnect = function () {\n        this.members.reset();\n        _super.prototype.disconnect.call(this);\n    };\n    return PresenceChannel;\n}(private_channel));\n/* harmony default export */ var presence_channel = (presence_channel_PresenceChannel);\n\n// EXTERNAL MODULE: ./node_modules/@stablelib/utf8/lib/utf8.js\nvar utf8 = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/@stablelib/base64/lib/base64.js\nvar base64 = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/core/channels/encrypted_channel.ts\nvar encrypted_channel_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar encrypted_channel_EncryptedChannel = (function (_super) {\n    encrypted_channel_extends(EncryptedChannel, _super);\n    function EncryptedChannel(name, pusher, nacl) {\n        var _this = _super.call(this, name, pusher) || this;\n        _this.key = null;\n        _this.nacl = nacl;\n        return _this;\n    }\n    EncryptedChannel.prototype.authorize = function (socketId, callback) {\n        var _this = this;\n        _super.prototype.authorize.call(this, socketId, function (error, authData) {\n            if (error) {\n                callback(error, authData);\n                return;\n            }\n            var sharedSecret = authData['shared_secret'];\n            if (!sharedSecret) {\n                callback(new Error(\"No shared_secret key in auth payload for encrypted channel: \" + _this.name), null);\n                return;\n            }\n            _this.key = Object(base64[\"decode\"])(sharedSecret);\n            delete authData['shared_secret'];\n            callback(null, authData);\n        });\n    };\n    EncryptedChannel.prototype.trigger = function (event, data) {\n        throw new UnsupportedFeature('Client events are not currently supported for encrypted channels');\n    };\n    EncryptedChannel.prototype.handleEvent = function (event) {\n        var eventName = event.event;\n        var data = event.data;\n        if (eventName.indexOf('pusher_internal:') === 0 ||\n            eventName.indexOf('pusher:') === 0) {\n            _super.prototype.handleEvent.call(this, event);\n            return;\n        }\n        this.handleEncryptedEvent(eventName, data);\n    };\n    EncryptedChannel.prototype.handleEncryptedEvent = function (event, data) {\n        var _this = this;\n        if (!this.key) {\n            logger.debug('Received encrypted event before key has been retrieved from the authEndpoint');\n            return;\n        }\n        if (!data.ciphertext || !data.nonce) {\n            logger.error('Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: ' +\n                data);\n            return;\n        }\n        var cipherText = Object(base64[\"decode\"])(data.ciphertext);\n        if (cipherText.length < this.nacl.secretbox.overheadLength) {\n            logger.error(\"Expected encrypted event ciphertext length to be \" + this.nacl.secretbox.overheadLength + \", got: \" + cipherText.length);\n            return;\n        }\n        var nonce = Object(base64[\"decode\"])(data.nonce);\n        if (nonce.length < this.nacl.secretbox.nonceLength) {\n            logger.error(\"Expected encrypted event nonce length to be \" + this.nacl.secretbox.nonceLength + \", got: \" + nonce.length);\n            return;\n        }\n        var bytes = this.nacl.secretbox.open(cipherText, nonce, this.key);\n        if (bytes === null) {\n            logger.debug('Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint...');\n            this.authorize(this.pusher.connection.socket_id, function (error, authData) {\n                if (error) {\n                    logger.error(\"Failed to make a request to the authEndpoint: \" + authData + \". Unable to fetch new key, so dropping encrypted event\");\n                    return;\n                }\n                bytes = _this.nacl.secretbox.open(cipherText, nonce, _this.key);\n                if (bytes === null) {\n                    logger.error(\"Failed to decrypt event with new key. Dropping encrypted event\");\n                    return;\n                }\n                _this.emit(event, _this.getDataToEmit(bytes));\n                return;\n            });\n            return;\n        }\n        this.emit(event, this.getDataToEmit(bytes));\n    };\n    EncryptedChannel.prototype.getDataToEmit = function (bytes) {\n        var raw = Object(utf8[\"decode\"])(bytes);\n        try {\n            return JSON.parse(raw);\n        }\n        catch (_a) {\n            return raw;\n        }\n    };\n    return EncryptedChannel;\n}(private_channel));\n/* harmony default export */ var encrypted_channel = (encrypted_channel_EncryptedChannel);\n\n// CONCATENATED MODULE: ./src/core/connection/connection_manager.ts\nvar connection_manager_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar connection_manager_ConnectionManager = (function (_super) {\n    connection_manager_extends(ConnectionManager, _super);\n    function ConnectionManager(key, options) {\n        var _this = _super.call(this) || this;\n        _this.state = 'initialized';\n        _this.connection = null;\n        _this.key = key;\n        _this.options = options;\n        _this.timeline = _this.options.timeline;\n        _this.usingTLS = _this.options.useTLS;\n        _this.errorCallbacks = _this.buildErrorCallbacks();\n        _this.connectionCallbacks = _this.buildConnectionCallbacks(_this.errorCallbacks);\n        _this.handshakeCallbacks = _this.buildHandshakeCallbacks(_this.errorCallbacks);\n        var Network = runtime.getNetwork();\n        Network.bind('online', function () {\n            _this.timeline.info({ netinfo: 'online' });\n            if (_this.state === 'connecting' || _this.state === 'unavailable') {\n                _this.retryIn(0);\n            }\n        });\n        Network.bind('offline', function () {\n            _this.timeline.info({ netinfo: 'offline' });\n            if (_this.connection) {\n                _this.sendActivityCheck();\n            }\n        });\n        _this.updateStrategy();\n        return _this;\n    }\n    ConnectionManager.prototype.connect = function () {\n        if (this.connection || this.runner) {\n            return;\n        }\n        if (!this.strategy.isSupported()) {\n            this.updateState('failed');\n            return;\n        }\n        this.updateState('connecting');\n        this.startConnecting();\n        this.setUnavailableTimer();\n    };\n    ConnectionManager.prototype.send = function (data) {\n        if (this.connection) {\n            return this.connection.send(data);\n        }\n        else {\n            return false;\n        }\n    };\n    ConnectionManager.prototype.send_event = function (name, data, channel) {\n        if (this.connection) {\n            return this.connection.send_event(name, data, channel);\n        }\n        else {\n            return false;\n        }\n    };\n    ConnectionManager.prototype.disconnect = function () {\n        this.disconnectInternally();\n        this.updateState('disconnected');\n    };\n    ConnectionManager.prototype.isUsingTLS = function () {\n        return this.usingTLS;\n    };\n    ConnectionManager.prototype.startConnecting = function () {\n        var _this = this;\n        var callback = function (error, handshake) {\n            if (error) {\n                _this.runner = _this.strategy.connect(0, callback);\n            }\n            else {\n                if (handshake.action === 'error') {\n                    _this.emit('error', {\n                        type: 'HandshakeError',\n                        error: handshake.error\n                    });\n                    _this.timeline.error({ handshakeError: handshake.error });\n                }\n                else {\n                    _this.abortConnecting();\n                    _this.handshakeCallbacks[handshake.action](handshake);\n                }\n            }\n        };\n        this.runner = this.strategy.connect(0, callback);\n    };\n    ConnectionManager.prototype.abortConnecting = function () {\n        if (this.runner) {\n            this.runner.abort();\n            this.runner = null;\n        }\n    };\n    ConnectionManager.prototype.disconnectInternally = function () {\n        this.abortConnecting();\n        this.clearRetryTimer();\n        this.clearUnavailableTimer();\n        if (this.connection) {\n            var connection = this.abandonConnection();\n            connection.close();\n        }\n    };\n    ConnectionManager.prototype.updateStrategy = function () {\n        this.strategy = this.options.getStrategy({\n            key: this.key,\n            timeline: this.timeline,\n            useTLS: this.usingTLS\n        });\n    };\n    ConnectionManager.prototype.retryIn = function (delay) {\n        var _this = this;\n        this.timeline.info({ action: 'retry', delay: delay });\n        if (delay > 0) {\n            this.emit('connecting_in', Math.round(delay / 1000));\n        }\n        this.retryTimer = new OneOffTimer(delay || 0, function () {\n            _this.disconnectInternally();\n            _this.connect();\n        });\n    };\n    ConnectionManager.prototype.clearRetryTimer = function () {\n        if (this.retryTimer) {\n            this.retryTimer.ensureAborted();\n            this.retryTimer = null;\n        }\n    };\n    ConnectionManager.prototype.setUnavailableTimer = function () {\n        var _this = this;\n        this.unavailableTimer = new OneOffTimer(this.options.unavailableTimeout, function () {\n            _this.updateState('unavailable');\n        });\n    };\n    ConnectionManager.prototype.clearUnavailableTimer = function () {\n        if (this.unavailableTimer) {\n            this.unavailableTimer.ensureAborted();\n        }\n    };\n    ConnectionManager.prototype.sendActivityCheck = function () {\n        var _this = this;\n        this.stopActivityCheck();\n        this.connection.ping();\n        this.activityTimer = new OneOffTimer(this.options.pongTimeout, function () {\n            _this.timeline.error({ pong_timed_out: _this.options.pongTimeout });\n            _this.retryIn(0);\n        });\n    };\n    ConnectionManager.prototype.resetActivityCheck = function () {\n        var _this = this;\n        this.stopActivityCheck();\n        if (this.connection && !this.connection.handlesActivityChecks()) {\n            this.activityTimer = new OneOffTimer(this.activityTimeout, function () {\n                _this.sendActivityCheck();\n            });\n        }\n    };\n    ConnectionManager.prototype.stopActivityCheck = function () {\n        if (this.activityTimer) {\n            this.activityTimer.ensureAborted();\n        }\n    };\n    ConnectionManager.prototype.buildConnectionCallbacks = function (errorCallbacks) {\n        var _this = this;\n        return extend({}, errorCallbacks, {\n            message: function (message) {\n                _this.resetActivityCheck();\n                _this.emit('message', message);\n            },\n            ping: function () {\n                _this.send_event('pusher:pong', {});\n            },\n            activity: function () {\n                _this.resetActivityCheck();\n            },\n            error: function (error) {\n                _this.emit('error', error);\n            },\n            closed: function () {\n                _this.abandonConnection();\n                if (_this.shouldRetry()) {\n                    _this.retryIn(1000);\n                }\n            }\n        });\n    };\n    ConnectionManager.prototype.buildHandshakeCallbacks = function (errorCallbacks) {\n        var _this = this;\n        return extend({}, errorCallbacks, {\n            connected: function (handshake) {\n                _this.activityTimeout = Math.min(_this.options.activityTimeout, handshake.activityTimeout, handshake.connection.activityTimeout || Infinity);\n                _this.clearUnavailableTimer();\n                _this.setConnection(handshake.connection);\n                _this.socket_id = _this.connection.id;\n                _this.updateState('connected', { socket_id: _this.socket_id });\n            }\n        });\n    };\n    ConnectionManager.prototype.buildErrorCallbacks = function () {\n        var _this = this;\n        var withErrorEmitted = function (callback) {\n            return function (result) {\n                if (result.error) {\n                    _this.emit('error', { type: 'WebSocketError', error: result.error });\n                }\n                callback(result);\n            };\n        };\n        return {\n            tls_only: withErrorEmitted(function () {\n                _this.usingTLS = true;\n                _this.updateStrategy();\n                _this.retryIn(0);\n            }),\n            refused: withErrorEmitted(function () {\n                _this.disconnect();\n            }),\n            backoff: withErrorEmitted(function () {\n                _this.retryIn(1000);\n            }),\n            retry: withErrorEmitted(function () {\n                _this.retryIn(0);\n            })\n        };\n    };\n    ConnectionManager.prototype.setConnection = function (connection) {\n        this.connection = connection;\n        for (var event in this.connectionCallbacks) {\n            this.connection.bind(event, this.connectionCallbacks[event]);\n        }\n        this.resetActivityCheck();\n    };\n    ConnectionManager.prototype.abandonConnection = function () {\n        if (!this.connection) {\n            return;\n        }\n        this.stopActivityCheck();\n        for (var event in this.connectionCallbacks) {\n            this.connection.unbind(event, this.connectionCallbacks[event]);\n        }\n        var connection = this.connection;\n        this.connection = null;\n        return connection;\n    };\n    ConnectionManager.prototype.updateState = function (newState, data) {\n        var previousState = this.state;\n        this.state = newState;\n        if (previousState !== newState) {\n            var newStateDescription = newState;\n            if (newStateDescription === 'connected') {\n                newStateDescription += ' with new socket ID ' + data.socket_id;\n            }\n            logger.debug('State changed', previousState + ' -> ' + newStateDescription);\n            this.timeline.info({ state: newState, params: data });\n            this.emit('state_change', { previous: previousState, current: newState });\n            this.emit(newState, data);\n        }\n    };\n    ConnectionManager.prototype.shouldRetry = function () {\n        return this.state === 'connecting' || this.state === 'connected';\n    };\n    return ConnectionManager;\n}(dispatcher));\n/* harmony default export */ var connection_manager = (connection_manager_ConnectionManager);\n\n// CONCATENATED MODULE: ./src/core/channels/channels.ts\n\n\n\n\nvar channels_Channels = (function () {\n    function Channels() {\n        this.channels = {};\n    }\n    Channels.prototype.add = function (name, pusher) {\n        if (!this.channels[name]) {\n            this.channels[name] = createChannel(name, pusher);\n        }\n        return this.channels[name];\n    };\n    Channels.prototype.all = function () {\n        return values(this.channels);\n    };\n    Channels.prototype.find = function (name) {\n        return this.channels[name];\n    };\n    Channels.prototype.remove = function (name) {\n        var channel = this.channels[name];\n        delete this.channels[name];\n        return channel;\n    };\n    Channels.prototype.disconnect = function () {\n        objectApply(this.channels, function (channel) {\n            channel.disconnect();\n        });\n    };\n    return Channels;\n}());\n/* harmony default export */ var channels = (channels_Channels);\nfunction createChannel(name, pusher) {\n    if (name.indexOf('private-encrypted-') === 0) {\n        if (pusher.config.nacl) {\n            return factory.createEncryptedChannel(name, pusher, pusher.config.nacl);\n        }\n        var errMsg = 'Tried to subscribe to a private-encrypted- channel but no nacl implementation available';\n        var suffix = url_store.buildLogSuffix('encryptedChannelSupport');\n        throw new UnsupportedFeature(errMsg + \". \" + suffix);\n    }\n    else if (name.indexOf('private-') === 0) {\n        return factory.createPrivateChannel(name, pusher);\n    }\n    else if (name.indexOf('presence-') === 0) {\n        return factory.createPresenceChannel(name, pusher);\n    }\n    else if (name.indexOf('#') === 0) {\n        throw new BadChannelName('Cannot create a channel with name \"' + name + '\".');\n    }\n    else {\n        return factory.createChannel(name, pusher);\n    }\n}\n\n// CONCATENATED MODULE: ./src/core/utils/factory.ts\n\n\n\n\n\n\n\n\n\nvar Factory = {\n    createChannels: function () {\n        return new channels();\n    },\n    createConnectionManager: function (key, options) {\n        return new connection_manager(key, options);\n    },\n    createChannel: function (name, pusher) {\n        return new channels_channel(name, pusher);\n    },\n    createPrivateChannel: function (name, pusher) {\n        return new private_channel(name, pusher);\n    },\n    createPresenceChannel: function (name, pusher) {\n        return new presence_channel(name, pusher);\n    },\n    createEncryptedChannel: function (name, pusher, nacl) {\n        return new encrypted_channel(name, pusher, nacl);\n    },\n    createTimelineSender: function (timeline, options) {\n        return new timeline_sender(timeline, options);\n    },\n    createHandshake: function (transport, callback) {\n        return new connection_handshake(transport, callback);\n    },\n    createAssistantToTheTransportManager: function (manager, transport, options) {\n        return new assistant_to_the_transport_manager(manager, transport, options);\n    }\n};\n/* harmony default export */ var factory = (Factory);\n\n// CONCATENATED MODULE: ./src/core/transports/transport_manager.ts\n\nvar transport_manager_TransportManager = (function () {\n    function TransportManager(options) {\n        this.options = options || {};\n        this.livesLeft = this.options.lives || Infinity;\n    }\n    TransportManager.prototype.getAssistant = function (transport) {\n        return factory.createAssistantToTheTransportManager(this, transport, {\n            minPingDelay: this.options.minPingDelay,\n            maxPingDelay: this.options.maxPingDelay\n        });\n    };\n    TransportManager.prototype.isAlive = function () {\n        return this.livesLeft > 0;\n    };\n    TransportManager.prototype.reportDeath = function () {\n        this.livesLeft -= 1;\n    };\n    return TransportManager;\n}());\n/* harmony default export */ var transport_manager = (transport_manager_TransportManager);\n\n// CONCATENATED MODULE: ./src/core/strategies/sequential_strategy.ts\n\n\n\nvar sequential_strategy_SequentialStrategy = (function () {\n    function SequentialStrategy(strategies, options) {\n        this.strategies = strategies;\n        this.loop = Boolean(options.loop);\n        this.failFast = Boolean(options.failFast);\n        this.timeout = options.timeout;\n        this.timeoutLimit = options.timeoutLimit;\n    }\n    SequentialStrategy.prototype.isSupported = function () {\n        return any(this.strategies, util.method('isSupported'));\n    };\n    SequentialStrategy.prototype.connect = function (minPriority, callback) {\n        var _this = this;\n        var strategies = this.strategies;\n        var current = 0;\n        var timeout = this.timeout;\n        var runner = null;\n        var tryNextStrategy = function (error, handshake) {\n            if (handshake) {\n                callback(null, handshake);\n            }\n            else {\n                current = current + 1;\n                if (_this.loop) {\n                    current = current % strategies.length;\n                }\n                if (current < strategies.length) {\n                    if (timeout) {\n                        timeout = timeout * 2;\n                        if (_this.timeoutLimit) {\n                            timeout = Math.min(timeout, _this.timeoutLimit);\n                        }\n                    }\n                    runner = _this.tryStrategy(strategies[current], minPriority, { timeout: timeout, failFast: _this.failFast }, tryNextStrategy);\n                }\n                else {\n                    callback(true);\n                }\n            }\n        };\n        runner = this.tryStrategy(strategies[current], minPriority, { timeout: timeout, failFast: this.failFast }, tryNextStrategy);\n        return {\n            abort: function () {\n                runner.abort();\n            },\n            forceMinPriority: function (p) {\n                minPriority = p;\n                if (runner) {\n                    runner.forceMinPriority(p);\n                }\n            }\n        };\n    };\n    SequentialStrategy.prototype.tryStrategy = function (strategy, minPriority, options, callback) {\n        var timer = null;\n        var runner = null;\n        if (options.timeout > 0) {\n            timer = new OneOffTimer(options.timeout, function () {\n                runner.abort();\n                callback(true);\n            });\n        }\n        runner = strategy.connect(minPriority, function (error, handshake) {\n            if (error && timer && timer.isRunning() && !options.failFast) {\n                return;\n            }\n            if (timer) {\n                timer.ensureAborted();\n            }\n            callback(error, handshake);\n        });\n        return {\n            abort: function () {\n                if (timer) {\n                    timer.ensureAborted();\n                }\n                runner.abort();\n            },\n            forceMinPriority: function (p) {\n                runner.forceMinPriority(p);\n            }\n        };\n    };\n    return SequentialStrategy;\n}());\n/* harmony default export */ var sequential_strategy = (sequential_strategy_SequentialStrategy);\n\n// CONCATENATED MODULE: ./src/core/strategies/best_connected_ever_strategy.ts\n\n\nvar best_connected_ever_strategy_BestConnectedEverStrategy = (function () {\n    function BestConnectedEverStrategy(strategies) {\n        this.strategies = strategies;\n    }\n    BestConnectedEverStrategy.prototype.isSupported = function () {\n        return any(this.strategies, util.method('isSupported'));\n    };\n    BestConnectedEverStrategy.prototype.connect = function (minPriority, callback) {\n        return connect(this.strategies, minPriority, function (i, runners) {\n            return function (error, handshake) {\n                runners[i].error = error;\n                if (error) {\n                    if (allRunnersFailed(runners)) {\n                        callback(true);\n                    }\n                    return;\n                }\n                apply(runners, function (runner) {\n                    runner.forceMinPriority(handshake.transport.priority);\n                });\n                callback(null, handshake);\n            };\n        });\n    };\n    return BestConnectedEverStrategy;\n}());\n/* harmony default export */ var best_connected_ever_strategy = (best_connected_ever_strategy_BestConnectedEverStrategy);\nfunction connect(strategies, minPriority, callbackBuilder) {\n    var runners = map(strategies, function (strategy, i, _, rs) {\n        return strategy.connect(minPriority, callbackBuilder(i, rs));\n    });\n    return {\n        abort: function () {\n            apply(runners, abortRunner);\n        },\n        forceMinPriority: function (p) {\n            apply(runners, function (runner) {\n                runner.forceMinPriority(p);\n            });\n        }\n    };\n}\nfunction allRunnersFailed(runners) {\n    return collections_all(runners, function (runner) {\n        return Boolean(runner.error);\n    });\n}\nfunction abortRunner(runner) {\n    if (!runner.error && !runner.aborted) {\n        runner.abort();\n        runner.aborted = true;\n    }\n}\n\n// CONCATENATED MODULE: ./src/core/strategies/cached_strategy.ts\n\n\n\n\nvar cached_strategy_CachedStrategy = (function () {\n    function CachedStrategy(strategy, transports, options) {\n        this.strategy = strategy;\n        this.transports = transports;\n        this.ttl = options.ttl || 1800 * 1000;\n        this.usingTLS = options.useTLS;\n        this.timeline = options.timeline;\n    }\n    CachedStrategy.prototype.isSupported = function () {\n        return this.strategy.isSupported();\n    };\n    CachedStrategy.prototype.connect = function (minPriority, callback) {\n        var usingTLS = this.usingTLS;\n        var info = fetchTransportCache(usingTLS);\n        var strategies = [this.strategy];\n        if (info && info.timestamp + this.ttl >= util.now()) {\n            var transport = this.transports[info.transport];\n            if (transport) {\n                this.timeline.info({\n                    cached: true,\n                    transport: info.transport,\n                    latency: info.latency\n                });\n                strategies.push(new sequential_strategy([transport], {\n                    timeout: info.latency * 2 + 1000,\n                    failFast: true\n                }));\n            }\n        }\n        var startTimestamp = util.now();\n        var runner = strategies\n            .pop()\n            .connect(minPriority, function cb(error, handshake) {\n            if (error) {\n                flushTransportCache(usingTLS);\n                if (strategies.length > 0) {\n                    startTimestamp = util.now();\n                    runner = strategies.pop().connect(minPriority, cb);\n                }\n                else {\n                    callback(error);\n                }\n            }\n            else {\n                storeTransportCache(usingTLS, handshake.transport.name, util.now() - startTimestamp);\n                callback(null, handshake);\n            }\n        });\n        return {\n            abort: function () {\n                runner.abort();\n            },\n            forceMinPriority: function (p) {\n                minPriority = p;\n                if (runner) {\n                    runner.forceMinPriority(p);\n                }\n            }\n        };\n    };\n    return CachedStrategy;\n}());\n/* harmony default export */ var cached_strategy = (cached_strategy_CachedStrategy);\nfunction getTransportCacheKey(usingTLS) {\n    return 'pusherTransport' + (usingTLS ? 'TLS' : 'NonTLS');\n}\nfunction fetchTransportCache(usingTLS) {\n    var storage = runtime.getLocalStorage();\n    if (storage) {\n        try {\n            var serializedCache = storage[getTransportCacheKey(usingTLS)];\n            if (serializedCache) {\n                return JSON.parse(serializedCache);\n            }\n        }\n        catch (e) {\n            flushTransportCache(usingTLS);\n        }\n    }\n    return null;\n}\nfunction storeTransportCache(usingTLS, transport, latency) {\n    var storage = runtime.getLocalStorage();\n    if (storage) {\n        try {\n            storage[getTransportCacheKey(usingTLS)] = safeJSONStringify({\n                timestamp: util.now(),\n                transport: transport,\n                latency: latency\n            });\n        }\n        catch (e) {\n        }\n    }\n}\nfunction flushTransportCache(usingTLS) {\n    var storage = runtime.getLocalStorage();\n    if (storage) {\n        try {\n            delete storage[getTransportCacheKey(usingTLS)];\n        }\n        catch (e) {\n        }\n    }\n}\n\n// CONCATENATED MODULE: ./src/core/strategies/delayed_strategy.ts\n\nvar delayed_strategy_DelayedStrategy = (function () {\n    function DelayedStrategy(strategy, _a) {\n        var number = _a.delay;\n        this.strategy = strategy;\n        this.options = { delay: number };\n    }\n    DelayedStrategy.prototype.isSupported = function () {\n        return this.strategy.isSupported();\n    };\n    DelayedStrategy.prototype.connect = function (minPriority, callback) {\n        var strategy = this.strategy;\n        var runner;\n        var timer = new OneOffTimer(this.options.delay, function () {\n            runner = strategy.connect(minPriority, callback);\n        });\n        return {\n            abort: function () {\n                timer.ensureAborted();\n                if (runner) {\n                    runner.abort();\n                }\n            },\n            forceMinPriority: function (p) {\n                minPriority = p;\n                if (runner) {\n                    runner.forceMinPriority(p);\n                }\n            }\n        };\n    };\n    return DelayedStrategy;\n}());\n/* harmony default export */ var delayed_strategy = (delayed_strategy_DelayedStrategy);\n\n// CONCATENATED MODULE: ./src/core/strategies/if_strategy.ts\nvar IfStrategy = (function () {\n    function IfStrategy(test, trueBranch, falseBranch) {\n        this.test = test;\n        this.trueBranch = trueBranch;\n        this.falseBranch = falseBranch;\n    }\n    IfStrategy.prototype.isSupported = function () {\n        var branch = this.test() ? this.trueBranch : this.falseBranch;\n        return branch.isSupported();\n    };\n    IfStrategy.prototype.connect = function (minPriority, callback) {\n        var branch = this.test() ? this.trueBranch : this.falseBranch;\n        return branch.connect(minPriority, callback);\n    };\n    return IfStrategy;\n}());\n/* harmony default export */ var if_strategy = (IfStrategy);\n\n// CONCATENATED MODULE: ./src/core/strategies/first_connected_strategy.ts\nvar FirstConnectedStrategy = (function () {\n    function FirstConnectedStrategy(strategy) {\n        this.strategy = strategy;\n    }\n    FirstConnectedStrategy.prototype.isSupported = function () {\n        return this.strategy.isSupported();\n    };\n    FirstConnectedStrategy.prototype.connect = function (minPriority, callback) {\n        var runner = this.strategy.connect(minPriority, function (error, handshake) {\n            if (handshake) {\n                runner.abort();\n            }\n            callback(error, handshake);\n        });\n        return runner;\n    };\n    return FirstConnectedStrategy;\n}());\n/* harmony default export */ var first_connected_strategy = (FirstConnectedStrategy);\n\n// CONCATENATED MODULE: ./src/runtimes/web/default_strategy.ts\n\n\n\n\n\n\n\nfunction testSupportsStrategy(strategy) {\n    return function () {\n        return strategy.isSupported();\n    };\n}\nvar getDefaultStrategy = function (config, baseOptions, defineTransport) {\n    var definedTransports = {};\n    function defineTransportStrategy(name, type, priority, options, manager) {\n        var transport = defineTransport(config, name, type, priority, options, manager);\n        definedTransports[name] = transport;\n        return transport;\n    }\n    var ws_options = Object.assign({}, baseOptions, {\n        hostNonTLS: config.wsHost + ':' + config.wsPort,\n        hostTLS: config.wsHost + ':' + config.wssPort,\n        httpPath: config.wsPath\n    });\n    var wss_options = Object.assign({}, ws_options, {\n        useTLS: true\n    });\n    var sockjs_options = Object.assign({}, baseOptions, {\n        hostNonTLS: config.httpHost + ':' + config.httpPort,\n        hostTLS: config.httpHost + ':' + config.httpsPort,\n        httpPath: config.httpPath\n    });\n    var timeouts = {\n        loop: true,\n        timeout: 15000,\n        timeoutLimit: 60000\n    };\n    var ws_manager = new transport_manager({\n        lives: 2,\n        minPingDelay: 10000,\n        maxPingDelay: config.activityTimeout\n    });\n    var streaming_manager = new transport_manager({\n        lives: 2,\n        minPingDelay: 10000,\n        maxPingDelay: config.activityTimeout\n    });\n    var ws_transport = defineTransportStrategy('ws', 'ws', 3, ws_options, ws_manager);\n    var wss_transport = defineTransportStrategy('wss', 'ws', 3, wss_options, ws_manager);\n    var sockjs_transport = defineTransportStrategy('sockjs', 'sockjs', 1, sockjs_options);\n    var xhr_streaming_transport = defineTransportStrategy('xhr_streaming', 'xhr_streaming', 1, sockjs_options, streaming_manager);\n    var xdr_streaming_transport = defineTransportStrategy('xdr_streaming', 'xdr_streaming', 1, sockjs_options, streaming_manager);\n    var xhr_polling_transport = defineTransportStrategy('xhr_polling', 'xhr_polling', 1, sockjs_options);\n    var xdr_polling_transport = defineTransportStrategy('xdr_polling', 'xdr_polling', 1, sockjs_options);\n    var ws_loop = new sequential_strategy([ws_transport], timeouts);\n    var wss_loop = new sequential_strategy([wss_transport], timeouts);\n    var sockjs_loop = new sequential_strategy([sockjs_transport], timeouts);\n    var streaming_loop = new sequential_strategy([\n        new if_strategy(testSupportsStrategy(xhr_streaming_transport), xhr_streaming_transport, xdr_streaming_transport)\n    ], timeouts);\n    var polling_loop = new sequential_strategy([\n        new if_strategy(testSupportsStrategy(xhr_polling_transport), xhr_polling_transport, xdr_polling_transport)\n    ], timeouts);\n    var http_loop = new sequential_strategy([\n        new if_strategy(testSupportsStrategy(streaming_loop), new best_connected_ever_strategy([\n            streaming_loop,\n            new delayed_strategy(polling_loop, { delay: 4000 })\n        ]), polling_loop)\n    ], timeouts);\n    var http_fallback_loop = new if_strategy(testSupportsStrategy(http_loop), http_loop, sockjs_loop);\n    var wsStrategy;\n    if (baseOptions.useTLS) {\n        wsStrategy = new best_connected_ever_strategy([\n            ws_loop,\n            new delayed_strategy(http_fallback_loop, { delay: 2000 })\n        ]);\n    }\n    else {\n        wsStrategy = new best_connected_ever_strategy([\n            ws_loop,\n            new delayed_strategy(wss_loop, { delay: 2000 }),\n            new delayed_strategy(http_fallback_loop, { delay: 5000 })\n        ]);\n    }\n    return new cached_strategy(new first_connected_strategy(new if_strategy(testSupportsStrategy(ws_transport), wsStrategy, http_fallback_loop)), definedTransports, {\n        ttl: 1800000,\n        timeline: baseOptions.timeline,\n        useTLS: baseOptions.useTLS\n    });\n};\n/* harmony default export */ var default_strategy = (getDefaultStrategy);\n\n// CONCATENATED MODULE: ./src/runtimes/web/transports/transport_connection_initializer.ts\n\n/* harmony default export */ var transport_connection_initializer = (function () {\n    var self = this;\n    self.timeline.info(self.buildTimelineMessage({\n        transport: self.name + (self.options.useTLS ? 's' : '')\n    }));\n    if (self.hooks.isInitialized()) {\n        self.changeState('initialized');\n    }\n    else if (self.hooks.file) {\n        self.changeState('initializing');\n        Dependencies.load(self.hooks.file, { useTLS: self.options.useTLS }, function (error, callback) {\n            if (self.hooks.isInitialized()) {\n                self.changeState('initialized');\n                callback(true);\n            }\n            else {\n                if (error) {\n                    self.onError(error);\n                }\n                self.onClose();\n                callback(false);\n            }\n        });\n    }\n    else {\n        self.onClose();\n    }\n});\n\n// CONCATENATED MODULE: ./src/runtimes/web/http/http_xdomain_request.ts\n\nvar http_xdomain_request_hooks = {\n    getRequest: function (socket) {\n        var xdr = new window.XDomainRequest();\n        xdr.ontimeout = function () {\n            socket.emit('error', new RequestTimedOut());\n            socket.close();\n        };\n        xdr.onerror = function (e) {\n            socket.emit('error', e);\n            socket.close();\n        };\n        xdr.onprogress = function () {\n            if (xdr.responseText && xdr.responseText.length > 0) {\n                socket.onChunk(200, xdr.responseText);\n            }\n        };\n        xdr.onload = function () {\n            if (xdr.responseText && xdr.responseText.length > 0) {\n                socket.onChunk(200, xdr.responseText);\n            }\n            socket.emit('finished', 200);\n            socket.close();\n        };\n        return xdr;\n    },\n    abortRequest: function (xdr) {\n        xdr.ontimeout = xdr.onerror = xdr.onprogress = xdr.onload = null;\n        xdr.abort();\n    }\n};\n/* harmony default export */ var http_xdomain_request = (http_xdomain_request_hooks);\n\n// CONCATENATED MODULE: ./src/core/http/http_request.ts\nvar http_request_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar MAX_BUFFER_LENGTH = 256 * 1024;\nvar http_request_HTTPRequest = (function (_super) {\n    http_request_extends(HTTPRequest, _super);\n    function HTTPRequest(hooks, method, url) {\n        var _this = _super.call(this) || this;\n        _this.hooks = hooks;\n        _this.method = method;\n        _this.url = url;\n        return _this;\n    }\n    HTTPRequest.prototype.start = function (payload) {\n        var _this = this;\n        this.position = 0;\n        this.xhr = this.hooks.getRequest(this);\n        this.unloader = function () {\n            _this.close();\n        };\n        runtime.addUnloadListener(this.unloader);\n        this.xhr.open(this.method, this.url, true);\n        if (this.xhr.setRequestHeader) {\n            this.xhr.setRequestHeader('Content-Type', 'application/json');\n        }\n        this.xhr.send(payload);\n    };\n    HTTPRequest.prototype.close = function () {\n        if (this.unloader) {\n            runtime.removeUnloadListener(this.unloader);\n            this.unloader = null;\n        }\n        if (this.xhr) {\n            this.hooks.abortRequest(this.xhr);\n            this.xhr = null;\n        }\n    };\n    HTTPRequest.prototype.onChunk = function (status, data) {\n        while (true) {\n            var chunk = this.advanceBuffer(data);\n            if (chunk) {\n                this.emit('chunk', { status: status, data: chunk });\n            }\n            else {\n                break;\n            }\n        }\n        if (this.isBufferTooLong(data)) {\n            this.emit('buffer_too_long');\n        }\n    };\n    HTTPRequest.prototype.advanceBuffer = function (buffer) {\n        var unreadData = buffer.slice(this.position);\n        var endOfLinePosition = unreadData.indexOf('\\n');\n        if (endOfLinePosition !== -1) {\n            this.position += endOfLinePosition + 1;\n            return unreadData.slice(0, endOfLinePosition);\n        }\n        else {\n            return null;\n        }\n    };\n    HTTPRequest.prototype.isBufferTooLong = function (buffer) {\n        return this.position === buffer.length && buffer.length > MAX_BUFFER_LENGTH;\n    };\n    return HTTPRequest;\n}(dispatcher));\n/* harmony default export */ var http_request = (http_request_HTTPRequest);\n\n// CONCATENATED MODULE: ./src/core/http/state.ts\nvar State;\n(function (State) {\n    State[State[\"CONNECTING\"] = 0] = \"CONNECTING\";\n    State[State[\"OPEN\"] = 1] = \"OPEN\";\n    State[State[\"CLOSED\"] = 3] = \"CLOSED\";\n})(State || (State = {}));\n/* harmony default export */ var state = (State);\n\n// CONCATENATED MODULE: ./src/core/http/http_socket.ts\n\n\n\nvar autoIncrement = 1;\nvar http_socket_HTTPSocket = (function () {\n    function HTTPSocket(hooks, url) {\n        this.hooks = hooks;\n        this.session = randomNumber(1000) + '/' + randomString(8);\n        this.location = getLocation(url);\n        this.readyState = state.CONNECTING;\n        this.openStream();\n    }\n    HTTPSocket.prototype.send = function (payload) {\n        return this.sendRaw(JSON.stringify([payload]));\n    };\n    HTTPSocket.prototype.ping = function () {\n        this.hooks.sendHeartbeat(this);\n    };\n    HTTPSocket.prototype.close = function (code, reason) {\n        this.onClose(code, reason, true);\n    };\n    HTTPSocket.prototype.sendRaw = function (payload) {\n        if (this.readyState === state.OPEN) {\n            try {\n                runtime.createSocketRequest('POST', getUniqueURL(getSendURL(this.location, this.session))).start(payload);\n                return true;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    HTTPSocket.prototype.reconnect = function () {\n        this.closeStream();\n        this.openStream();\n    };\n    HTTPSocket.prototype.onClose = function (code, reason, wasClean) {\n        this.closeStream();\n        this.readyState = state.CLOSED;\n        if (this.onclose) {\n            this.onclose({\n                code: code,\n                reason: reason,\n                wasClean: wasClean\n            });\n        }\n    };\n    HTTPSocket.prototype.onChunk = function (chunk) {\n        if (chunk.status !== 200) {\n            return;\n        }\n        if (this.readyState === state.OPEN) {\n            this.onActivity();\n        }\n        var payload;\n        var type = chunk.data.slice(0, 1);\n        switch (type) {\n            case 'o':\n                payload = JSON.parse(chunk.data.slice(1) || '{}');\n                this.onOpen(payload);\n                break;\n            case 'a':\n                payload = JSON.parse(chunk.data.slice(1) || '[]');\n                for (var i = 0; i < payload.length; i++) {\n                    this.onEvent(payload[i]);\n                }\n                break;\n            case 'm':\n                payload = JSON.parse(chunk.data.slice(1) || 'null');\n                this.onEvent(payload);\n                break;\n            case 'h':\n                this.hooks.onHeartbeat(this);\n                break;\n            case 'c':\n                payload = JSON.parse(chunk.data.slice(1) || '[]');\n                this.onClose(payload[0], payload[1], true);\n                break;\n        }\n    };\n    HTTPSocket.prototype.onOpen = function (options) {\n        if (this.readyState === state.CONNECTING) {\n            if (options && options.hostname) {\n                this.location.base = replaceHost(this.location.base, options.hostname);\n            }\n            this.readyState = state.OPEN;\n            if (this.onopen) {\n                this.onopen();\n            }\n        }\n        else {\n            this.onClose(1006, 'Server lost session', true);\n        }\n    };\n    HTTPSocket.prototype.onEvent = function (event) {\n        if (this.readyState === state.OPEN && this.onmessage) {\n            this.onmessage({ data: event });\n        }\n    };\n    HTTPSocket.prototype.onActivity = function () {\n        if (this.onactivity) {\n            this.onactivity();\n        }\n    };\n    HTTPSocket.prototype.onError = function (error) {\n        if (this.onerror) {\n            this.onerror(error);\n        }\n    };\n    HTTPSocket.prototype.openStream = function () {\n        var _this = this;\n        this.stream = runtime.createSocketRequest('POST', getUniqueURL(this.hooks.getReceiveURL(this.location, this.session)));\n        this.stream.bind('chunk', function (chunk) {\n            _this.onChunk(chunk);\n        });\n        this.stream.bind('finished', function (status) {\n            _this.hooks.onFinished(_this, status);\n        });\n        this.stream.bind('buffer_too_long', function () {\n            _this.reconnect();\n        });\n        try {\n            this.stream.start();\n        }\n        catch (error) {\n            util.defer(function () {\n                _this.onError(error);\n                _this.onClose(1006, 'Could not start streaming', false);\n            });\n        }\n    };\n    HTTPSocket.prototype.closeStream = function () {\n        if (this.stream) {\n            this.stream.unbind_all();\n            this.stream.close();\n            this.stream = null;\n        }\n    };\n    return HTTPSocket;\n}());\nfunction getLocation(url) {\n    var parts = /([^\\?]*)\\/*(\\??.*)/.exec(url);\n    return {\n        base: parts[1],\n        queryString: parts[2]\n    };\n}\nfunction getSendURL(url, session) {\n    return url.base + '/' + session + '/xhr_send';\n}\nfunction getUniqueURL(url) {\n    var separator = url.indexOf('?') === -1 ? '?' : '&';\n    return url + separator + 't=' + +new Date() + '&n=' + autoIncrement++;\n}\nfunction replaceHost(url, hostname) {\n    var urlParts = /(https?:\\/\\/)([^\\/:]+)((\\/|:)?.*)/.exec(url);\n    return urlParts[1] + hostname + urlParts[3];\n}\nfunction randomNumber(max) {\n    return runtime.randomInt(max);\n}\nfunction randomString(length) {\n    var result = [];\n    for (var i = 0; i < length; i++) {\n        result.push(randomNumber(32).toString(32));\n    }\n    return result.join('');\n}\n/* harmony default export */ var http_socket = (http_socket_HTTPSocket);\n\n// CONCATENATED MODULE: ./src/core/http/http_streaming_socket.ts\nvar http_streaming_socket_hooks = {\n    getReceiveURL: function (url, session) {\n        return url.base + '/' + session + '/xhr_streaming' + url.queryString;\n    },\n    onHeartbeat: function (socket) {\n        socket.sendRaw('[]');\n    },\n    sendHeartbeat: function (socket) {\n        socket.sendRaw('[]');\n    },\n    onFinished: function (socket, status) {\n        socket.onClose(1006, 'Connection interrupted (' + status + ')', false);\n    }\n};\n/* harmony default export */ var http_streaming_socket = (http_streaming_socket_hooks);\n\n// CONCATENATED MODULE: ./src/core/http/http_polling_socket.ts\nvar http_polling_socket_hooks = {\n    getReceiveURL: function (url, session) {\n        return url.base + '/' + session + '/xhr' + url.queryString;\n    },\n    onHeartbeat: function () {\n    },\n    sendHeartbeat: function (socket) {\n        socket.sendRaw('[]');\n    },\n    onFinished: function (socket, status) {\n        if (status === 200) {\n            socket.reconnect();\n        }\n        else {\n            socket.onClose(1006, 'Connection interrupted (' + status + ')', false);\n        }\n    }\n};\n/* harmony default export */ var http_polling_socket = (http_polling_socket_hooks);\n\n// CONCATENATED MODULE: ./src/runtimes/isomorphic/http/http_xhr_request.ts\n\nvar http_xhr_request_hooks = {\n    getRequest: function (socket) {\n        var Constructor = runtime.getXHRAPI();\n        var xhr = new Constructor();\n        xhr.onreadystatechange = xhr.onprogress = function () {\n            switch (xhr.readyState) {\n                case 3:\n                    if (xhr.responseText && xhr.responseText.length > 0) {\n                        socket.onChunk(xhr.status, xhr.responseText);\n                    }\n                    break;\n                case 4:\n                    if (xhr.responseText && xhr.responseText.length > 0) {\n                        socket.onChunk(xhr.status, xhr.responseText);\n                    }\n                    socket.emit('finished', xhr.status);\n                    socket.close();\n                    break;\n            }\n        };\n        return xhr;\n    },\n    abortRequest: function (xhr) {\n        xhr.onreadystatechange = null;\n        xhr.abort();\n    }\n};\n/* harmony default export */ var http_xhr_request = (http_xhr_request_hooks);\n\n// CONCATENATED MODULE: ./src/runtimes/isomorphic/http/http.ts\n\n\n\n\n\nvar HTTP = {\n    createStreamingSocket: function (url) {\n        return this.createSocket(http_streaming_socket, url);\n    },\n    createPollingSocket: function (url) {\n        return this.createSocket(http_polling_socket, url);\n    },\n    createSocket: function (hooks, url) {\n        return new http_socket(hooks, url);\n    },\n    createXHR: function (method, url) {\n        return this.createRequest(http_xhr_request, method, url);\n    },\n    createRequest: function (hooks, method, url) {\n        return new http_request(hooks, method, url);\n    }\n};\n/* harmony default export */ var http_http = (HTTP);\n\n// CONCATENATED MODULE: ./src/runtimes/web/http/http.ts\n\n\nhttp_http.createXDR = function (method, url) {\n    return this.createRequest(http_xdomain_request, method, url);\n};\n/* harmony default export */ var web_http_http = (http_http);\n\n// CONCATENATED MODULE: ./src/runtimes/web/runtime.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar Runtime = {\n    nextAuthCallbackID: 1,\n    auth_callbacks: {},\n    ScriptReceivers: ScriptReceivers,\n    DependenciesReceivers: DependenciesReceivers,\n    getDefaultStrategy: default_strategy,\n    Transports: transports_transports,\n    transportConnectionInitializer: transport_connection_initializer,\n    HTTPFactory: web_http_http,\n    TimelineTransport: jsonp_timeline,\n    getXHRAPI: function () {\n        return window.XMLHttpRequest;\n    },\n    getWebSocketAPI: function () {\n        return window.WebSocket || window.MozWebSocket;\n    },\n    setup: function (PusherClass) {\n        var _this = this;\n        window.Pusher = PusherClass;\n        var initializeOnDocumentBody = function () {\n            _this.onDocumentBody(PusherClass.ready);\n        };\n        if (!window.JSON) {\n            Dependencies.load('json2', {}, initializeOnDocumentBody);\n        }\n        else {\n            initializeOnDocumentBody();\n        }\n    },\n    getDocument: function () {\n        return document;\n    },\n    getProtocol: function () {\n        return this.getDocument().location.protocol;\n    },\n    getAuthorizers: function () {\n        return { ajax: xhr_auth, jsonp: jsonp_auth };\n    },\n    onDocumentBody: function (callback) {\n        var _this = this;\n        if (document.body) {\n            callback();\n        }\n        else {\n            setTimeout(function () {\n                _this.onDocumentBody(callback);\n            }, 0);\n        }\n    },\n    createJSONPRequest: function (url, data) {\n        return new jsonp_request(url, data);\n    },\n    createScriptRequest: function (src) {\n        return new script_request(src);\n    },\n    getLocalStorage: function () {\n        try {\n            return window.localStorage;\n        }\n        catch (e) {\n            return undefined;\n        }\n    },\n    createXHR: function () {\n        if (this.getXHRAPI()) {\n            return this.createXMLHttpRequest();\n        }\n        else {\n            return this.createMicrosoftXHR();\n        }\n    },\n    createXMLHttpRequest: function () {\n        var Constructor = this.getXHRAPI();\n        return new Constructor();\n    },\n    createMicrosoftXHR: function () {\n        return new ActiveXObject('Microsoft.XMLHTTP');\n    },\n    getNetwork: function () {\n        return net_info_Network;\n    },\n    createWebSocket: function (url) {\n        var Constructor = this.getWebSocketAPI();\n        return new Constructor(url);\n    },\n    createSocketRequest: function (method, url) {\n        if (this.isXHRSupported()) {\n            return this.HTTPFactory.createXHR(method, url);\n        }\n        else if (this.isXDRSupported(url.indexOf('https:') === 0)) {\n            return this.HTTPFactory.createXDR(method, url);\n        }\n        else {\n            throw 'Cross-origin HTTP requests are not supported';\n        }\n    },\n    isXHRSupported: function () {\n        var Constructor = this.getXHRAPI();\n        return (Boolean(Constructor) && new Constructor().withCredentials !== undefined);\n    },\n    isXDRSupported: function (useTLS) {\n        var protocol = useTLS ? 'https:' : 'http:';\n        var documentProtocol = this.getProtocol();\n        return (Boolean(window['XDomainRequest']) && documentProtocol === protocol);\n    },\n    addUnloadListener: function (listener) {\n        if (window.addEventListener !== undefined) {\n            window.addEventListener('unload', listener, false);\n        }\n        else if (window.attachEvent !== undefined) {\n            window.attachEvent('onunload', listener);\n        }\n    },\n    removeUnloadListener: function (listener) {\n        if (window.addEventListener !== undefined) {\n            window.removeEventListener('unload', listener, false);\n        }\n        else if (window.detachEvent !== undefined) {\n            window.detachEvent('onunload', listener);\n        }\n    },\n    randomInt: function (max) {\n        var random = function () {\n            var crypto = window.crypto || window['msCrypto'];\n            var random = crypto.getRandomValues(new Uint32Array(1))[0];\n            return random / Math.pow(2, 32);\n        };\n        return Math.floor(random() * max);\n    }\n};\n/* harmony default export */ var runtime = (Runtime);\n\n// CONCATENATED MODULE: ./src/core/timeline/level.ts\nvar TimelineLevel;\n(function (TimelineLevel) {\n    TimelineLevel[TimelineLevel[\"ERROR\"] = 3] = \"ERROR\";\n    TimelineLevel[TimelineLevel[\"INFO\"] = 6] = \"INFO\";\n    TimelineLevel[TimelineLevel[\"DEBUG\"] = 7] = \"DEBUG\";\n})(TimelineLevel || (TimelineLevel = {}));\n/* harmony default export */ var timeline_level = (TimelineLevel);\n\n// CONCATENATED MODULE: ./src/core/timeline/timeline.ts\n\n\n\nvar timeline_Timeline = (function () {\n    function Timeline(key, session, options) {\n        this.key = key;\n        this.session = session;\n        this.events = [];\n        this.options = options || {};\n        this.sent = 0;\n        this.uniqueID = 0;\n    }\n    Timeline.prototype.log = function (level, event) {\n        if (level <= this.options.level) {\n            this.events.push(extend({}, event, { timestamp: util.now() }));\n            if (this.options.limit && this.events.length > this.options.limit) {\n                this.events.shift();\n            }\n        }\n    };\n    Timeline.prototype.error = function (event) {\n        this.log(timeline_level.ERROR, event);\n    };\n    Timeline.prototype.info = function (event) {\n        this.log(timeline_level.INFO, event);\n    };\n    Timeline.prototype.debug = function (event) {\n        this.log(timeline_level.DEBUG, event);\n    };\n    Timeline.prototype.isEmpty = function () {\n        return this.events.length === 0;\n    };\n    Timeline.prototype.send = function (sendfn, callback) {\n        var _this = this;\n        var data = extend({\n            session: this.session,\n            bundle: this.sent + 1,\n            key: this.key,\n            lib: 'js',\n            version: this.options.version,\n            cluster: this.options.cluster,\n            features: this.options.features,\n            timeline: this.events\n        }, this.options.params);\n        this.events = [];\n        sendfn(data, function (error, result) {\n            if (!error) {\n                _this.sent++;\n            }\n            if (callback) {\n                callback(error, result);\n            }\n        });\n        return true;\n    };\n    Timeline.prototype.generateUniqueID = function () {\n        this.uniqueID++;\n        return this.uniqueID;\n    };\n    return Timeline;\n}());\n/* harmony default export */ var timeline_timeline = (timeline_Timeline);\n\n// CONCATENATED MODULE: ./src/core/strategies/transport_strategy.ts\n\n\n\n\nvar transport_strategy_TransportStrategy = (function () {\n    function TransportStrategy(name, priority, transport, options) {\n        this.name = name;\n        this.priority = priority;\n        this.transport = transport;\n        this.options = options || {};\n    }\n    TransportStrategy.prototype.isSupported = function () {\n        return this.transport.isSupported({\n            useTLS: this.options.useTLS\n        });\n    };\n    TransportStrategy.prototype.connect = function (minPriority, callback) {\n        var _this = this;\n        if (!this.isSupported()) {\n            return failAttempt(new UnsupportedStrategy(), callback);\n        }\n        else if (this.priority < minPriority) {\n            return failAttempt(new TransportPriorityTooLow(), callback);\n        }\n        var connected = false;\n        var transport = this.transport.createConnection(this.name, this.priority, this.options.key, this.options);\n        var handshake = null;\n        var onInitialized = function () {\n            transport.unbind('initialized', onInitialized);\n            transport.connect();\n        };\n        var onOpen = function () {\n            handshake = factory.createHandshake(transport, function (result) {\n                connected = true;\n                unbindListeners();\n                callback(null, result);\n            });\n        };\n        var onError = function (error) {\n            unbindListeners();\n            callback(error);\n        };\n        var onClosed = function () {\n            unbindListeners();\n            var serializedTransport;\n            serializedTransport = safeJSONStringify(transport);\n            callback(new TransportClosed(serializedTransport));\n        };\n        var unbindListeners = function () {\n            transport.unbind('initialized', onInitialized);\n            transport.unbind('open', onOpen);\n            transport.unbind('error', onError);\n            transport.unbind('closed', onClosed);\n        };\n        transport.bind('initialized', onInitialized);\n        transport.bind('open', onOpen);\n        transport.bind('error', onError);\n        transport.bind('closed', onClosed);\n        transport.initialize();\n        return {\n            abort: function () {\n                if (connected) {\n                    return;\n                }\n                unbindListeners();\n                if (handshake) {\n                    handshake.close();\n                }\n                else {\n                    transport.close();\n                }\n            },\n            forceMinPriority: function (p) {\n                if (connected) {\n                    return;\n                }\n                if (_this.priority < p) {\n                    if (handshake) {\n                        handshake.close();\n                    }\n                    else {\n                        transport.close();\n                    }\n                }\n            }\n        };\n    };\n    return TransportStrategy;\n}());\n/* harmony default export */ var transport_strategy = (transport_strategy_TransportStrategy);\nfunction failAttempt(error, callback) {\n    util.defer(function () {\n        callback(error);\n    });\n    return {\n        abort: function () { },\n        forceMinPriority: function () { }\n    };\n}\n\n// CONCATENATED MODULE: ./src/core/strategies/strategy_builder.ts\n\n\n\n\n\nvar strategy_builder_Transports = runtime.Transports;\nvar strategy_builder_defineTransport = function (config, name, type, priority, options, manager) {\n    var transportClass = strategy_builder_Transports[type];\n    if (!transportClass) {\n        throw new UnsupportedTransport(type);\n    }\n    var enabled = (!config.enabledTransports ||\n        arrayIndexOf(config.enabledTransports, name) !== -1) &&\n        (!config.disabledTransports ||\n            arrayIndexOf(config.disabledTransports, name) === -1);\n    var transport;\n    if (enabled) {\n        options = Object.assign({ ignoreNullOrigin: config.ignoreNullOrigin }, options);\n        transport = new transport_strategy(name, priority, manager ? manager.getAssistant(transportClass) : transportClass, options);\n    }\n    else {\n        transport = strategy_builder_UnsupportedStrategy;\n    }\n    return transport;\n};\nvar strategy_builder_UnsupportedStrategy = {\n    isSupported: function () {\n        return false;\n    },\n    connect: function (_, callback) {\n        var deferred = util.defer(function () {\n            callback(new UnsupportedStrategy());\n        });\n        return {\n            abort: function () {\n                deferred.ensureAborted();\n            },\n            forceMinPriority: function () { }\n        };\n    }\n};\n\n// CONCATENATED MODULE: ./src/core/auth/user_authenticator.ts\n\n\nvar composeChannelQuery = function (params, authOptions) {\n    var query = 'socket_id=' + encodeURIComponent(params.socketId);\n    for (var key in authOptions.params) {\n        query +=\n            '&' +\n                encodeURIComponent(key) +\n                '=' +\n                encodeURIComponent(authOptions.params[key]);\n    }\n    if (authOptions.paramsProvider != null) {\n        var dynamicParams = authOptions.paramsProvider();\n        for (var key in dynamicParams) {\n            query +=\n                '&' +\n                    encodeURIComponent(key) +\n                    '=' +\n                    encodeURIComponent(dynamicParams[key]);\n        }\n    }\n    return query;\n};\nvar UserAuthenticator = function (authOptions) {\n    if (typeof runtime.getAuthorizers()[authOptions.transport] === 'undefined') {\n        throw \"'\" + authOptions.transport + \"' is not a recognized auth transport\";\n    }\n    return function (params, callback) {\n        var query = composeChannelQuery(params, authOptions);\n        runtime.getAuthorizers()[authOptions.transport](runtime, query, authOptions, AuthRequestType.UserAuthentication, callback);\n    };\n};\n/* harmony default export */ var user_authenticator = (UserAuthenticator);\n\n// CONCATENATED MODULE: ./src/core/auth/channel_authorizer.ts\n\n\nvar channel_authorizer_composeChannelQuery = function (params, authOptions) {\n    var query = 'socket_id=' + encodeURIComponent(params.socketId);\n    query += '&channel_name=' + encodeURIComponent(params.channelName);\n    for (var key in authOptions.params) {\n        query +=\n            '&' +\n                encodeURIComponent(key) +\n                '=' +\n                encodeURIComponent(authOptions.params[key]);\n    }\n    if (authOptions.paramsProvider != null) {\n        var dynamicParams = authOptions.paramsProvider();\n        for (var key in dynamicParams) {\n            query +=\n                '&' +\n                    encodeURIComponent(key) +\n                    '=' +\n                    encodeURIComponent(dynamicParams[key]);\n        }\n    }\n    return query;\n};\nvar ChannelAuthorizer = function (authOptions) {\n    if (typeof runtime.getAuthorizers()[authOptions.transport] === 'undefined') {\n        throw \"'\" + authOptions.transport + \"' is not a recognized auth transport\";\n    }\n    return function (params, callback) {\n        var query = channel_authorizer_composeChannelQuery(params, authOptions);\n        runtime.getAuthorizers()[authOptions.transport](runtime, query, authOptions, AuthRequestType.ChannelAuthorization, callback);\n    };\n};\n/* harmony default export */ var channel_authorizer = (ChannelAuthorizer);\n\n// CONCATENATED MODULE: ./src/core/auth/deprecated_channel_authorizer.ts\nvar ChannelAuthorizerProxy = function (pusher, authOptions, channelAuthorizerGenerator) {\n    var deprecatedAuthorizerOptions = {\n        authTransport: authOptions.transport,\n        authEndpoint: authOptions.endpoint,\n        auth: {\n            params: authOptions.params,\n            headers: authOptions.headers\n        }\n    };\n    return function (params, callback) {\n        var channel = pusher.channel(params.channelName);\n        var channelAuthorizer = channelAuthorizerGenerator(channel, deprecatedAuthorizerOptions);\n        channelAuthorizer.authorize(params.socketId, callback);\n    };\n};\n\n// CONCATENATED MODULE: ./src/core/config.ts\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\n\nfunction getConfig(opts, pusher) {\n    var config = {\n        activityTimeout: opts.activityTimeout || defaults.activityTimeout,\n        cluster: opts.cluster || defaults.cluster,\n        httpPath: opts.httpPath || defaults.httpPath,\n        httpPort: opts.httpPort || defaults.httpPort,\n        httpsPort: opts.httpsPort || defaults.httpsPort,\n        pongTimeout: opts.pongTimeout || defaults.pongTimeout,\n        statsHost: opts.statsHost || defaults.stats_host,\n        unavailableTimeout: opts.unavailableTimeout || defaults.unavailableTimeout,\n        wsPath: opts.wsPath || defaults.wsPath,\n        wsPort: opts.wsPort || defaults.wsPort,\n        wssPort: opts.wssPort || defaults.wssPort,\n        enableStats: getEnableStatsConfig(opts),\n        httpHost: getHttpHost(opts),\n        useTLS: shouldUseTLS(opts),\n        wsHost: getWebsocketHost(opts),\n        userAuthenticator: buildUserAuthenticator(opts),\n        channelAuthorizer: buildChannelAuthorizer(opts, pusher)\n    };\n    if ('disabledTransports' in opts)\n        config.disabledTransports = opts.disabledTransports;\n    if ('enabledTransports' in opts)\n        config.enabledTransports = opts.enabledTransports;\n    if ('ignoreNullOrigin' in opts)\n        config.ignoreNullOrigin = opts.ignoreNullOrigin;\n    if ('timelineParams' in opts)\n        config.timelineParams = opts.timelineParams;\n    if ('nacl' in opts) {\n        config.nacl = opts.nacl;\n    }\n    return config;\n}\nfunction getHttpHost(opts) {\n    if (opts.httpHost) {\n        return opts.httpHost;\n    }\n    if (opts.cluster) {\n        return \"sockjs-\" + opts.cluster + \".pusher.com\";\n    }\n    return defaults.httpHost;\n}\nfunction getWebsocketHost(opts) {\n    if (opts.wsHost) {\n        return opts.wsHost;\n    }\n    if (opts.cluster) {\n        return getWebsocketHostFromCluster(opts.cluster);\n    }\n    return getWebsocketHostFromCluster(defaults.cluster);\n}\nfunction getWebsocketHostFromCluster(cluster) {\n    return \"ws-\" + cluster + \".pusher.com\";\n}\nfunction shouldUseTLS(opts) {\n    if (runtime.getProtocol() === 'https:') {\n        return true;\n    }\n    else if (opts.forceTLS === false) {\n        return false;\n    }\n    return true;\n}\nfunction getEnableStatsConfig(opts) {\n    if ('enableStats' in opts) {\n        return opts.enableStats;\n    }\n    if ('disableStats' in opts) {\n        return !opts.disableStats;\n    }\n    return false;\n}\nfunction buildUserAuthenticator(opts) {\n    var userAuthentication = __assign(__assign({}, defaults.userAuthentication), opts.userAuthentication);\n    if ('customHandler' in userAuthentication &&\n        userAuthentication['customHandler'] != null) {\n        return userAuthentication['customHandler'];\n    }\n    return user_authenticator(userAuthentication);\n}\nfunction buildChannelAuth(opts, pusher) {\n    var channelAuthorization;\n    if ('channelAuthorization' in opts) {\n        channelAuthorization = __assign(__assign({}, defaults.channelAuthorization), opts.channelAuthorization);\n    }\n    else {\n        channelAuthorization = {\n            transport: opts.authTransport || defaults.authTransport,\n            endpoint: opts.authEndpoint || defaults.authEndpoint\n        };\n        if ('auth' in opts) {\n            if ('params' in opts.auth)\n                channelAuthorization.params = opts.auth.params;\n            if ('headers' in opts.auth)\n                channelAuthorization.headers = opts.auth.headers;\n        }\n        if ('authorizer' in opts)\n            channelAuthorization.customHandler = ChannelAuthorizerProxy(pusher, channelAuthorization, opts.authorizer);\n    }\n    return channelAuthorization;\n}\nfunction buildChannelAuthorizer(opts, pusher) {\n    var channelAuthorization = buildChannelAuth(opts, pusher);\n    if ('customHandler' in channelAuthorization &&\n        channelAuthorization['customHandler'] != null) {\n        return channelAuthorization['customHandler'];\n    }\n    return channel_authorizer(channelAuthorization);\n}\n\n// CONCATENATED MODULE: ./src/core/watchlist.ts\nvar watchlist_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar watchlist_WatchlistFacade = (function (_super) {\n    watchlist_extends(WatchlistFacade, _super);\n    function WatchlistFacade(pusher) {\n        var _this = _super.call(this, function (eventName, data) {\n            logger.debug(\"No callbacks on watchlist events for \" + eventName);\n        }) || this;\n        _this.pusher = pusher;\n        _this.bindWatchlistInternalEvent();\n        return _this;\n    }\n    WatchlistFacade.prototype.handleEvent = function (pusherEvent) {\n        var _this = this;\n        pusherEvent.data.events.forEach(function (watchlistEvent) {\n            _this.emit(watchlistEvent.name, watchlistEvent);\n        });\n    };\n    WatchlistFacade.prototype.bindWatchlistInternalEvent = function () {\n        var _this = this;\n        this.pusher.connection.bind('message', function (pusherEvent) {\n            var eventName = pusherEvent.event;\n            if (eventName === 'pusher_internal:watchlist_events') {\n                _this.handleEvent(pusherEvent);\n            }\n        });\n    };\n    return WatchlistFacade;\n}(dispatcher));\n/* harmony default export */ var watchlist = (watchlist_WatchlistFacade);\n\n// CONCATENATED MODULE: ./src/core/utils/flat_promise.ts\nfunction flatPromise() {\n    var resolve, reject;\n    var promise = new Promise(function (res, rej) {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise: promise, resolve: resolve, reject: reject };\n}\n/* harmony default export */ var flat_promise = (flatPromise);\n\n// CONCATENATED MODULE: ./src/core/user.ts\nvar user_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar user_UserFacade = (function (_super) {\n    user_extends(UserFacade, _super);\n    function UserFacade(pusher) {\n        var _this = _super.call(this, function (eventName, data) {\n            logger.debug('No callbacks on user for ' + eventName);\n        }) || this;\n        _this.signin_requested = false;\n        _this.user_data = null;\n        _this.serverToUserChannel = null;\n        _this.signinDonePromise = null;\n        _this._signinDoneResolve = null;\n        _this._onAuthorize = function (err, authData) {\n            if (err) {\n                logger.warn(\"Error during signin: \" + err);\n                _this._cleanup();\n                return;\n            }\n            _this.pusher.send_event('pusher:signin', {\n                auth: authData.auth,\n                user_data: authData.user_data\n            });\n        };\n        _this.pusher = pusher;\n        _this.pusher.connection.bind('state_change', function (_a) {\n            var previous = _a.previous, current = _a.current;\n            if (previous !== 'connected' && current === 'connected') {\n                _this._signin();\n            }\n            if (previous === 'connected' && current !== 'connected') {\n                _this._cleanup();\n                _this._newSigninPromiseIfNeeded();\n            }\n        });\n        _this.watchlist = new watchlist(pusher);\n        _this.pusher.connection.bind('message', function (event) {\n            var eventName = event.event;\n            if (eventName === 'pusher:signin_success') {\n                _this._onSigninSuccess(event.data);\n            }\n            if (_this.serverToUserChannel &&\n                _this.serverToUserChannel.name === event.channel) {\n                _this.serverToUserChannel.handleEvent(event);\n            }\n        });\n        return _this;\n    }\n    UserFacade.prototype.signin = function () {\n        if (this.signin_requested) {\n            return;\n        }\n        this.signin_requested = true;\n        this._signin();\n    };\n    UserFacade.prototype._signin = function () {\n        if (!this.signin_requested) {\n            return;\n        }\n        this._newSigninPromiseIfNeeded();\n        if (this.pusher.connection.state !== 'connected') {\n            return;\n        }\n        this.pusher.config.userAuthenticator({\n            socketId: this.pusher.connection.socket_id\n        }, this._onAuthorize);\n    };\n    UserFacade.prototype._onSigninSuccess = function (data) {\n        try {\n            this.user_data = JSON.parse(data.user_data);\n        }\n        catch (e) {\n            logger.error(\"Failed parsing user data after signin: \" + data.user_data);\n            this._cleanup();\n            return;\n        }\n        if (typeof this.user_data.id !== 'string' || this.user_data.id === '') {\n            logger.error(\"user_data doesn't contain an id. user_data: \" + this.user_data);\n            this._cleanup();\n            return;\n        }\n        this._signinDoneResolve();\n        this._subscribeChannels();\n    };\n    UserFacade.prototype._subscribeChannels = function () {\n        var _this = this;\n        var ensure_subscribed = function (channel) {\n            if (channel.subscriptionPending && channel.subscriptionCancelled) {\n                channel.reinstateSubscription();\n            }\n            else if (!channel.subscriptionPending &&\n                _this.pusher.connection.state === 'connected') {\n                channel.subscribe();\n            }\n        };\n        this.serverToUserChannel = new channels_channel(\"#server-to-user-\" + this.user_data.id, this.pusher);\n        this.serverToUserChannel.bind_global(function (eventName, data) {\n            if (eventName.indexOf('pusher_internal:') === 0 ||\n                eventName.indexOf('pusher:') === 0) {\n                return;\n            }\n            _this.emit(eventName, data);\n        });\n        ensure_subscribed(this.serverToUserChannel);\n    };\n    UserFacade.prototype._cleanup = function () {\n        this.user_data = null;\n        if (this.serverToUserChannel) {\n            this.serverToUserChannel.unbind_all();\n            this.serverToUserChannel.disconnect();\n            this.serverToUserChannel = null;\n        }\n        if (this.signin_requested) {\n            this._signinDoneResolve();\n        }\n    };\n    UserFacade.prototype._newSigninPromiseIfNeeded = function () {\n        if (!this.signin_requested) {\n            return;\n        }\n        if (this.signinDonePromise && !this.signinDonePromise.done) {\n            return;\n        }\n        var _a = flat_promise(), promise = _a.promise, resolve = _a.resolve, _ = _a.reject;\n        promise.done = false;\n        var setDone = function () {\n            promise.done = true;\n        };\n        promise.then(setDone)[\"catch\"](setDone);\n        this.signinDonePromise = promise;\n        this._signinDoneResolve = resolve;\n    };\n    return UserFacade;\n}(dispatcher));\n/* harmony default export */ var user = (user_UserFacade);\n\n// CONCATENATED MODULE: ./src/core/pusher.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar pusher_Pusher = (function () {\n    function Pusher(app_key, options) {\n        var _this = this;\n        checkAppKey(app_key);\n        options = options || {};\n        if (!options.cluster && !(options.wsHost || options.httpHost)) {\n            var suffix = url_store.buildLogSuffix('javascriptQuickStart');\n            logger.warn(\"You should always specify a cluster when connecting. \" + suffix);\n        }\n        if ('disableStats' in options) {\n            logger.warn('The disableStats option is deprecated in favor of enableStats');\n        }\n        this.key = app_key;\n        this.config = getConfig(options, this);\n        this.channels = factory.createChannels();\n        this.global_emitter = new dispatcher();\n        this.sessionID = runtime.randomInt(1000000000);\n        this.timeline = new timeline_timeline(this.key, this.sessionID, {\n            cluster: this.config.cluster,\n            features: Pusher.getClientFeatures(),\n            params: this.config.timelineParams || {},\n            limit: 50,\n            level: timeline_level.INFO,\n            version: defaults.VERSION\n        });\n        if (this.config.enableStats) {\n            this.timelineSender = factory.createTimelineSender(this.timeline, {\n                host: this.config.statsHost,\n                path: '/timeline/v2/' + runtime.TimelineTransport.name\n            });\n        }\n        var getStrategy = function (options) {\n            return runtime.getDefaultStrategy(_this.config, options, strategy_builder_defineTransport);\n        };\n        this.connection = factory.createConnectionManager(this.key, {\n            getStrategy: getStrategy,\n            timeline: this.timeline,\n            activityTimeout: this.config.activityTimeout,\n            pongTimeout: this.config.pongTimeout,\n            unavailableTimeout: this.config.unavailableTimeout,\n            useTLS: Boolean(this.config.useTLS)\n        });\n        this.connection.bind('connected', function () {\n            _this.subscribeAll();\n            if (_this.timelineSender) {\n                _this.timelineSender.send(_this.connection.isUsingTLS());\n            }\n        });\n        this.connection.bind('message', function (event) {\n            var eventName = event.event;\n            var internal = eventName.indexOf('pusher_internal:') === 0;\n            if (event.channel) {\n                var channel = _this.channel(event.channel);\n                if (channel) {\n                    channel.handleEvent(event);\n                }\n            }\n            if (!internal) {\n                _this.global_emitter.emit(event.event, event.data);\n            }\n        });\n        this.connection.bind('connecting', function () {\n            _this.channels.disconnect();\n        });\n        this.connection.bind('disconnected', function () {\n            _this.channels.disconnect();\n        });\n        this.connection.bind('error', function (err) {\n            logger.warn(err);\n        });\n        Pusher.instances.push(this);\n        this.timeline.info({ instances: Pusher.instances.length });\n        this.user = new user(this);\n        if (Pusher.isReady) {\n            this.connect();\n        }\n    }\n    Pusher.ready = function () {\n        Pusher.isReady = true;\n        for (var i = 0, l = Pusher.instances.length; i < l; i++) {\n            Pusher.instances[i].connect();\n        }\n    };\n    Pusher.getClientFeatures = function () {\n        return keys(filterObject({ ws: runtime.Transports.ws }, function (t) {\n            return t.isSupported({});\n        }));\n    };\n    Pusher.prototype.channel = function (name) {\n        return this.channels.find(name);\n    };\n    Pusher.prototype.allChannels = function () {\n        return this.channels.all();\n    };\n    Pusher.prototype.connect = function () {\n        this.connection.connect();\n        if (this.timelineSender) {\n            if (!this.timelineSenderTimer) {\n                var usingTLS = this.connection.isUsingTLS();\n                var timelineSender = this.timelineSender;\n                this.timelineSenderTimer = new PeriodicTimer(60000, function () {\n                    timelineSender.send(usingTLS);\n                });\n            }\n        }\n    };\n    Pusher.prototype.disconnect = function () {\n        this.connection.disconnect();\n        if (this.timelineSenderTimer) {\n            this.timelineSenderTimer.ensureAborted();\n            this.timelineSenderTimer = null;\n        }\n    };\n    Pusher.prototype.bind = function (event_name, callback, context) {\n        this.global_emitter.bind(event_name, callback, context);\n        return this;\n    };\n    Pusher.prototype.unbind = function (event_name, callback, context) {\n        this.global_emitter.unbind(event_name, callback, context);\n        return this;\n    };\n    Pusher.prototype.bind_global = function (callback) {\n        this.global_emitter.bind_global(callback);\n        return this;\n    };\n    Pusher.prototype.unbind_global = function (callback) {\n        this.global_emitter.unbind_global(callback);\n        return this;\n    };\n    Pusher.prototype.unbind_all = function (callback) {\n        this.global_emitter.unbind_all();\n        return this;\n    };\n    Pusher.prototype.subscribeAll = function () {\n        var channelName;\n        for (channelName in this.channels.channels) {\n            if (this.channels.channels.hasOwnProperty(channelName)) {\n                this.subscribe(channelName);\n            }\n        }\n    };\n    Pusher.prototype.subscribe = function (channel_name) {\n        var channel = this.channels.add(channel_name, this);\n        if (channel.subscriptionPending && channel.subscriptionCancelled) {\n            channel.reinstateSubscription();\n        }\n        else if (!channel.subscriptionPending &&\n            this.connection.state === 'connected') {\n            channel.subscribe();\n        }\n        return channel;\n    };\n    Pusher.prototype.unsubscribe = function (channel_name) {\n        var channel = this.channels.find(channel_name);\n        if (channel && channel.subscriptionPending) {\n            channel.cancelSubscription();\n        }\n        else {\n            channel = this.channels.remove(channel_name);\n            if (channel && channel.subscribed) {\n                channel.unsubscribe();\n            }\n        }\n    };\n    Pusher.prototype.send_event = function (event_name, data, channel) {\n        return this.connection.send_event(event_name, data, channel);\n    };\n    Pusher.prototype.shouldUseTLS = function () {\n        return this.config.useTLS;\n    };\n    Pusher.prototype.signin = function () {\n        this.user.signin();\n    };\n    Pusher.instances = [];\n    Pusher.isReady = false;\n    Pusher.logToConsole = false;\n    Pusher.Runtime = runtime;\n    Pusher.ScriptReceivers = runtime.ScriptReceivers;\n    Pusher.DependenciesReceivers = runtime.DependenciesReceivers;\n    Pusher.auth_callbacks = runtime.auth_callbacks;\n    return Pusher;\n}());\n/* harmony default export */ var core_pusher = __webpack_exports__[\"default\"] = (pusher_Pusher);\nfunction checkAppKey(key) {\n    if (key === null || key === undefined) {\n        throw 'You must pass your app key when you instantiate Pusher.';\n    }\n}\nruntime.setup(pusher_Pusher);\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=pusher.js.map","import React, { useEffect, useRef, useState, useContext, useReducer, useCallback } from 'react';\nimport Pusher from 'pusher-js';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nvar has = Object.prototype.hasOwnProperty;\n\nfunction find(iter, tar, key) {\n\tfor (key of iter.keys()) {\n\t\tif (dequal(key, tar)) return key;\n\t}\n}\n\nfunction dequal(foo, bar) {\n\tvar ctor, len, tmp;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ctor === Set) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len;\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!bar.has(tmp)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === Map) {\n\t\t\tif (foo.size !== bar.size) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tfor (len of foo) {\n\t\t\t\ttmp = len[0];\n\t\t\t\tif (tmp && typeof tmp === 'object') {\n\t\t\t\t\ttmp = find(bar, tmp);\n\t\t\t\t\tif (!tmp) return false;\n\t\t\t\t}\n\t\t\t\tif (!dequal(len[1], bar.get(tmp))) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (ctor === ArrayBuffer) {\n\t\t\tfoo = new Uint8Array(foo);\n\t\t\tbar = new Uint8Array(bar);\n\t\t} else if (ctor === DataView) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo.getInt8(len) === bar.getInt8(len));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (ArrayBuffer.isView(foo)) {\n\t\t\tif ((len=foo.byteLength) === bar.byteLength) {\n\t\t\t\twhile (len-- && foo[len] === bar[len]);\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n\n// context setup\nvar PusherContext = React.createContext({});\nvar __PusherContext = PusherContext;\n/**\n * Provider that creates your pusher instance and provides it to child hooks throughout your app.\n * Note, you can pass in value={{}} as a prop if you'd like to override the pusher client passed.\n * This is handy when simulating pusher locally, or for testing.\n * @param props Config for Pusher client\n */\nvar CorePusherProvider = function (_a) {\n    var clientKey = _a.clientKey, cluster = _a.cluster, triggerEndpoint = _a.triggerEndpoint, _b = _a.defer, defer = _b === void 0 ? false : _b, children = _a.children, _PusherRuntime = _a._PusherRuntime, props = __rest(_a, [\"clientKey\", \"cluster\", \"triggerEndpoint\", \"defer\", \"children\", \"_PusherRuntime\"]);\n    // errors when required props are not passed.\n    useEffect(function () {\n        if (!clientKey)\n            console.error(\"A client key is required for pusher\");\n        if (!cluster)\n            console.error(\"A cluster is required for pusher\");\n    }, [clientKey, cluster]);\n    var config = __assign({ cluster: cluster }, props);\n    // track config for comparison\n    var previousConfig = useRef(props);\n    useEffect(function () {\n        previousConfig.current = props;\n    });\n    var _c = useState(), client = _c[0], setClient = _c[1];\n    useEffect(function () {\n        // Skip creation of client if deferring, a value prop is passed, or config props are the same.\n        if (!_PusherRuntime ||\n            defer ||\n            props.value ||\n            (dequal(previousConfig.current, props) && client !== undefined)) {\n            return;\n        }\n        // @ts-ignore\n        setClient(new _PusherRuntime(clientKey, config));\n    }, [client, clientKey, props, defer]);\n    return (React.createElement(PusherContext.Provider, __assign({ value: {\n            client: client,\n            triggerEndpoint: triggerEndpoint,\n        }, children: children }, props)));\n};\n\n/**\n * Provides access to the pusher client instance.\n *\n * @returns a `MutableRefObject<Pusher|undefined>`. The instance is held by a `useRef()` hook.\n * @example\n * ```javascript\n * const { client } = usePusher();\n * client.current.subscribe('my-channel');\n * ```\n */\nfunction usePusher() {\n    var context = useContext(__PusherContext);\n    useEffect(function () {\n        if (!Object.keys(context).length)\n            console.warn(NOT_IN_CONTEXT_WARNING);\n    }, [context]);\n    return context;\n}\nvar NOT_IN_CONTEXT_WARNING = \"No Pusher context. Did you forget to wrap your app in a <PusherProvider />?\";\n\n/**\n * Subscribe to a channel\n *\n * @param channelName The name of the channel you want to subscribe to.\n * @typeparam Type of channel you're subscribing to. Can be one of `Channel` or `PresenceChannel` from `pusher-js`.\n * @returns Instance of the channel you just subscribed to.\n *\n * @example\n * ```javascript\n * const channel = useChannel(\"my-channel\")\n * channel.bind('some-event', () => {})\n * ```\n */\nvar NO_CHANNEL_NAME_WARNING = \"No channel name passed to useChannel. No channel has been subscribed to.\";\nfunction useChannel(channelName) {\n    var client = usePusher().client;\n    var _a = useState(), channel = _a[0], setChannel = _a[1];\n    useEffect(function () {\n        /** Return early if there's no client */\n        if (!client)\n            return;\n        /** Return early and warn if there's no channel */\n        if (!channelName) {\n            console.warn(NO_CHANNEL_NAME_WARNING);\n            return;\n        }\n        /** Subscribe to channel and set it in state */\n        var pusherChannel = client.subscribe(channelName);\n        setChannel(pusherChannel);\n        /** Cleanup on unmount/re-render */\n        return function () { return client === null || client === void 0 ? void 0 : client.unsubscribe(channelName); };\n    }, [channelName, client]);\n    /** Return the channel for use. */\n    return channel;\n}\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar NODE_ENV = process.env.NODE_ENV;\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nvar invariant_1 = invariant;\n\n/** Presence channel reducer to keep track of state */\nvar SET_STATE = \"set-state\";\nvar ADD_MEMBER = \"add-member\";\nvar REMOVE_MEMBER = \"remove-member\";\nvar presenceChannelReducer = function (state, _a) {\n    var _b;\n    var type = _a.type, payload = _a.payload;\n    switch (type) {\n        /** Generic setState */\n        case SET_STATE:\n            return __assign(__assign({}, state), payload);\n        /** Member added */\n        case ADD_MEMBER:\n            var _c = payload, addedMemberId = _c.id, info = _c.info;\n            return __assign(__assign({}, state), { count: state.count + 1, members: __assign(__assign({}, state.members), (_b = {}, _b[addedMemberId] = info, _b)) });\n        /** Member removed */\n        case REMOVE_MEMBER:\n            var removedMemberId = payload.id;\n            var members = __assign({}, state.members);\n            delete members[removedMemberId];\n            return __assign(__assign({}, state), { count: state.count - 1, members: __assign({}, members) });\n    }\n};\nfunction usePresenceChannel(channelName) {\n    // errors for missing arguments\n    if (channelName) {\n        invariant_1(channelName.includes(\"presence-\"), \"Presence channels should use prefix 'presence-' in their name. Use the useChannel hook instead.\");\n    }\n    /** Store internal channel state */\n    var _a = useReducer(presenceChannelReducer, {\n        members: {},\n        me: undefined,\n        myID: undefined,\n        count: 0,\n    }), state = _a[0], dispatch = _a[1];\n    // bind and unbind member events events on our channel\n    var channel = useChannel(channelName);\n    useEffect(function () {\n        if (channel) {\n            // Get membership info on successful subscription\n            var handleSubscriptionSuccess_1 = function (members) {\n                dispatch({\n                    type: SET_STATE,\n                    payload: {\n                        members: members.members,\n                        myID: members.myID,\n                        me: members.me,\n                        count: Object.keys(members.members).length,\n                    },\n                });\n            };\n            // Add member to the members object\n            var handleAdd_1 = function (member) {\n                dispatch({\n                    type: ADD_MEMBER,\n                    payload: member,\n                });\n            };\n            // Remove member from the members object\n            var handleRemove_1 = function (member) {\n                dispatch({\n                    type: REMOVE_MEMBER,\n                    payload: member,\n                });\n            };\n            // bind to all member addition/removal events\n            channel.bind(\"pusher:subscription_succeeded\", handleSubscriptionSuccess_1);\n            channel.bind(\"pusher:member_added\", handleAdd_1);\n            channel.bind(\"pusher:member_removed\", handleRemove_1);\n            // cleanup\n            return function () {\n                channel.unbind(\"pusher:subscription_succeeded\", handleSubscriptionSuccess_1);\n                channel.unbind(\"pusher:member_added\", handleAdd_1);\n                channel.unbind(\"pusher:member_removed\", handleRemove_1);\n            };\n        }\n        // to make typescript happy.\n        return function () { };\n    }, [channel]);\n    return __assign({ channel: channel }, state);\n}\n\n/**\n * Subscribes to a channel event and registers a callback.\n * @param channel Pusher channel to bind to\n * @param eventName Name of event to bind to\n * @param callback Callback to call on a new event\n */\nfunction useEvent(channel, eventName, callback) {\n    // error when required arguments aren't passed.\n    invariant_1(eventName, \"Must supply eventName and callback to onEvent\");\n    invariant_1(callback, \"Must supply callback to onEvent\");\n    // bind and unbind events whenever the channel, eventName or callback changes.\n    useEffect(function () {\n        if (channel === undefined) {\n            return;\n        }\n        else\n            channel.bind(eventName, callback);\n        return function () {\n            channel.unbind(eventName, callback);\n        };\n    }, [channel, eventName, callback]);\n}\n\n/**\n *\n * @param channel the channel you'd like to trigger clientEvents on. Get this from [[useChannel]] or [[usePresenceChannel]].\n * @typeparam TData shape of the data you're sending with the event.\n * @returns A memoized trigger function that will perform client events on the channel.\n * @example\n * ```javascript\n * const channel = useChannel('my-channel');\n * const trigger = useClientTrigger(channel)\n *\n * const handleClick = () => trigger('some-client-event', {});\n * ```\n */\nfunction useClientTrigger(channel) {\n    channel &&\n        invariant_1(channel.name.match(/(private-|presence-)/gi), \"Channel provided to useClientTrigger wasn't private or presence channel. Client events only work on these types of channels.\");\n    // memoize trigger so it's not being created every render\n    var trigger = useCallback(function (eventName, data) {\n        invariant_1(eventName, \"Must pass event name to trigger a client event.\");\n        channel && channel.trigger(eventName, data);\n    }, [channel]);\n    return trigger;\n}\n\n/**\n * Hook to provide a trigger function that calls the server defined in `PusherProviderProps.triggerEndpoint` using `fetch`.\n * Any `auth?.headers` in the config object will be passed with the `fetch` call.\n *\n * @param channelName name of channel to call trigger on\n * @typeparam TData shape of the data you're sending with the event\n *\n * @example\n * ```typescript\n * const trigger = useTrigger<{message: string}>('my-channel');\n * trigger('my-event', {message: 'hello'});\n * ```\n */\nfunction useTrigger(channelName) {\n    var _a = usePusher(), client = _a.client, triggerEndpoint = _a.triggerEndpoint;\n    // you can't use this if you haven't supplied a triggerEndpoint.\n    invariant_1(triggerEndpoint, \"No trigger endpoint specified to <PusherProvider />. Cannot trigger an event.\");\n    // subscribe to the channel we'll be triggering to.\n    useChannel(channelName);\n    // memoized trigger function to return\n    var trigger = useCallback(function (eventName, data) {\n        var _a;\n        var fetchOptions = {\n            method: \"POST\",\n            body: JSON.stringify({ channelName: channelName, eventName: eventName, data: data })\n        };\n        if (client && ((_a = client.config) === null || _a === void 0 ? void 0 : _a.auth)) {\n            fetchOptions.headers = client.config.auth.headers;\n        }\n        else {\n            console.warn(NO_AUTH_HEADERS_WARNING);\n        }\n        return fetch(triggerEndpoint, fetchOptions);\n    }, [client, triggerEndpoint, channelName]);\n    return trigger;\n}\nvar NO_AUTH_HEADERS_WARNING = \"No auth parameters supplied to <PusherProvider />. Your events will be unauthenticated.\";\n\n/** Wrapper around the core PusherProvider that passes in the Pusher lib */\nvar PusherProvider = function (props) { return (React.createElement(CorePusherProvider, __assign({ _PusherRuntime: Pusher }, props))); };\n\nexport { ADD_MEMBER, NOT_IN_CONTEXT_WARNING, NO_AUTH_HEADERS_WARNING, NO_CHANNEL_NAME_WARNING, PusherProvider, REMOVE_MEMBER, SET_STATE, __PusherContext, presenceChannelReducer, useChannel, useClientTrigger, useEvent, usePresenceChannel, usePusher, useTrigger };\n//# sourceMappingURL=index.es.js.map\n","import { StringMap } from '../types/core'\n\nexport const COGNITO_HEADERS = {\n  'Content-Type': 'application/json',\n} as StringMap\n\nexport const SANDBOX_CLIENT_ID = 'SBOX'\nexport const SANDBOX_CLIENT_NAME = 'Sandbox Estates SBOX'\nexport const SANDBOX_CLIENT = {\n  status: 'Active',\n  customerId: SANDBOX_CLIENT_ID,\n  customerName: SANDBOX_CLIENT_NAME,\n}\n\nexport const COGNITO_GROUP_DEVELOPER_EDITION = 'AgencyCloudDeveloperEdition'\n\nexport const URLS: { [s: string]: string } = {\n  DEPLOYMENT_SERVICE_HOST: process.env.DEPLOYMENT_SERVICE_HOST,\n}\n","import { InputGroupProps } from '@reapit/elements'\n\nexport interface AppEditFormSchema {\n  name: string\n  categoryIds: string\n  telephone: string\n  supportEmail: string\n  launchUri: string\n  authFlow: string\n  iconImageUrl: string\n  screen5ImageUrl: string\n  screen4ImageUrl: string\n  screen3ImageUrl: string\n  screen2ImageUrl: string\n  screen1ImageUrl: string\n  homePage: string\n  summary: string\n  description: string\n  termsAndConditionsUrl: string\n  developerId: string\n  scopes: string\n  redirectUris: string\n  signoutUris: string\n  limitToClientIds: string\n  desktopIntegrationTypeIds: string\n  isFree: boolean\n  privacyPolicyUrl: string\n  pricingUrl: string\n  products: string\n  isListed: boolean\n  isAgencyCloudIntegrated: boolean\n  isPrivateApp: boolean\n  deletionProtection: boolean\n  videoUrl1: string\n  videoUrl2: string\n  launchWindowSizeX: number\n  launchWindowSizeY: number\n}\n\nexport const defaultValues: AppEditFormSchema = {\n  categoryIds: '',\n  authFlow: '',\n  screen5ImageUrl: '',\n  screen4ImageUrl: '',\n  screen3ImageUrl: '',\n  screen2ImageUrl: '',\n  screen1ImageUrl: '',\n  name: '',\n  telephone: '',\n  supportEmail: '',\n  launchUri: '',\n  iconImageUrl: '',\n  homePage: '',\n  description: '',\n  summary: '',\n  developerId: '',\n  scopes: '',\n  redirectUris: '',\n  signoutUris: '',\n  limitToClientIds: '',\n  desktopIntegrationTypeIds: '',\n  isFree: false,\n  privacyPolicyUrl: '',\n  pricingUrl: '',\n  termsAndConditionsUrl: '',\n  products: '',\n  isListed: false,\n  isAgencyCloudIntegrated: false,\n  isPrivateApp: false,\n  deletionProtection: false,\n  videoUrl1: '',\n  videoUrl2: '',\n  launchWindowSizeX: 950,\n  launchWindowSizeY: 750,\n}\n\nexport const formFields: Record<keyof AppEditFormSchema, InputGroupProps & { name: string }> = {\n  name: {\n    name: 'name',\n    label: 'Name',\n    errorMessage: 'Should only contain letters and number',\n    placeholder: 'The name of your app as it will appear to users',\n    type: 'text',\n  },\n  categoryIds: {\n    name: 'categoryIds',\n    label: 'App Categories',\n  },\n  supportEmail: {\n    name: 'supportEmail',\n    label: 'Support email',\n    placeholder: 'Email for customers to contact you',\n    type: 'email',\n  },\n  telephone: {\n    name: 'telephone',\n    label: 'Telephone',\n    placeholder: 'Number for customers to contact you',\n    errorMessage: 'Invalid Telephone number',\n    type: 'text',\n  },\n  homePage: {\n    name: 'homePage',\n    label: 'Home page',\n    placeholder: 'Your company homepage. HTTP:// or HTTPS://',\n    errorMessage: 'Invalid Home Page URL',\n    type: 'text',\n  },\n  launchUri: {\n    name: 'launchUri',\n    label: 'Launch URI',\n    placeholder: 'HTTPS or HTTP only for localhost/dev.reapit',\n    errorMessage: 'Invalid Launch URI',\n    type: 'text',\n  },\n  summary: {\n    name: 'summary',\n    label: 'Summary',\n    placeholder: 'A short strapline summary for your app listing. Must be between 50 and 150 characters',\n  },\n  description: {\n    name: 'description',\n    label: 'Description',\n    placeholder:\n      'A detailed description for your app listing. Must be between 150 and 20000 characters. Please note: As this field supports HTML, special characters will be included in the character count',\n  },\n  termsAndConditionsUrl: {\n    name: 'termsAndConditionsUrl',\n    label: 'Terms and Conditions',\n    placeholder: 'URL to link to your Terms and Conditions',\n    errorMessage: 'Invalid URL - has to be https://',\n    type: 'text',\n  },\n  privacyPolicyUrl: {\n    name: 'privacyPolicyUrl',\n    label: 'Privacy Policy',\n    placeholder: 'URL to link to your Privacy Policy',\n    errorMessage: 'Invalid URL - has to be https://',\n    type: 'text',\n  },\n  pricingUrl: {\n    name: 'pricingUrl',\n    label: 'Pricing Info',\n    placeholder: 'URL to link to your Pricing Info',\n    errorMessage: 'Invalid URL - has to be https://',\n    type: 'text',\n  },\n  isFree: {\n    name: 'isFree',\n    label: 'This application is free',\n    type: 'checkbox',\n  },\n  deletionProtection: {\n    name: 'deletionProtection',\n    label: 'Check to prevent app from being deleted',\n    type: 'checkbox',\n  },\n  authFlow: {\n    name: 'authFlow',\n    label: 'AUTHENTICATION FLOW',\n  },\n  redirectUris: {\n    name: 'redirectUris',\n    label: 'Redirect URI(s)',\n    placeholder: 'Enter your Redirect URI(s)',\n    errorMessage: 'Invalid redirect uri(s)',\n    type: 'text',\n  },\n  signoutUris: {\n    name: 'signoutUris',\n    label: 'Sign Out URI(s)',\n    placeholder: 'Enter your Sign Out URI(s)',\n    errorMessage: 'Invalid sign out uri(s)',\n    type: 'text',\n  },\n  iconImageUrl: {\n    name: 'iconImageUrl',\n    label: 'Upload Icon Image',\n    type: 'file',\n  },\n  screen1ImageUrl: {\n    name: 'screen1ImageUrl',\n    label: 'Upload Featured Image',\n    type: 'file',\n  },\n  screen2ImageUrl: {\n    name: 'screen2ImageUrl',\n    label: 'Upload Other Listing Image',\n    type: 'file',\n  },\n  screen3ImageUrl: {\n    name: 'screen3ImageUrl',\n    label: 'Upload Other Listing Image',\n    type: 'file',\n  },\n  screen4ImageUrl: {\n    name: 'screen4ImageUrl',\n    label: 'Upload Other Listing Image',\n    type: 'file',\n  },\n  screen5ImageUrl: {\n    name: 'screen5ImageUrl',\n    label: 'Upload Other Listing Image',\n    type: 'file',\n  },\n  scopes: {\n    name: 'scopes',\n    label: 'Permissions',\n    errorMessage: 'At least one Permission is required',\n  },\n  limitToClientIds: {\n    name: 'limitToClientIds',\n    label: 'Private App Client Ids',\n    placeholder: 'Please enter the Customer ID. For multiple Customer ID’s, please separate using a comma',\n    errorMessage: 'Invalid Customer ID(s). Each Customer ID should be between 3 and 15 characters.',\n    type: 'text',\n  },\n  desktopIntegrationTypeIds: {\n    name: 'desktopIntegrationTypeIds',\n    label: 'Integration Type',\n    placeholder: 'Please select',\n  },\n  isListed: {\n    name: 'isListed',\n    label: 'AppMarket Listed',\n  },\n  isAgencyCloudIntegrated: {\n    name: 'isAgencyCloudIntegrated',\n    label: 'AgencyCloud Integration',\n  },\n  isPrivateApp: {\n    name: 'isPrivateApp',\n    label: 'Private App',\n  },\n  developerId: {\n    name: 'developerId',\n    label: 'Developer ID',\n  },\n  products: {\n    name: 'products',\n    label: 'Reapit Products',\n  },\n  videoUrl1: {\n    name: 'videoUrl1',\n    label: 'Getting Started Video URL',\n    placeholder: 'YouTube embed preferred or any https hosted video',\n    type: 'text',\n  },\n  videoUrl2: {\n    name: 'videoUrl2',\n    label: 'Why Use Us Video URL',\n    placeholder: 'YouTube embed preferred or any https hosted video',\n    type: 'text',\n  },\n  launchWindowSizeX: {\n    name: 'launchWindowSizeX',\n    label: 'Default App Window Width',\n    placeholder: 'Width of window your app will be launched in AgencyCloud',\n    type: 'text',\n  },\n  launchWindowSizeY: {\n    name: 'launchWindowSizeY',\n    label: 'Default App Window Height',\n    placeholder: 'Height of window your app will be launched in AgencyCloud',\n    type: 'text',\n  },\n}\n","import { IconNames } from '@reapit/elements'\n\nexport enum AppNewStepId {\n  'applicationTypeStep' = 'applicationTypeStep',\n  'webServicesStep' = 'webServicesStep',\n  'reapitConnectStep' = 'reapitConnectStep',\n  'agencyCloudStep' = 'agencyCloudStep',\n  'dataFeedStep' = 'dataFeedStep',\n  'serverSideStep' = 'serverSideStep',\n  'clientSideStep' = 'clientSideStep',\n  'websiteFeedStep' = 'websiteFeedStep',\n  'permissionsStep' = 'permissionsStep',\n  'externalAppStep' = 'externalAppStep',\n  'rcRedirectsStep' = 'rcRedirectsStep',\n}\n\nexport type AppNewSteps = AppNewStepId[]\n\nexport type AppAuthFlow = 'clientCredentials' | 'authorisationCode'\n\nexport interface AppNewWizardStep {\n  headingText: string\n  headerText: string\n  iconName: IconNames\n  permissions?: string[]\n}\n\nexport type AppNewWizardSteps = { [key in AppNewStepId]: AppNewWizardStep }\n\nexport const appWizardSteps: AppNewWizardSteps = {\n  [AppNewStepId.applicationTypeStep]: {\n    headingText: 'What do you want to do today?',\n    headerText:\n      'First tell us about the kind of app or integration you are building to ensure we get you authenticated correctly. By selecting an option, relevant documentation and links will appear on the right hand side of the page before progressing.',\n    iconName: 'userInfographic',\n  },\n  [AppNewStepId.webServicesStep]: {\n    headingText: 'What kind of app are you building?',\n    headerText:\n      'Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.',\n    iconName: 'userDeviceInfographic',\n  },\n  [AppNewStepId.reapitConnectStep]: {\n    headingText: 'What kind of app are you building?',\n    headerText:\n      'Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.',\n    iconName: 'userDeviceInfographic',\n  },\n  [AppNewStepId.externalAppStep]: {\n    headingText: 'What kind of app are you building?',\n    headerText:\n      'Do you intend your app to be client or server-side authenticated? If you are not sure, select an option for relevant documentation and links on the right hand side of the page.',\n    iconName: 'userDeviceInfographic',\n  },\n  [AppNewStepId.agencyCloudStep]: {\n    headingText: 'Authentication',\n    headerText:\n      'Please supply at least one redirect and logout uri. A non-https localhost or dev.reapit uri is acceptable for quick start development.',\n    iconName: 'userAuthInfographic',\n  },\n  [AppNewStepId.dataFeedStep]: {\n    headingText: 'Permissions',\n    headerText:\n      'Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.',\n    iconName: 'userAuthInfographic',\n  },\n  [AppNewStepId.serverSideStep]: {\n    headingText: 'Permissions',\n    headerText:\n      'Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.',\n    iconName: 'userAuthInfographic',\n  },\n  [AppNewStepId.clientSideStep]: {\n    headingText: 'Authentication',\n    headerText:\n      'Please supply at least one redirect and logout uri. A non-https localhost or dev.reapit uri is acceptable for quick start development.',\n    iconName: 'userAuthInfographic',\n  },\n  [AppNewStepId.rcRedirectsStep]: {\n    headingText: 'Authentication',\n    headerText:\n      'Please supply at least one redirect and logout uri. A non-https localhost or dev.reapit uri is acceptable for quick start development.',\n    iconName: 'userAuthInfographic',\n  },\n  [AppNewStepId.websiteFeedStep]: {\n    headingText: 'Permissions',\n    headerText:\n      'Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.',\n    iconName: 'userAuthInfographic',\n    permissions: ['agencyCloud/properties.read', 'agencyCloud/offices.read', 'agencyCloud/negotiators.read'],\n  },\n  [AppNewStepId.permissionsStep]: {\n    headingText: 'Permissions',\n    headerText:\n      'Please supply relevant read/write, entity specific permissions for your application. You can add or remove these later and for server side apps only, at least one permission is required.',\n    iconName: 'userAuthInfographic',\n  },\n}\n\nexport const initialSteps: AppNewSteps = [AppNewStepId.applicationTypeStep]\n\nexport const getAppWizardStep = (appNewStepId: AppNewStepId | null): AppNewWizardStep => {\n  return appWizardSteps[appNewStepId ?? AppNewStepId.applicationTypeStep]\n}\n","import { AppAuthFlow } from '../new/config'\nimport { AppNewStepId } from '../new/config'\n\nexport const defaultAppTabsState = {\n  isCompletingListing: false,\n  isAgencyCloudIntegrated: false,\n  isListed: false,\n}\n\nexport const defaultAppWizardState = {\n  currentStep: AppNewStepId.applicationTypeStep,\n  nextStep: null,\n  prevStep: null,\n  stepHistory: [AppNewStepId.applicationTypeStep],\n  authFlow: 'clientCredentials' as AppAuthFlow,\n  lastStep: false,\n}\n\nexport const defaultAppSavingParams = {\n  isListed: false,\n  isRevalidating: false,\n  isSaving: false,\n}\n","import { Marketplace } from '@reapit/foundations-ts-definitions'\nimport { Dispatch, SetStateAction } from 'react'\nimport { AppEditFormSchema, defaultValues } from '../edit/form-schema/form-fields'\n\nexport const formatAppFields = (appDetail: Marketplace.AppDetailModel | null, developerId?: string | null) => {\n  if (appDetail && developerId) {\n    const { media, scopes } = appDetail\n    const icon = (media ?? []).filter(({ order }) => order === 0)[0]\n\n    const images = (media ?? [])\n      .filter((item) => item.type === 'image')\n      .reduce(\n        (formValuePartial: Partial<AppEditFormSchema>, image: Marketplace.MediaModel, index: number) => ({\n          ...formValuePartial,\n          [`screen${index + 1}ImageUrl`]: image?.uri ?? '',\n        }),\n        {\n          screen1ImageUrl: '',\n        },\n      )\n\n    const videos = (media ?? [])\n      .filter((item) => item.type === 'video')\n      .reduce(\n        (formValuePartial: Partial<AppEditFormSchema>, image: Marketplace.MediaModel, index: number) => ({\n          ...formValuePartial,\n          [`videoUrl${index + 1}`]: image?.uri ?? '',\n        }),\n        {\n          videoUrl1: '',\n        },\n      )\n\n    const formValues: AppEditFormSchema = {\n      ...defaultValues,\n      developerId,\n      name: appDetail.name ?? '',\n      authFlow: appDetail.authFlow ?? '',\n      description: appDetail.description ?? '',\n      homePage: appDetail.homePage ?? '',\n      telephone: appDetail.telephone ?? '',\n      supportEmail: appDetail.supportEmail ?? '',\n      summary: appDetail.summary ?? '',\n      launchUri: appDetail.launchUri ?? '',\n      isListed: appDetail.isListed ?? false,\n      isAgencyCloudIntegrated: !appDetail.isDirectApi,\n      isFree: appDetail.isFree ?? false,\n      privacyPolicyUrl: appDetail.privacyPolicyUrl ?? '',\n      pricingUrl: appDetail.pricingUrl ?? '',\n      termsAndConditionsUrl: appDetail.termsAndConditionsUrl ?? '',\n      scopes: scopes?.map((item) => item.name ?? '').join(',') ?? '',\n      redirectUris: appDetail.redirectUris?.join(',') ?? '',\n      signoutUris: appDetail.signoutUris?.join(',') ?? '',\n      limitToClientIds: appDetail.limitToClientIds?.join(',') ?? '',\n      isPrivateApp: Boolean(appDetail.limitToClientIds?.length),\n      categoryIds: appDetail.categories?.map((item) => item.id ?? '').join(',') ?? '',\n      desktopIntegrationTypeIds: appDetail.desktopIntegrationTypeIds?.join(',') ?? '',\n      products: appDetail.products?.join(',') ?? '',\n      iconImageUrl: icon?.uri ?? '',\n      deletionProtection: appDetail.deletionProtection ?? false,\n      launchWindowSizeX: appDetail.launchWindowSizeX ?? defaultValues.launchWindowSizeX,\n      launchWindowSizeY: appDetail.launchWindowSizeY ?? defaultValues.launchWindowSizeY,\n      ...images,\n      ...videos,\n    }\n\n    return formValues\n  }\n}\n\nexport const handleSetDefaultFormValues =\n  (\n    setAppEditForm: Dispatch<SetStateAction<AppEditFormSchema>>,\n    appDetail: Marketplace.AppDetailModel | null,\n    developerId?: string | null,\n  ) =>\n  () => {\n    const formValues = formatAppFields(appDetail, developerId)\n\n    if (formValues) {\n      setAppEditForm(formValues)\n    }\n  }\n","import { PipelineModelInterface } from '@reapit/foundations-ts-definitions'\nimport { Dispatch, SetStateAction } from 'react'\n\nexport const handleSetInitialPipeline =\n  (\n    appPipeline: PipelineModelInterface | null,\n    setAppPipeline: Dispatch<SetStateAction<PipelineModelInterface | null>>,\n  ) =>\n  () => {\n    setAppPipeline(appPipeline)\n  }\n","import { Marketplace, PipelineModelInterface } from '@reapit/foundations-ts-definitions'\nimport { useReapitGet } from '@reapit/use-reapit-data'\nimport React, {\n  useState,\n  Dispatch,\n  SetStateAction,\n  FC,\n  createContext,\n  useContext,\n  useEffect,\n  PropsWithChildren,\n} from 'react'\nimport { GetActionNames, getActions } from '@reapit/use-reapit-data'\nimport { reapitConnectBrowserSession } from '../../../core/connect-session'\nimport { AppAuthFlow, AppNewStepId } from '../new/config'\nimport { useReapitConnect } from '@reapit/connect-session'\nimport { AppEditFormSchema, defaultValues } from '../edit/form-schema/form-fields'\nimport { defaultAppSavingParams, defaultAppWizardState } from './defaults'\nimport { handleSetDefaultFormValues } from '../utils/handle-default-form-values'\nimport { FieldNamesMarkedBoolean } from 'react-hook-form'\nimport { handleSetInitialPipeline } from '../utils/handle-pipeline-event'\nimport { useChannel } from '@harelpls/use-pusher'\n\nexport interface AppSavingParams {\n  isSaving: boolean\n  isRevalidating: boolean\n  isListed: boolean\n}\n\nexport interface AppWizardState {\n  currentStep: AppNewStepId | null\n  nextStep: AppNewStepId | null\n  prevStep: AppNewStepId | null\n  stepHistory: (AppNewStepId | null)[]\n  authFlow: AppAuthFlow\n  lastStep: boolean\n}\n\nexport interface AppsDataState {\n  apps: Marketplace.AppSummaryModelPagedResult | null\n  appsRefreshing: boolean\n  appsLoading: boolean\n  appDetail: Marketplace.AppDetailModel | null\n  appDetailRefreshing: boolean\n  appRevisions: Marketplace.AppRevisionModelPagedResult | null\n  appRevisionsLoading: boolean\n  appRevisionsRefreshing: boolean\n  appDetailLoading: boolean\n  appsRefresh: (queryParams?: Object | undefined) => void\n  appsDetailRefresh: (queryParams?: Object | undefined) => void\n  appRefreshRevisions: () => void\n  appsSetPageNumber: Dispatch<SetStateAction<number>>\n}\n\nexport interface AppEditState {\n  appEditForm: AppEditFormSchema\n  setAppEditForm: Dispatch<SetStateAction<AppEditFormSchema>>\n  appEditSaving: AppSavingParams\n  setAppEditSaving: Dispatch<SetStateAction<AppSavingParams>>\n  appUnsavedFields: FieldNamesMarkedBoolean<AppEditFormSchema>\n  setAppUnsavedFields: Dispatch<SetStateAction<FieldNamesMarkedBoolean<AppEditFormSchema>>>\n  appIncompleteFields: (keyof AppEditFormSchema)[]\n  setIncompleteFields: Dispatch<SetStateAction<(keyof AppEditFormSchema)[]>>\n  appLatestRevision: Marketplace.AppRevisionModel | null\n  appHasInstallations: boolean\n}\n\nexport interface AppPipelineState {\n  appPipeline: PipelineModelInterface | null\n  appPipelineLoading: boolean\n  appPipelineDeploying: boolean\n  appPipelineSaving: boolean\n  appPipelinePusherChannel: any\n  appPipelineRefresh: () => void\n  setAppPipeline: Dispatch<SetStateAction<PipelineModelInterface | null>>\n  setAppPipelineDeploying: Dispatch<SetStateAction<boolean>>\n  setAppPipelineSaving: Dispatch<SetStateAction<boolean>>\n}\n\nexport interface AppStateHook {\n  appWizardState: AppWizardState\n  appsDataState: AppsDataState\n  appEditState: AppEditState\n  appPipelineState: AppPipelineState\n  setAppWizardState: Dispatch<SetStateAction<AppWizardState>>\n  appId: string | null\n  setAppId: Dispatch<SetStateAction<string | null>>\n}\n\nexport const AppStateContext = createContext<AppStateHook>({} as AppStateHook)\n\nconst { Provider } = AppStateContext\n\nexport const AppProvider: FC<PropsWithChildren> = ({ children }) => {\n  const [appWizardState, setAppWizardState] = useState<AppWizardState>(defaultAppWizardState as AppWizardState)\n  const [appPipeline, setAppPipeline] = useState<PipelineModelInterface | null>(null)\n  const [appsPageNumber, appsSetPageNumber] = useState<number>(1)\n  const [appPipelineDeploying, setAppPipelineDeploying] = useState<boolean>(false)\n  const [appPipelineSaving, setAppPipelineSaving] = useState<boolean>(false)\n  const [appEditForm, setAppEditForm] = useState<AppEditFormSchema>(defaultValues)\n  const [appEditSaving, setAppEditSaving] = useState<AppSavingParams>(defaultAppSavingParams)\n  const [appUnsavedFields, setAppUnsavedFields] = useState<FieldNamesMarkedBoolean<AppEditFormSchema>>({})\n  const [appIncompleteFields, setIncompleteFields] = useState<(keyof AppEditFormSchema)[]>([])\n  const [appId, setAppId] = useState<string | null>(null)\n  const { connectSession } = useReapitConnect(reapitConnectBrowserSession)\n\n  const developerId = connectSession?.loginIdentity.developerId\n\n  const [apps, appsLoading, , appsRefresh, appsRefreshing] = useReapitGet<Marketplace.AppSummaryModelPagedResult>({\n    reapitConnectBrowserSession,\n    action: getActions[GetActionNames.getApps],\n    queryParams: { showHiddenApps: 'true', developerId, pageSize: 25, pageNumber: appsPageNumber },\n    fetchWhenTrue: [developerId],\n  })\n\n  const [appDetail, appDetailLoading, , appsDetailRefresh, appDetailRefreshing] =\n    useReapitGet<Marketplace.AppDetailModel>({\n      reapitConnectBrowserSession,\n      action: getActions[GetActionNames.getAppById],\n      uriParams: { appId },\n      fetchWhenTrue: [appId],\n    })\n\n  const [appRevisions, appRevisionsLoading, , appRefreshRevisions, appRevisionsRefreshing] =\n    useReapitGet<Marketplace.AppRevisionModelPagedResult>({\n      reapitConnectBrowserSession,\n      action: getActions[GetActionNames.getAppRevisions],\n      queryParams: { pageSize: 2 },\n      uriParams: { appId },\n      fetchWhenTrue: [appId],\n    })\n\n  const [installations] = useReapitGet<Marketplace.InstallationModelPagedResult>({\n    reapitConnectBrowserSession,\n    action: getActions[GetActionNames.getInstallations],\n    queryParams: {\n      appId,\n      pageSize: 1,\n      isInstalled: true,\n      developerId,\n    },\n    fetchWhenTrue: [developerId, appId],\n  })\n\n  const [pipeline, appPipelineLoading, , appPipelineRefresh] = useReapitGet<PipelineModelInterface>({\n    reapitConnectBrowserSession,\n    action: getActions[GetActionNames.getPipeline],\n    uriParams: { appId },\n    headers: {\n      Authorization: connectSession?.idToken as string,\n    },\n    fetchWhenTrue: [connectSession?.idToken, appId],\n    onError: () => {\n      // TODO we already display errors below, so no need to show a toast here\n    },\n  })\n\n  const pusherChannel = useChannel(`private-${developerId}`)\n  const appPipelinePusherChannel = developerId ? pusherChannel : undefined\n  const appLatestRevision = appRevisions?.data ? appRevisions.data[0] : null\n  const appHasInstallations = Boolean(installations?.totalCount)\n\n  useEffect(handleSetDefaultFormValues(setAppEditForm, appDetail, developerId), [appDetail, developerId])\n\n  useEffect(handleSetInitialPipeline(pipeline, setAppPipeline), [pipeline])\n\n  const appsDataState: AppsDataState = {\n    apps,\n    appsLoading,\n    appsRefreshing,\n    appDetail,\n    appDetailLoading,\n    appDetailRefreshing,\n    appRevisions,\n    appRevisionsLoading,\n    appRevisionsRefreshing,\n    appsRefresh,\n    appsDetailRefresh,\n    appRefreshRevisions,\n    appsSetPageNumber,\n  }\n\n  const appEditState: AppEditState = {\n    appEditForm,\n    setAppEditForm,\n    appEditSaving,\n    setAppEditSaving,\n    appUnsavedFields,\n    setAppUnsavedFields,\n    appIncompleteFields,\n    setIncompleteFields,\n    appLatestRevision,\n    appHasInstallations,\n  }\n\n  const appPipelineState: AppPipelineState = {\n    appPipeline,\n    appPipelineLoading,\n    appPipelineDeploying,\n    appPipelineSaving,\n    appPipelinePusherChannel,\n    appPipelineRefresh,\n    setAppPipeline,\n    setAppPipelineDeploying,\n    setAppPipelineSaving,\n  }\n\n  return (\n    <Provider\n      value={{\n        appWizardState,\n        appsDataState,\n        appEditState,\n        appPipelineState,\n        setAppWizardState,\n        appId,\n        setAppId,\n      }}\n    >\n      {children}\n    </Provider>\n  )\n}\n\nexport const useAppState = (): AppStateHook => {\n  return useContext(AppStateContext)\n}\n","import React, { Dispatch, FC, PropsWithChildren, SetStateAction } from 'react'\nimport ErrorBoundary from '../../../core/error-boundary'\nimport { useAppState } from '../state/use-app-state'\nimport { useEvent } from '@harelpls/use-pusher'\nimport { PipelineModelInterface } from '@reapit/foundations-ts-definitions'\n\nexport interface PipelinePusherEvent {\n  pipeline: PipelineModelInterface\n}\n\nexport const handlePipelineEvent =\n  (\n    pipeline: PipelineModelInterface | null,\n    setPipeline: Dispatch<SetStateAction<PipelineModelInterface | null>>,\n    appId: string | null,\n  ) =>\n  (event?: PipelineModelInterface) => {\n    const pipelineId = pipeline?.id || appId\n    if (!event || !pipelineId || event?.id !== pipelineId) {\n      return\n    }\n\n    setPipeline(event)\n  }\n\nexport const handleRunnerEvent =\n  (\n    pipeline: PipelineModelInterface | null,\n    setPipeline: Dispatch<SetStateAction<PipelineModelInterface | null>>,\n    appId: string | null,\n  ) =>\n  (event?: PipelinePusherEvent) => {\n    const pipelineId = pipeline?.id || appId\n    if (!event || !pipelineId || event.pipeline?.id !== pipelineId) {\n      return\n    }\n\n    setPipeline(event.pipeline)\n  }\n\nexport const PusherEventWrapper: FC<PropsWithChildren> = ({ children }) => {\n  const { appId, appPipelineState } = useAppState()\n  const { appPipeline, setAppPipeline, appPipelinePusherChannel } = appPipelineState\n\n  useEvent(appPipelinePusherChannel, 'pipeline-update', handlePipelineEvent(appPipeline, setAppPipeline, appId))\n  useEvent(appPipelinePusherChannel, 'pipeline-runner-update', handleRunnerEvent(appPipeline, setAppPipeline, appId))\n\n  return <ErrorBoundary>{children}</ErrorBoundary>\n}\n"],"names":["buildStatusToIntent","status","runnerTypeToReadable","type","buildStatusToReadable","str","pipelineViewable","root","factory","module","modules","installedModules","__webpack_require__","moduleId","exports","name","getter","value","mode","ns","key","object","property","__extends","extendStatics","d","b","p","__","INVALID_BYTE","Coder","_paddingCharacter","length","data","out","i","c","left","s","paddingLength","op","haveBad","v0","v1","v2","v3","result","stdCoder","encode","decode","URLSafeCoder","_super","urlSafeCoder","encodeURLSafe","decodeURLSafe","INVALID_UTF16","INVALID_UTF8","arr","encodedLength","pos","chars","min","n1","n2","n3","__webpack_exports__","ScriptReceiverFactory","prefix","callback","number","id","called","callbackWrapper","receiver","ScriptReceivers","Defaults","defaults","dependency_loader_DependencyLoader","DependencyLoader","options","self","request","runtime","error","callbacks","successCallback","wasSuccessful","cdn","protocol","dependency_loader","DependenciesReceivers","Dependencies","urlStore","buildLogSuffix","urlPrefix","urlObj","url","url_store","AuthRequestType","BadEventName","msg","_newTarget","_this","BadChannelName","RequestTimedOut","TransportPriorityTooLow","TransportClosed","UnsupportedFeature","UnsupportedTransport","UnsupportedStrategy","HTTPAuthError","ajax","context","query","authOptions","authRequestType","xhr","headerName","dynamicHeaders","parsed","suffix","xhr_auth","btoa","utob","fromCharCode","b64chars","cb_utob","cc","u","cb_encode","ccc","padlen","ord","Timer","set","clear","delay","abstract_timer","timers_extends","timers_clearTimeout","timer","timers_clearInterval","OneOffTimer","PeriodicTimer","Util","boundArguments","util","extend","target","sources","_i","extensions","stringify","m","safeJSONStringify","arrayIndexOf","array","item","nativeIndexOf","l","objectApply","f","keys","_","values","apply","map","mapObject","filter","test","filterObject","flatten","any","collections_all","encodeParamsObject","buildQueryString","params","decycleObject","objects","paths","derez","path","nu","source","logger_Logger","Logger","message","args","defaultLoggingFunction","core_pusher","log","logger","jsonp","callbackName","document","script","callback_name","head","jsonp_auth","ScriptRequest","src","errorString","script_request","jsonp_request_JSONPRequest","JSONPRequest","jsonp_request","getAgent","sender","useTLS","scheme","jsonp_timeline_jsonp","jsonp_timeline","getGenericURL","baseScheme","host","getGenericPath","queryString","ws","http","sockjs","callback_registry_CallbackRegistry","CallbackRegistry","prefixedEventName","names","binding","callback_registry","dispatcher_Dispatcher","Dispatcher","failThrough","eventName","metadata","dispatcher","transport_connection_extends","transport_connection_TransportConnection","TransportConnection","hooks","priority","e","closeEvent","state","transport_connection","transport_Transport","Transport","environment","transports_transport","WSTransport","httpConfiguration","streamingConfiguration","pollingConfiguration","xhrConfiguration","XHRStreamingTransport","XHRPollingTransport","Transports","transports","SockJSTransport","socket","xdrConfiguration","yes","XDRStreamingTransport","XDRPollingTransport","transports_transports","net_info_extends","NetInfo","net_info_Network","assistant_to_the_transport_manager_AssistantToTheTransportManager","AssistantToTheTransportManager","manager","transport","connection","openTimestamp","onOpen","onClosed","lifespan","assistant_to_the_transport_manager","Protocol","messageEvent","messageData","pusherEventData","pusherEvent","event","protocol_protocol","connection_extends","connection_Connection","Connection","channel","listeners","unbindListeners","listener","action","connection_connection","handshake_Handshake","Handshake","connection_handshake","timeline_sender_TimelineSender","TimelineSender","timeline","timeline_sender","channel_extends","channel_Channel","Channel","pusher","socketId","channels_channel","private_channel_extends","PrivateChannel","private_channel","members_Members","Members","member","subscriptionData","memberData","members","presence_channel_extends","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","reject","fulfilled","step","rejected","__generator","body","t","y","g","verb","n","v","presence_channel_PresenceChannel","PresenceChannel","authData","channelData","_a","addedMember","removedMember","presence_channel","utf8","base64","encrypted_channel_extends","encrypted_channel_EncryptedChannel","EncryptedChannel","nacl","sharedSecret","cipherText","nonce","bytes","raw","encrypted_channel","connection_manager_extends","connection_manager_ConnectionManager","ConnectionManager","Network","handshake","errorCallbacks","withErrorEmitted","newState","previousState","newStateDescription","connection_manager","channels_Channels","Channels","createChannel","channels","errMsg","Factory","transport_manager_TransportManager","TransportManager","transport_manager","sequential_strategy_SequentialStrategy","SequentialStrategy","strategies","minPriority","current","timeout","runner","tryNextStrategy","strategy","sequential_strategy","best_connected_ever_strategy_BestConnectedEverStrategy","BestConnectedEverStrategy","connect","runners","allRunnersFailed","best_connected_ever_strategy","callbackBuilder","rs","abortRunner","cached_strategy_CachedStrategy","CachedStrategy","usingTLS","info","fetchTransportCache","startTimestamp","cb","flushTransportCache","storeTransportCache","cached_strategy","getTransportCacheKey","storage","serializedCache","latency","delayed_strategy_DelayedStrategy","DelayedStrategy","delayed_strategy","IfStrategy","trueBranch","falseBranch","branch","if_strategy","FirstConnectedStrategy","first_connected_strategy","testSupportsStrategy","getDefaultStrategy","config","baseOptions","defineTransport","definedTransports","defineTransportStrategy","ws_options","wss_options","sockjs_options","timeouts","ws_manager","streaming_manager","ws_transport","wss_transport","sockjs_transport","xhr_streaming_transport","xdr_streaming_transport","xhr_polling_transport","xdr_polling_transport","ws_loop","wss_loop","sockjs_loop","streaming_loop","polling_loop","http_loop","http_fallback_loop","wsStrategy","default_strategy","transport_connection_initializer","http_xdomain_request_hooks","xdr","http_xdomain_request","http_request_extends","MAX_BUFFER_LENGTH","http_request_HTTPRequest","HTTPRequest","method","payload","chunk","buffer","unreadData","endOfLinePosition","http_request","State","autoIncrement","http_socket_HTTPSocket","HTTPSocket","randomNumber","randomString","getLocation","code","reason","getUniqueURL","getSendURL","wasClean","replaceHost","parts","session","separator","hostname","urlParts","max","http_socket","http_streaming_socket_hooks","http_streaming_socket","http_polling_socket_hooks","http_polling_socket","http_xhr_request_hooks","Constructor","http_xhr_request","HTTP","http_http","web_http_http","Runtime","PusherClass","initializeOnDocumentBody","documentProtocol","random","crypto","TimelineLevel","timeline_level","timeline_Timeline","Timeline","level","sendfn","timeline_timeline","transport_strategy_TransportStrategy","TransportStrategy","failAttempt","connected","onInitialized","onError","serializedTransport","transport_strategy","strategy_builder_Transports","strategy_builder_defineTransport","transportClass","enabled","strategy_builder_UnsupportedStrategy","deferred","composeChannelQuery","dynamicParams","UserAuthenticator","user_authenticator","channel_authorizer_composeChannelQuery","ChannelAuthorizer","channel_authorizer","ChannelAuthorizerProxy","channelAuthorizerGenerator","deprecatedAuthorizerOptions","channelAuthorizer","__assign","getConfig","opts","getEnableStatsConfig","getHttpHost","shouldUseTLS","getWebsocketHost","buildUserAuthenticator","buildChannelAuthorizer","getWebsocketHostFromCluster","cluster","userAuthentication","buildChannelAuth","channelAuthorization","watchlist_extends","watchlist_WatchlistFacade","WatchlistFacade","watchlistEvent","watchlist","flatPromise","promise","res","rej","flat_promise","user_extends","user_UserFacade","UserFacade","err","previous","ensure_subscribed","setDone","user","pusher_Pusher","Pusher","app_key","checkAppKey","getStrategy","internal","timelineSender","event_name","channelName","channel_name","__rest","has","find","iter","tar","dequal","foo","bar","ctor","len","tmp","PusherContext","React","__PusherContext","CorePusherProvider","clientKey","triggerEndpoint","_b","defer","children","_PusherRuntime","props","useEffect","previousConfig","useRef","_c","useState","client","setClient","usePusher","useContext","NOT_IN_CONTEXT_WARNING","NO_CHANNEL_NAME_WARNING","useChannel","setChannel","pusherChannel","invariant","condition","format","a","argIndex","invariant_1","useEvent","PusherProvider","define_process_env_default","defaultValues","formFields","AppNewStepId","appWizardSteps","getAppWizardStep","appNewStepId","defaultAppWizardState","defaultAppSavingParams","formatAppFields","appDetail","developerId","media","scopes","icon","order","images","formValuePartial","image","index","videos","handleSetDefaultFormValues","setAppEditForm","formValues","handleSetInitialPipeline","appPipeline","setAppPipeline","AppStateContext","createContext","Provider","AppProvider","appWizardState","setAppWizardState","appsPageNumber","appsSetPageNumber","appPipelineDeploying","setAppPipelineDeploying","appPipelineSaving","setAppPipelineSaving","appEditForm","appEditSaving","setAppEditSaving","appUnsavedFields","setAppUnsavedFields","appIncompleteFields","setIncompleteFields","appId","setAppId","connectSession","useReapitConnect","reapitConnectBrowserSession","apps","appsLoading","appsRefresh","appsRefreshing","useReapitGet","getActions","GetActionNames","appDetailLoading","appsDetailRefresh","appDetailRefreshing","appRevisions","appRevisionsLoading","appRefreshRevisions","appRevisionsRefreshing","installations","pipeline","appPipelineLoading","appPipelineRefresh","appPipelinePusherChannel","appLatestRevision","appHasInstallations","appsDataState","appEditState","appPipelineState","jsx","useAppState","handlePipelineEvent","setPipeline","pipelineId","handleRunnerEvent","PusherEventWrapper","ErrorBoundary"],"mappings":"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,EAEaC,GAAkF,CAC7F,KAAM,CACJ,KAAM,OACN,MAAO,OACP,aAAc,yCACd,YAAa,kDACb,KAAM,MACR,EACA,YAAa,CACX,KAAM,cACN,MAAO,gBACT,EACA,aAAc,CACZ,KAAM,eACN,MAAO,gBACP,YAAa,qCACb,KAAM,OACR,EACA,UAAW,CACT,KAAM,YACN,MAAO,YACP,YAAa,sCACb,aAAc,2BACd,KAAM,MACR,EACA,SAAU,CACR,KAAM,WACN,MAAO,YACP,YAAa,6CACb,aAAc,wBACd,KAAM,MACR,EACA,UAAW,CACT,KAAM,YACN,MAAO,aACP,YAAa,8CACb,aAAc,qBACd,KAAM,MACR,EACA,QAAS,CACP,KAAM,UACN,MAAO,UACP,YAAa,uFACf,EACA,YAAa,CACX,KAAM,cACN,MAAO,cACP,YACE,6LACJ,EACA,sBAAuB,CACrB,KAAM,wBACN,MAAO,uBACP,YAAa,2CACb,aAAc,mCACd,KAAM,MACR,EACA,iBAAkB,CAChB,KAAM,mBACN,MAAO,iBACP,YAAa,qCACb,aAAc,mCACd,KAAM,MACR,EACA,WAAY,CACV,KAAM,aACN,MAAO,eACP,YAAa,mCACb,aAAc,mCACd,KAAM,MACR,EACA,OAAQ,CACN,KAAM,SACN,MAAO,2BACP,KAAM,UACR,EACA,mBAAoB,CAClB,KAAM,qBACN,MAAO,0CACP,KAAM,UACR,EACA,SAAU,CACR,KAAM,WACN,MAAO,qBACT,EACA,aAAc,CACZ,KAAM,eACN,MAAO,kBACP,YAAa,6BACb,aAAc,0BACd,KAAM,MACR,EACA,YAAa,CACX,KAAM,cACN,MAAO,kBACP,YAAa,6BACb,aAAc,0BACd,KAAM,MACR,EACA,aAAc,CACZ,KAAM,eACN,MAAO,oBACP,KAAM,MACR,EACA,gBAAiB,CACf,KAAM,kBACN,MAAO,wBACP,KAAM,MACR,EACA,gBAAiB,CACf,KAAM,kBACN,MAAO,6BACP,KAAM,MACR,EACA,gBAAiB,CACf,KAAM,kBACN,MAAO,6BACP,KAAM,MACR,EACA,gBAAiB,CACf,KAAM,kBACN,MAAO,6BACP,KAAM,MACR,EACA,gBAAiB,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","x_google_ignoreList":[1,2]}