import{V as M,w as J,o as O,r as P,j as e,bO as k,a0 as o,au as G,a$ as f,aw as x,a8 as S,a9 as d}from"./vendor-DhPpirnB.js";import{n as q,R as H}from"./index-BiZWlcS5.js";import{c as V,a as b,p as Y,ae as B,u as W,e as Q,o as X}from"./error-messages-inRSKQd9.js";import{a as $,r as z}from"./developer-CmzZzKnx.js";import{s as E}from"./yup-dxpoe7i0.js";import"./index-BfR190KE.js";const K=s=>{const n={};return new URLSearchParams(s).forEach((i,a)=>{if(a==="page"){const t=Number(i);return n.page=!isNaN(t)&&t>0?t:1}n[a]=i||""}),n},{FIELD_REQUIRED:y,MAXIMUM_CHARACTER_LENGTH:v}=Q,T=V().shape({name:b().trim().required(y).matches(Y,"Full name is not valid").max(256,v(256)).test(E),jobTitle:b().trim().required(y).matches(B,"Job title is not valid").max(256,v(256)).test(E)}),I=(s,n,i,a)=>async t=>{if(!i||!a)return;n("LOADING");const r=await $(t,i,a);typeof r=="string"?(s(r),n("DEFAULT")):n("ACCEPT_SUCCESS")},R=(s,n,i,a)=>async t=>{if(t.preventDefault(),t.stopPropagation(),!i||!a)return;n("LOADING");const r=await z(i,a);typeof r=="string"?(s(r),n("DEFAULT")):n("REJECT_SUCCESS")},A=()=>{var g,p,j,C;const s=M(),n=J(),{error:i}=O(),[a,t]=P.useState("DEFAULT"),r=K(s.search),{developerId:m,memberId:u,memberName:U,memberJobTitle:D,organisationName:F}=r,{register:h,handleSubmit:L,formState:{errors:l}}=W({resolver:X(T),defaultValues:{name:U,jobTitle:D}}),N=L(I(i,t,m,u)),w=R(i,t,m,u),c=a==="LOADING",_=a==="ACCEPT_SUCCESS"?"Invite Accepted":a==="REJECT_SUCCESS"?"Invite Rejected":"Reapit Foundations Invitation";return e.jsxs(k,{title:_,isOpen:!0,onModalClose:console.log,children:[!a.includes("SUCCESS")&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{children:["You have been invited to join the '",F,"' organisation on Reapit Foundations."]}),e.jsx(o,{children:"Before confirming your account, please ensure your details are correct below."}),e.jsxs(o,{children:[e.jsx("strong",{children:"Important: "}),"If you already have an account and confirm this invitation, any data on your existing account will no longer be available."]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs(G,{hasMargin:!0,children:[e.jsx(f,{children:e.jsx(x,{...h("name"),label:"Name",errorMessage:(g=l.name)==null?void 0:g.message,icon:(p=l.name)!=null&&p.message?"asterisk":null,intent:"danger"})}),e.jsx(f,{children:e.jsx(x,{...h("jobTitle"),label:"Job Title",errorMessage:(j=l.jobTitle)==null?void 0:j.message,icon:(C=l.jobTitle)!=null&&C.message?"asterisk":null,intent:"danger"})})]}),e.jsxs(S,{alignment:"right",children:[e.jsx(d,{fixedWidth:!0,intent:"danger",loading:c,disabled:c,type:"button",onClick:w,children:"Decline"}),e.jsx(d,{intent:"primary",loading:c,disabled:c,type:"submit",children:"Confirm"})]})]})]}),a==="ACCEPT_SUCCESS"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{children:"Thank you for confirming your invite to Reapit Foundations."}),e.jsx(o,{children:"If you already had a Developer account, you can use your existing credentials to login to the Developers Portal. If not, you will shortly receive an email with instructions on setting up your login credentials."}),e.jsx(S,{alignment:"right",children:e.jsx(d,{intent:"primary",onClick:q(n,H.LOGIN),children:"Login"})})]}),a==="REJECT_SUCCESS"&&e.jsx(o,{children:"You have successfully declined the invitation to Reapit Foundations."})]})};export{A as Invite,A as default,I as handleAccept,R as handleReject,T as validationSchema};
