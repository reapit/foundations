import{M as U,o as ra,j as e,ac as Z,au as q,a$ as v,aw as h,a8 as w,a9 as T,a0 as Y,a2 as K,V as Oe,a5 as _,r as P,ar as ta,Y as qe,$ as Q,aK as Ye,av as $,ay as X,aB as ee,aO as ae,bJ as oa,b0 as re,aU as he,bf as ua,a1 as Ke,bb as _e,aN as Ve,a7 as da,b1 as ca,b2 as We,bK as ba,a6 as ze,bz as ma,Q as Je,w as ha,as as va,bk as ga,bl as pa,aH as xa,bm as le,aj as ja,a_ as Sa,ah as Ma,ai as se}from"./vendor-q73t4OJb.js";import{r as I,o as ya,d as ne,u as F,c as H,U as O,R as f,e as te,g as oe,G as ue,m as Ca,i as Ta,n as ie}from"./index-DkTsc282.js";import{c as de,a as c,ad as Ia,g as fa,e as ce,u as be,o as me,p as Ze,b as Qe,ae as $e,t as Na,f as Xe,d as ea}from"./error-messages-CyrV44qA.js";import{a as wa}from"./cognito-identity-CM5SyZ5i.js";import{s as S,d as Ea}from"./yup-ChW0zsYM.js";import{g as Pa}from"./module-DOnifq-p.js";import"./index-C6DP0Ld9.js";const{FIELD_REQUIRED:ve}=ce,Aa=de().shape({password:c().trim().required(ve),newPassword:c().trim().required(ve).matches(Ia,"Your Password should be a minimum of 8 characters; must contain at least one lowercase letter, one uppercase letter and one number."),confirmPassword:c().trim().required(ve).oneOf([fa("newPassword"),""],"Passwords do not match.")}),Ra=a=>{var i;return((i=aa(a))==null?void 0:i.includes("cognito"))??!1},aa=a=>{var i;return((i=JSON.parse(atob(a.split(".")[1])))==null?void 0:i.iss)??""},ka=(a,{success:i,error:n})=>async({newPassword:u,password:d})=>{await wa({password:d,newPassword:u,userName:a})?i("Successfully updated your password"):n("Failed to update your password. This error has been logged, please try again")},Ga=()=>{var g,b,y,m,p,C;const{connectSession:a}=U(I),i=ra(),n=(a==null?void 0:a.loginIdentity.email)??"",u=(a==null?void 0:a.accessToken)??"",{register:d,handleSubmit:x,formState:{errors:s}}=be({resolver:me(Aa),defaultValues:{password:"",newPassword:"",confirmPassword:""}});return u?Ra(u)?e.jsxs("form",{onSubmit:x(ka(n,i)),children:[e.jsxs(q,{hasMargin:!0,children:[e.jsx(v,{children:e.jsx(h,{...d("password"),type:"password",label:"Current Password",placeholder:"Current Password",errorMessage:(g=s==null?void 0:s.password)==null?void 0:g.message,icon:(b=s==null?void 0:s.password)!=null&&b.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...d("newPassword"),type:"password",label:"New Password",placeholder:"New Password",errorMessage:(y=s==null?void 0:s.newPassword)==null?void 0:y.message,icon:(m=s==null?void 0:s.newPassword)!=null&&m.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...d("confirmPassword"),type:"password",label:"Confirm New Password",placeholder:"Confirm New Password",errorMessage:(p=s==null?void 0:s.confirmPassword)==null?void 0:p.message,icon:(C=s==null?void 0:s.confirmPassword)!=null&&C.message?"asterisk":null,intent:"danger"})})]}),e.jsx(w,{children:e.jsx(T,{intent:"primary",type:"submit",children:"Save Changes"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{hasGreyText:!0,children:"Please use the Reapit Connect My Account app to manage your account"}),e.jsx(w,{className:K,children:e.jsx(T,{intent:"primary",type:"submit",onClick:ya(`${aa(u)}my-account`),children:"Manage Account"})})]}):e.jsx(Z,{})},{FIELD_REQUIRED:ge,MAXIMUM_CHARACTER_LENGTH:pe}=ce,Da=de().shape({name:c().trim().required(ge).matches(Ze,"Full name is not valid").max(256,pe(256)).test(S),email:c().trim().required(ge).matches(Qe,"Email address is not valid").max(256,pe(256)),jobTitle:c().trim().required(ge).matches($e,"Job title is not valid").max(256,pe(256)).test(S),message:c().trim().test(S)}),Ba=a=>()=>{a()},La=(a,i)=>n=>{a(n),i()},Ua=(a,i)=>()=>{i&&a(!0)},V=()=>{var M,l,B,L,R,k,G,D;const a=Oe(),{connectLogoutRedirect:i,connectSession:n}=U(I),{globalDataState:u,globalRefreshState:d}=ne(),{Modal:x,openModal:s,closeModal:g}=_(),{currentMember:b}=u,{members:y}=d,{pathname:m}=a,[,p]=y,[,,C,j]=F({reapitConnectBrowserSession:I,action:H[O.inviteMember],method:"POST",uriParams:{developerId:b==null?void 0:b.developerId}});P.useEffect(Ua(p,j),[j]);const{register:r,handleSubmit:o,formState:{errors:t}}=be({resolver:me(Da),defaultValues:{name:"",email:"",jobTitle:"",message:"",sender:n==null?void 0:n.loginIdentity.email}});return e.jsxs("div",{className:ta,children:[e.jsx(qe,{icon:"reapitConnectInfographic",iconSize:"large"}),e.jsx(Q,{children:"Settings"}),e.jsx(Ye,{hasGreyText:!0,children:"You can manage the information we hold about you and change your password in these pages."}),(b==null?void 0:b.role)==="admin"&&e.jsx(Ye,{hasGreyText:!0,children:"Additionally, as an admin, you can manage your developer organisation, members and subscriptions."}),e.jsxs(w,{children:[(b==null?void 0:b.role)==="admin"&&m===f.SETTINGS_MEMBERS&&e.jsx(T,{onClick:s,intent:"primary",children:"Invite Developer"}),e.jsx(T,{onClick:Ba(i),intent:"primary",children:"Logout"})]}),e.jsx(x,{title:"Invite Developer",children:e.jsxs("form",{onSubmit:o(La(C,g)),children:[e.jsxs(q,{hasMargin:!0,children:[e.jsx($,{children:e.jsx(h,{...r("name"),label:"Name",placeholder:"Your colleague's full name",errorMessage:(M=t==null?void 0:t.name)==null?void 0:M.message,icon:(l=t==null?void 0:t.name)!=null&&l.message?"asterisk":null,intent:"danger"})}),e.jsx($,{children:e.jsx(h,{...r("email"),type:"email",label:"Email",placeholder:"An email address we can contact your colleague at",errorMessage:(B=t==null?void 0:t.email)==null?void 0:B.message,icon:(L=t==null?void 0:t.email)!=null&&L.message?"asterisk":null,intent:"danger"})}),e.jsx($,{children:e.jsx(h,{...r("jobTitle"),label:"Job Title",placeholder:"Your colleague's role at your company'",errorMessage:(R=t==null?void 0:t.jobTitle)==null?void 0:R.message,icon:(k=t==null?void 0:t.jobTitle)!=null&&k.message?"asterisk":null,intent:"danger"})}),e.jsx($,{children:e.jsx(h,{...r("message"),label:"Invite Message",placeholder:"An optional invite message",errorMessage:(G=t==null?void 0:t.message)==null?void 0:G.message,icon:(D=t==null?void 0:t.message)!=null&&D.message?"asterisk":null,intent:"danger"})})]}),e.jsxs(w,{alignment:"right",children:[e.jsx(T,{intent:"default",onClick:g,children:"Close"}),e.jsx(T,{intent:"primary",type:"submit",children:"Send Invite"})]})]})})]})},Fa=()=>{const{isMobile:a}=X(),{Modal:i,openModal:n,closeModal:u}=_();return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:"Password"}),a&&e.jsxs(i,{title:"Controls",children:[e.jsx(V,{}),e.jsx(w,{alignment:"right",children:e.jsx(T,{intent:"default",onClick:u,children:"Close"})})]}),e.jsx(Ga,{}),e.jsx(ae,{onClick:n})]})},{MAXIMUM_CHARACTER_LENGTH:N,FIELD_REQUIRED:E}=ce,Ha=de().shape({company:c().trim().required(E).max(250,N(250)).test(S),telephone:c().trim().required(E).matches(Na,"Invalid telephone number").max(20,N(20)).test(S),website:c().trim().required(E).test({message:"Invalid website address",test:a=>a?Ea(a):!0}).max(100,N(100)),noTaxRegistration:Xe(),taxNumber:c().when("noTaxRegistration",{is:!1,then:c().trim().required(E).max(50,N(50)).test(S),otherwise:c().notRequired().test(S)}),noRegistrationNumber:Xe(),registrationNumber:c().when("noRegistrationNumber",{is:!1,then:c().trim().required(E).max(50,N(50)).test(S),otherwise:c().notRequired().test(S)}),about:c().trim().required(E).max(250,N(250)).test(S),nationalInsurance:c().when("noRegistrationNumber",{is:!0,then:c().trim().required(E).max(20,N(20)).test(S),otherwise:c().notRequired().test(S)}),buildingName:c().trim().max(35,N(35)).test(S),buildingNumber:c().trim().max(8,N(8)).test(S),line1:c().trim().required(E).max(35,N(35)).test(S),line2:c().trim().max(30,N(30)).test(S),line3:c().trim().max(30,N(30)).test(S),line4:c().trim().required(E).max(30,N(30)).test(S),postcode:c().trim().required(E).max(9,N(9)).test(S),countryId:c().trim().required(E),billingEmail:c().test({message:"Invalid email",test:a=>a?a.match(Qe)!==null:!0})}),Oa=[{value:"GB",label:"United Kingdom"},{value:"AF",label:"Afghanistan"},{value:"AX",label:"\xC5land Islands"},{value:"AL",label:"Albania"},{value:"DZ",label:"Algeria"},{value:"AS",label:"American Samoa"},{value:"AD",label:"Andorra"},{value:"AO",label:"Angola"},{value:"AI",label:"Anguilla"},{value:"AQ",label:"Antarctica"},{value:"AG",label:"Antigua and Barbuda"},{value:"AR",label:"Argentina"},{value:"AM",label:"Armenia"},{value:"AW",label:"Aruba"},{value:"AU",label:"Australia"},{value:"AT",label:"Austria"},{value:"AZ",label:"Azerbaijan"},{value:"BS",label:"Bahamas"},{value:"BH",label:"Bahrain"},{value:"BD",label:"Bangladesh"},{value:"BB",label:"Barbados"},{value:"BY",label:"Belarus"},{value:"BE",label:"Belgium"},{value:"BZ",label:"Belize"},{value:"BJ",label:"Benin"},{value:"BM",label:"Bermuda"},{value:"BT",label:"Bhutan"},{value:"BO",label:"Bolivia, Plurinational State of"},{value:"BQ",label:"Bonaire, Sint Eustatius and Saba"},{value:"BA",label:"Bosnia and Herzegovina"},{value:"BW",label:"Botswana"},{value:"BV",label:"Bouvet Island"},{value:"BR",label:"Brazil"},{value:"IO",label:"British Indian Ocean Territory"},{value:"BN",label:"Brunei Darussalam"},{value:"BG",label:"Bulgaria"},{value:"BF",label:"Burkina Faso"},{value:"BI",label:"Burundi"},{value:"KH",label:"Cambodia"},{value:"CM",label:"Cameroon"},{value:"CA",label:"Canada"},{value:"CV",label:"Cape Verde"},{value:"KY",label:"Cayman Islands"},{value:"CF",label:"Central African Republic"},{value:"TD",label:"Chad"},{value:"CL",label:"Chile"},{value:"CN",label:"China"},{value:"CX",label:"Christmas Island"},{value:"CC",label:"Cocos (Keeling) Islands"},{value:"CO",label:"Colombia"},{value:"KM",label:"Comoros"},{value:"CG",label:"Congo"},{value:"CD",label:"Congo, the Democratic Republic of the"},{value:"CK",label:"Cook Islands"},{value:"CR",label:"Costa Rica"},{value:"CI",label:"C\xF4te d'Ivoire"},{value:"HR",label:"Croatia"},{value:"CU",label:"Cuba"},{value:"CW",label:"Cura\xE7ao"},{value:"CY",label:"Cyprus"},{value:"CZ",label:"Czech Republic"},{value:"DK",label:"Denmark"},{value:"DJ",label:"Djibouti"},{value:"DM",label:"Dominica"},{value:"DO",label:"Dominican Republic"},{value:"EC",label:"Ecuador"},{value:"EG",label:"Egypt"},{value:"SV",label:"El Salvador"},{value:"GQ",label:"Equatorial Guinea"},{value:"ER",label:"Eritrea"},{value:"EE",label:"Estonia"},{value:"ET",label:"Ethiopia"},{value:"FK",label:"Falkland Islands (Malvinas)"},{value:"FO",label:"Faroe Islands"},{value:"FJ",label:"Fiji"},{value:"FI",label:"Finland"},{value:"FR",label:"France"},{value:"GF",label:"French Guiana"},{value:"PF",label:"French Polynesia"},{value:"TF",label:"French Southern Territories"},{value:"GA",label:"Gabon"},{value:"GM",label:"Gambia"},{value:"GE",label:"Georgia"},{value:"DE",label:"Germany"},{value:"GH",label:"Ghana"},{value:"GI",label:"Gibraltar"},{value:"GR",label:"Greece"},{value:"GL",label:"Greenland"},{value:"GD",label:"Grenada"},{value:"GP",label:"Guadeloupe"},{value:"GU",label:"Guam"},{value:"GT",label:"Guatemala"},{value:"GG",label:"Guernsey"},{value:"GN",label:"Guinea"},{value:"GW",label:"Guinea-Bissau"},{value:"GY",label:"Guyana"},{value:"HT",label:"Haiti"},{value:"HM",label:"Heard Island and McDonald Islands"},{value:"VA",label:"Holy See (Vatican City State)"},{value:"HN",label:"Honduras"},{value:"HK",label:"Hong Kong"},{value:"HU",label:"Hungary"},{value:"IS",label:"Iceland"},{value:"IN",label:"India"},{value:"ID",label:"Indonesia"},{value:"IR",label:"Iran, Islamic Republic of"},{value:"IQ",label:"Iraq"},{value:"IE",label:"Ireland"},{value:"IM",label:"Isle of Man"},{value:"IL",label:"Israel"},{value:"IT",label:"Italy"},{value:"JM",label:"Jamaica"},{value:"JP",label:"Japan"},{value:"JE",label:"Jersey"},{value:"JO",label:"Jordan"},{value:"KZ",label:"Kazakhstan"},{value:"KE",label:"Kenya"},{value:"KI",label:"Kiribati"},{value:"KP",label:"Korea, Democratic People's Republic of"},{value:"KR",label:"Korea, Republic of"},{value:"KW",label:"Kuwait"},{value:"KG",label:"Kyrgyzstan"},{value:"LA",label:"Lao People's Democratic Republic"},{value:"LV",label:"Latvia"},{value:"LB",label:"Lebanon"},{value:"LS",label:"Lesotho"},{value:"LR",label:"Liberia"},{value:"LY",label:"Libya"},{value:"LI",label:"Liechtenstein"},{value:"LT",label:"Lithuania"},{value:"LU",label:"Luxembourg"},{value:"MO",label:"Macao"},{value:"MK",label:"Macedonia, the former Yugoslav Republic of"},{value:"MG",label:"Madagascar"},{value:"MW",label:"Malawi"},{value:"MY",label:"Malaysia"},{value:"MV",label:"Maldives"},{value:"ML",label:"Mali"},{value:"MT",label:"Malta"},{value:"MH",label:"Marshall Islands"},{value:"MQ",label:"Martinique"},{value:"MR",label:"Mauritania"},{value:"MU",label:"Mauritius"},{value:"YT",label:"Mayotte"},{value:"MX",label:"Mexico"},{value:"FM",label:"Micronesia, Federated States of"},{value:"MD",label:"Moldova, Republic of"},{value:"MC",label:"Monaco"},{value:"MN",label:"Mongolia"},{value:"ME",label:"Montenegro"},{value:"MS",label:"Montserrat"},{value:"MA",label:"Morocco"},{value:"MZ",label:"Mozambique"},{value:"MM",label:"Myanmar"},{value:"NA",label:"Namibia"},{value:"NR",label:"Nauru"},{value:"NP",label:"Nepal"},{value:"NL",label:"Netherlands"},{value:"NC",label:"New Caledonia"},{value:"NZ",label:"New Zealand"},{value:"NI",label:"Nicaragua"},{value:"NE",label:"Niger"},{value:"NG",label:"Nigeria"},{value:"NU",label:"Niue"},{value:"NF",label:"Norfolk Island"},{value:"MP",label:"Northern Mariana Islands"},{value:"NO",label:"Norway"},{value:"OM",label:"Oman"},{value:"PK",label:"Pakistan"},{value:"PW",label:"Palau"},{value:"PS",label:"Palestinian Territory, Occupied"},{value:"PA",label:"Panama"},{value:"PG",label:"Papua New Guinea"},{value:"PY",label:"Paraguay"},{value:"PE",label:"Peru"},{value:"PH",label:"Philippines"},{value:"PN",label:"Pitcairn"},{value:"PL",label:"Poland"},{value:"PT",label:"Portugal"},{value:"PR",label:"Puerto Rico"},{value:"QA",label:"Qatar"},{value:"RE",label:"R\xE9union"},{value:"RO",label:"Romania"},{value:"RU",label:"Russian Federation"},{value:"RW",label:"Rwanda"},{value:"BL",label:"Saint Barth\xE9lemy"},{value:"SH",label:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",label:"Saint Kitts and Nevis"},{value:"LC",label:"Saint Lucia"},{value:"MF",label:"Saint Martin (French part)"},{value:"PM",label:"Saint Pierre and Miquelon"},{value:"VC",label:"Saint Vincent and the Grenadines"},{value:"WS",label:"Samoa"},{value:"SM",label:"San Marino"},{value:"ST",label:"Sao Tome and Principe"},{value:"SA",label:"Saudi Arabia"},{value:"SN",label:"Senegal"},{value:"RS",label:"Serbia"},{value:"SC",label:"Seychelles"},{value:"SL",label:"Sierra Leone"},{value:"SG",label:"Singapore"},{value:"SX",label:"Sint Maarten (Dutch part)"},{value:"SK",label:"Slovakia"},{value:"SI",label:"Slovenia"},{value:"SB",label:"Solomon Islands"},{value:"SO",label:"Somalia"},{value:"ZA",label:"South Africa"},{value:"GS",label:"South Georgia and the South Sandwich Islands"},{value:"SS",label:"South Sudan"},{value:"ES",label:"Spain"},{value:"LK",label:"Sri Lanka"},{value:"SD",label:"Sudan"},{value:"SR",label:"Suriname"},{value:"SJ",label:"Svalbard and Jan Mayen"},{value:"SZ",label:"Swaziland"},{value:"SE",label:"Sweden"},{value:"CH",label:"Switzerland"},{value:"SY",label:"Syrian Arab Republic"},{value:"TW",label:"Taiwan, Province of China"},{value:"TJ",label:"Tajikistan"},{value:"TZ",label:"Tanzania, United Republic of"},{value:"TH",label:"Thailand"},{value:"TL",label:"Timor-Leste"},{value:"TG",label:"Togo"},{value:"TK",label:"Tokelau"},{value:"TO",label:"Tonga"},{value:"TT",label:"Trinidad and Tobago"},{value:"TN",label:"Tunisia"},{value:"TR",label:"Turkey"},{value:"TM",label:"Turkmenistan"},{value:"TC",label:"Turks and Caicos Islands"},{value:"TV",label:"Tuvalu"},{value:"UG",label:"Uganda"},{value:"UA",label:"Ukraine"},{value:"AE",label:"United Arab Emirates"},{value:"US",label:"United States"},{value:"UM",label:"United States Minor Outlying Islands"},{value:"UY",label:"Uruguay"},{value:"UZ",label:"Uzbekistan"},{value:"VU",label:"Vanuatu"},{value:"VE",label:"Venezuela, Bolivarian Republic of"},{value:"VN",label:"Viet Nam"},{value:"VG",label:"Virgin Islands, British"},{value:"VI",label:"Virgin Islands, U.S."},{value:"WF",label:"Wallis and Futuna"},{value:"EH",label:"Western Sahara"},{value:"YE",label:"Yemen"},{value:"ZM",label:"Zambia"},{value:"ZW",label:"Zimbabwe"}],qa=(a,i)=>()=>{i&&a()},Ya=(a,i)=>({company:n,telephone:u,website:d,notificationsEmail:x,noTaxRegistration:s,taxNumber:g,registrationNumber:b,about:y,buildingName:m,buildingNumber:p,line1:C,line2:j,line3:r,line4:o,postcode:t,countryId:M})=>{i({...a,companyName:n,telephone:u,website:d,notificationsEmail:x,noTaxRegistration:s,taxNumber:g,registrationNumber:b,about:y,companyAddress:{...a.companyAddress,buildingName:m,buildingNumber:p,line1:C,line2:j,line3:r,line4:o,postcode:t,countryId:M}})},Ka=({developer:a,refreshDeveloper:i})=>{var R,k,G,D,W,z,J,A,je,Se,Me,ye,Ce,Te,Ie,fe,Ne,we,Ee,Pe,Ae,Re,ke,Ge,De,Be,Le,Ue,Fe;const[,n,u,d]=F({reapitConnectBrowserSession:I,action:H[O.updateDeveloper],method:"PUT",uriParams:{developerId:a.id}});P.useEffect(qa(i,d),[d]);const{company:x,telephone:s,website:g,email:b,notificationsEmail:y,noTaxRegistration:m,taxNumber:p,registrationNumber:C,about:j,companyAddress:r}=a,{register:o,handleSubmit:t,control:M,formState:{errors:l}}=be({resolver:me(Ha),defaultValues:{company:x??"",telephone:s??"",website:g??"",email:b??"",notificationsEmail:y??"",noTaxRegistration:m??!0,taxNumber:p??"",noregistrationNumber:!C,registrationNumber:C??"",about:j??"",buildingName:(r==null?void 0:r.buildingName)??"",buildingNumber:(r==null?void 0:r.buildingNumber)??"",line1:(r==null?void 0:r.line1)??"",line2:(r==null?void 0:r.line2)??"",line3:(r==null?void 0:r.line3)??"",line4:(r==null?void 0:r.line4)??"",postcode:(r==null?void 0:r.postcode)??"",countryId:(r==null?void 0:r.countryId)??"GBR"}}),B=ea({control:M,name:"noregistrationNumber"}),L=ea({control:M,name:"noTaxRegistration"});return e.jsxs("form",{onSubmit:t(Ya(a,u)),children:[e.jsxs(q,{hasMargin:!0,children:[e.jsx(v,{children:e.jsx(h,{...o("company"),label:"Company Name",placeholder:"This will be the display name of the company in our AppMarket",errorMessage:(R=l==null?void 0:l.company)==null?void 0:R.message,icon:(k=l==null?void 0:l.company)!=null&&k.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("telephone"),label:"Telephone",placeholder:"A number we can discuss your developer account on",errorMessage:(G=l==null?void 0:l.telephone)==null?void 0:G.message,icon:(D=l==null?void 0:l.telephone)!=null&&D.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("website"),label:"Website Address",placeholder:"Your company's corporate website",errorMessage:(W=l==null?void 0:l.website)==null?void 0:W.message,icon:(z=l==null?void 0:l.website)!=null&&z.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("email"),label:"Office Email",disabled:!0,errorMessage:(J=l==null?void 0:l.email)==null?void 0:J.message,icon:(A=l==null?void 0:l.email)!=null&&A.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("notificationsEmail"),label:"Notifications Email",placeholder:"An email address we can send notifications about your developer account to",errorMessage:(je=l==null?void 0:l.notificationsEmail)==null?void 0:je.message,icon:(Se=l==null?void 0:l.notificationsEmail)!=null&&Se.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("noTaxRegistration"),label:"No VAT Number",type:"checkbox"})}),e.jsx(v,{children:e.jsx(h,{...o("taxNumber"),label:"VAT Number",placeholder:"If VAT registered, your must supply your VAT Number",disabled:L,errorMessage:(Me=l==null?void 0:l.taxNumber)==null?void 0:Me.message,icon:(ye=l==null?void 0:l.taxNumber)!=null&&ye.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("noregistrationNumber"),label:"No Company Reg Number",type:"checkbox"})}),e.jsx(v,{children:e.jsx(h,{...o("registrationNumber"),label:"Company Reg Number",placeholder:"If you have a formal company, your should supply the registration number",disabled:B,errorMessage:(Ce=l==null?void 0:l.registrationNumber)==null?void 0:Ce.message,icon:(Te=l==null?void 0:l.registrationNumber)!=null&&Te.message?"asterisk":null,intent:"danger"})}),e.jsx($,{children:e.jsxs(h,{children:[e.jsx(oa,{...o("about"),placeholder:"Tell us about your company in a few words. This will appear on your AppMarket listing pages"}),e.jsx(re,{children:"About Company"}),((Ie=l==null?void 0:l.about)==null?void 0:Ie.message)&&e.jsx(he,{message:l.about.message})]})}),e.jsx(v,{children:e.jsx(h,{...o("buildingName"),label:"Building Name",placeholder:"The building of your corporate office",errorMessage:(fe=l==null?void 0:l.buildingName)==null?void 0:fe.message,icon:(Ne=l==null?void 0:l.buildingName)!=null&&Ne.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("buildingNumber"),label:"Building Number",placeholder:"The number of your corporate office",errorMessage:(we=l==null?void 0:l.buildingNumber)==null?void 0:we.message,icon:(Ee=l==null?void 0:l.buildingNumber)!=null&&Ee.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("line1"),label:"Address Line 1",placeholder:"Line one of the address for your office",errorMessage:(Pe=l==null?void 0:l.line1)==null?void 0:Pe.message,icon:(Ae=l==null?void 0:l.line1)!=null&&Ae.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("line2"),label:"Address Line 2",placeholder:"Line two of the address for your office",errorMessage:(Re=l==null?void 0:l.line2)==null?void 0:Re.message,icon:(ke=l==null?void 0:l.line2)!=null&&ke.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("line3"),label:"Address Line 3",placeholder:"Line three of the address for your office",errorMessage:(Ge=l==null?void 0:l.line3)==null?void 0:Ge.message,icon:(De=l==null?void 0:l.line3)!=null&&De.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("line4"),label:"Address Line 4",placeholder:"Line four of the address for your office",errorMessage:(Be=l==null?void 0:l.line4)==null?void 0:Be.message,icon:(Le=l==null?void 0:l.line4)!=null&&Le.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...o("postcode"),label:"Postcode",placeholder:"Your office postcode",errorMessage:(Ue=l==null?void 0:l.postcode)==null?void 0:Ue.message,icon:(Fe=l==null?void 0:l.postcode)!=null&&Fe.message?"asterisk":null,intent:"danger"})}),e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(ua,{...o("countryId"),children:Oa.map(({label:ia,value:He})=>e.jsx("option",{value:He,children:ia},He))}),e.jsx(re,{children:"Country"})]})})]}),e.jsx(w,{children:e.jsx(T,{intent:"primary",type:"submit",disabled:n,loading:n,children:"Save Changes"})})]})},_a=()=>{const{connectSession:a}=U(I),i=a==null?void 0:a.loginIdentity.developerId,{Modal:n,openModal:u,closeModal:d}=_(),{isMobile:x}=X(),[s,g,,b]=te({reapitConnectBrowserSession:I,action:oe[ue.getDeveloper],uriParams:{developerId:i},fetchWhenTrue:[i]});return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:"Company"}),x&&e.jsxs(n,{title:"Controls",children:[e.jsx(V,{}),e.jsx(w,{alignment:"right",children:e.jsx(T,{intent:"default",onClick:d,children:"Close"})})]}),g&&e.jsx(Z,{}),s&&e.jsx(Ka,{developer:s,refreshDeveloper:b}),e.jsx(ae,{onClick:u})]})},Va=(a,i,n,u)=>()=>{(i||n||u)&&a()},xe=(a,i)=>()=>{a(i)},Wa=a=>()=>{a(void 0)},za=(a,i,n)=>()=>{const{name:u,jobTitle:d,email:x}=i,s=n==null?void 0:n.loginIdentity.email,g=n==null?void 0:n.loginIdentity.orgName;a({name:u,jobTitle:d,email:x,sender:s,message:`Resending your invite to the ${g} in the Reapit Developer Portal`})},Ja=({member:a,refreshMembers:i})=>{const{connectSession:n}=U(I),u=n==null?void 0:n.loginIdentity.email,[d,,x,s]=F({reapitConnectBrowserSession:I,action:H[O.updateMember],method:"PUT",uriParams:{developerId:a.developerId,memberId:a.id}}),[g,,b,y]=F({reapitConnectBrowserSession:I,action:H[O.updateMember],method:"DELETE",uriParams:{developerId:a.developerId,memberId:a.id}}),[m,,p,C]=F({reapitConnectBrowserSession:I,action:H[O.inviteMember],method:"POST",uriParams:{developerId:a.developerId}});P.useEffect(Va(i,s,y,C),[s,y,C]);const j=g||d||m,r=j||a.email===u;return e.jsxs(w,{alignment:"center",children:[e.jsxs(T,{intent:"primary",disabled:r,loading:j,onClick:xe(x,{...a,role:a.role==="admin"?"user":"admin"}),children:["Set As ",a.role==="admin"?"User":"Admin"]}),e.jsx(T,{intent:"primary",disabled:r,loading:j,onClick:za(p,a,n),children:"Invite Again"}),!a.isMainContact&&e.jsx(T,{intent:"primary",disabled:j,loading:j,onClick:xe(x,{...a,isMainContact:!0}),children:"Set As Main Contact"}),a.status==="active"&&e.jsx(T,{intent:"danger",disabled:r,loading:j,onClick:xe(x,{...a,status:"inactive"}),children:"Disable"}),e.jsx(T,{intent:"danger",disabled:r,loading:j,onClick:Wa(b),children:"Delete"})]})},Za=a=>a==="active"?"success":a==="rejected"?"danger":a==="pending"?"pending":"default",Qa=(a,i,n)=>()=>{a&&(n(),i(!1))},$a=()=>{var r;const{connectSession:a}=U(I),{globalRefreshState:i}=ne(),{isMobile:n}=X(),{Modal:u,openModal:d,closeModal:x}=_(),{members:[s,g]}=i,[b,y]=P.useState(1),m=a==null?void 0:a.loginIdentity.developerId,[p,C,,j]=te({reapitConnectBrowserSession:I,action:oe[ue.getDeveloperMembers],queryParams:{pageSize:12,pageNumber:b},uriParams:{developerId:m},fetchWhenTrue:[m]});return P.useEffect(Qa(s,g,j),[s]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:"Members"}),n&&e.jsxs(u,{title:"Controls",children:[e.jsx(V,{}),e.jsx(w,{alignment:"right",children:e.jsx(T,{intent:"default",onClick:x,children:"Close"})})]}),C&&e.jsx(Z,{}),e.jsx(Ke,{className:K,rows:(r=p==null?void 0:p.data)==null?void 0:r.map(o=>({cells:[{label:"Name",value:o.name??"",icon:"usernameSystem",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Status",value:"",children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{intent:Za(o.status??"")})," ",`${(o.status??"").charAt(0).toUpperCase()}${(o.status??"").slice(1).toLowerCase()}`]}),narrowTable:{showLabel:!0}},{label:"Email",value:o.email??"",icon:"emailSystem",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Role",value:o.role?`${o.role.charAt(0).toUpperCase()}${o.role.slice(1).toLowerCase()}`:"",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Main Contact",value:o.isMainContact?e.jsx(qe,{icon:"check",intent:"success"}):"-",narrowTable:{showLabel:!0}}],expandableContent:{content:e.jsx(Ja,{member:o,refreshMembers:j})}}))}),e.jsx(Ve,{callback:y,currentPage:b,numberPages:Math.ceil(((p==null?void 0:p.totalCount)??1)/((p==null?void 0:p.pageSize)??1))}),e.jsx(ae,{onClick:d})]})},{FIELD_REQUIRED:la,MAXIMUM_CHARACTER_LENGTH:sa}=ce,Xa=de().shape({name:c().trim().required(la).matches(Ze,"Full name is not valid").max(256,sa(256)).test(S),jobTitle:c().trim().required(la).matches($e,"Job title is not valid").max(256,sa(256)).test(S),gitHubUsername:c().trim().test({name:"isValidDescription",message:"GitHub Username is not valid",test:a=>a?Pa.test(a):!0}).test(S)});var el={appEnv:"development",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",chatbotAppId:"d0f4d712-c12a-4cdf-72a1-7e9795bc061a",marketplaceUrl:"https://marketplace.dev.paas.reapit.cloud/apps",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerEditionDownloadUrl:"https://updates.reapit.net/install/setupdev.exe",adobeSignApiKey:"CBFCIBAA3AAABLblqZhCDiTpm3mtYxQo6xlPEpdTIPMUeWo1RPWyJnzmq9hUu_O9-a96bDc8nX8bBYL8pztU",liveChatWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],elementsUri:"https://elements.dev.paas.reapit.cloud/?path=/docs/welcome--docs",graphQLUri:"https://graphql.dev.paas.reapit.cloud/graphql",analyticsSchemaDocsUrl:"https://reapit-analytics-schema.dev.paas.reapit.cloud",swaggerUri:"https://reapit-swagger-dev.s3.eu-west-2.amazonaws.com/foundations_swagger.json",DEPLOYMENT_SERVICE_HOST:"https://deployments.dev.paas.reapit.cloud/",PUSHER_KEY:"c48c04b607a9201f6054",zendeskUri:"https://static.zdassets.com/ekr/snippet.js?key=e8ed8416-ceb4-4e91-8186-097321c3ceda",pipelineWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],swaggerWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"]};const al=(a,i)=>()=>{i&&a()},ll=()=>{var M,l,B,L,R,k,G,D,W,z,J;const{globalDataState:a,globalRefreshCurrentMember:i}=ne(),{connectSession:n}=U(I),u=n==null?void 0:n.loginIdentity.clientId,d=n==null?void 0:n.loginIdentity.orgName,x=Ca(n),{currentMember:s,currentDeveloper:g}=a,b=u&&x,y=el.swaggerWhitelist.includes(g==null?void 0:g.id),[m]=te({reapitConnectBrowserSession:I,action:oe[ue.getSandboxes]}),[p,,C,j]=F({reapitConnectBrowserSession:I,action:H[O.updateMember],method:"PUT",uriParams:{developerId:s==null?void 0:s.developerId,memberId:s==null?void 0:s.id}});P.useEffect(al(i,j),[j]);const{register:r,handleSubmit:o,formState:{errors:t}}=be({resolver:me(Xa),defaultValues:{...s,name:(s==null?void 0:s.name)??"",jobTitle:(s==null?void 0:s.jobTitle)??"",gitHubUsername:(s==null?void 0:s.gitHubUsername)??"",useCustomerData:(s==null?void 0:s.useCustomerData)??!1,sandboxId:(s==null?void 0:s.sandboxId)||"GBR"}});return e.jsxs("form",{onSubmit:o(A=>C(A)),children:[e.jsx("div",{className:K,children:e.jsxs(q,{children:[e.jsx(v,{children:e.jsx(h,{...r("name"),label:"Name",placeholder:"Your full name here",errorMessage:(M=t.name)==null?void 0:M.message,icon:(l=t.name)!=null&&l.message?"asteriskSystem":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...r("jobTitle"),label:"Job Title",placeholder:"What role do you have at your company",errorMessage:(B=t.jobTitle)==null?void 0:B.message,icon:(L=t.jobTitle)!=null&&L.message?"asteriskSystem":null,intent:"danger"})}),e.jsx(v,{children:e.jsx(h,{...r("gitHubUsername"),label:"GitHub Username",placeholder:"Github handles help us tracking issues",errorMessage:(R=t.gitHubUsername)==null?void 0:R.message,icon:(k=t.gitHubUsername)!=null&&k.message?"asteriskSystem":null,intent:"danger"})})]})}),e.jsx("div",{className:K,children:e.jsxs(q,{children:[e.jsxs(v,{children:[e.jsx(Q,{hasNoMargin:!0,children:"Company Name"}),e.jsx(Y,{hasNoMargin:!0,hasGreyText:!0,children:g==null?void 0:g.company})]}),e.jsxs(v,{children:[e.jsx(Q,{hasNoMargin:!0,children:"Email Address"}),e.jsx(Y,{hasNoMargin:!0,hasGreyText:!0,children:s==null?void 0:s.email})]}),e.jsxs(v,{children:[e.jsx(Q,{hasNoMargin:!0,children:"Profile Settings"}),e.jsx(Y,{hasNoMargin:!0,hasGreyText:!0,children:n==null?void 0:n.loginIdentity.clientId})]})]})}),(b||y)&&e.jsx(Q,{hasNoMargin:!0,children:"Customer Data"}),b&&e.jsx(Y,{hasGreyText:!0,children:"As your account is associated with both the Sandbox Data (SBOX) and Customer Data, you can choose to toggle between which data you want to see available in the Developer Portal."}),y&&e.jsx(Y,{hasGreyText:!0,children:"You can choose which sandbox you wish to view based on your Reapit Product. This is specific and only associated to your developer profile."}),e.jsxs(q,{className:da,children:[b&&e.jsx(v,{children:e.jsxs(h,{children:[e.jsxs(re,{children:["Use ",d," Customer or Sandbox data"]}),e.jsxs(ca,{id:"useCustomerData",hasGreyBg:!0,...r("useCustomerData"),children:[e.jsx(We,{children:"Customer"}),e.jsx(We,{children:"Sandbox"})]}),((G=t.useCustomerData)==null?void 0:G.message)&&e.jsx(he,{message:(D=t.useCustomerData)==null?void 0:D.message})]})}),y&&e.jsx(v,{children:e.jsxs(h,{children:[e.jsx(ba,{hasGreyBg:!0,...r("sandboxId"),options:((W=m==null?void 0:m.data)==null?void 0:W.map(A=>({id:A.id??"",text:A.name??"",value:A.id??"",isChecked:(s==null?void 0:s.sandboxId)===A.id})))??[]}),e.jsx(re,{children:"Choose Sandbox"}),((z=t.sandboxId)==null?void 0:z.message)&&e.jsx(he,{message:(J=t.sandboxId)==null?void 0:J.message})]})})]}),(b||y)&&e.jsx(ze,{className:K,isInline:!0,isExpanded:!0,isFullWidth:!0,intent:"primary",children:"Please note, you will need to log out and log back in again to see this change take effect"}),e.jsx(w,{children:e.jsx(T,{intent:"primary",type:"submit",disabled:p,loading:p,children:"Save Changes"})})]})},sl=()=>{const{globalDataState:a}=ne(),{isMobile:i}=X(),{Modal:n,openModal:u,closeModal:d}=_(),{currentMember:x}=a;return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:"Profile"}),i&&e.jsxs(n,{title:"Controls",children:[e.jsx(V,{}),e.jsx(w,{alignment:"right",children:e.jsx(T,{intent:"default",onClick:d,children:"Close"})})]}),x?e.jsx(ll,{}):e.jsx(Z,{}),e.jsx(ae,{onClick:u})]})},nl=(a,i,n,u)=>()=>{(i||n||u)&&a()},il=(a,i,n)=>()=>{n&&(a(void 0),i(null))},rl=(a,i)=>()=>{a(i)},tl=()=>{var o,t;const{connectSession:a}=U(I),[i,n]=P.useState(null),[u,d]=P.useState(1),x=a==null?void 0:a.loginIdentity.developerId,{Modal:s,openModal:g,closeModal:b}=_(),{isMobile:y}=X(),[m,p,,C]=te({reapitConnectBrowserSession:I,action:oe[ue.getSubscriptions],queryParams:{pageSize:12,pageNumber:u,developerId:x},fetchWhenTrue:[x]}),[,,j,r]=F({reapitConnectBrowserSession:I,action:H[O.deleteSubscription],method:"DELETE",uriParams:{subscriptionId:i}});return P.useEffect(il(j,n,i),[i]),P.useEffect(nl(C,r),[r]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:"Subscriptions"}),y&&e.jsxs(s,{title:"Controls",children:[e.jsx(V,{}),e.jsx(w,{alignment:"right",children:e.jsx(T,{intent:"default",onClick:b,children:"Close"})})]}),p&&e.jsx(Z,{}),e.jsx(Ke,{className:K,numberColumns:8,rows:(o=m==null?void 0:m.data)==null?void 0:o.map(M=>({cells:[{label:"Type",value:M.summary??"",className:ma,cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Start Date",value:Je(M.created).format("DD MMM YYYY"),icon:"calendar",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Renewal Date",value:Je(M.renews).format("DD MMM YYYY"),icon:"calendar",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Frequency",value:M.frequency?`${M.frequency.charAt(0).toUpperCase()}${M.frequency.slice(1).toLowerCase()}`:"",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Cost",value:`\xA3${M.cost}`,icon:"pound",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Status",value:"",children:e.jsxs(e.Fragment,{children:[e.jsx(_e,{intent:M.cancelled?"danger":"success"})," ",M.cancelled?"Cancelled":"Active"]}),narrowTable:{showLabel:!0}}],ctaContent:{icon:"trash",headerContent:"Cancel Subscription",isCallToAction:!0,onClick:rl(n,M.id??null)}}))}),(t=m==null?void 0:m.data)!=null&&t.length?e.jsx(Ve,{callback:d,currentPage:u,numberPages:Math.ceil(((m==null?void 0:m.totalCount)??1)/((m==null?void 0:m.pageSize)??1))}):e.jsx(ze,{intent:"primary",isExpanded:!0,isFullWidth:!0,isInline:!0,children:"No subscriptions available for this account"}),e.jsx(ae,{onClick:g})]})},ol=()=>{const a=ha(),i=Oe(),{globalDataState:n}=ne(),{currentMember:u}=n,{pathname:d}=i;return e.jsx(Ta,{children:e.jsxs(va,{isFlexAuto:!0,children:[e.jsxs(ga,{children:[e.jsxs(pa,{className:xa,children:[e.jsx(le,{onClick:ie(a,f.SETTINGS_PROFILE),active:d===f.SETTINGS_PROFILE,children:"Profile"}),e.jsx(le,{onClick:ie(a,f.SETTINGS_PASSWORD),active:d===f.SETTINGS_PASSWORD,children:"Password"}),(u==null?void 0:u.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:ie(a,f.SETTINGS_MEMBERS),active:d===f.SETTINGS_MEMBERS,children:"Members"}),e.jsx(le,{onClick:ie(a,f.SETTINGS_COMPANY),active:d===f.SETTINGS_COMPANY,children:"Company"}),e.jsx(le,{onClick:ie(a,f.SETTINGS_SUBSCRIPTIONS),active:d===f.SETTINGS_SUBSCRIPTIONS,children:"Subscriptions"})]})]}),e.jsx(V,{})]}),e.jsx(ja,{className:Sa,children:e.jsxs(Ma,{children:[e.jsx(se,{path:f.SETTINGS_PROFILE.replace("/settings/",""),element:e.jsx(sl,{})}),e.jsx(se,{path:f.SETTINGS_PASSWORD.replace("/settings/",""),element:e.jsx(Fa,{})}),e.jsx(se,{path:f.SETTINGS_MEMBERS.replace("/settings/",""),element:e.jsx($a,{})}),e.jsx(se,{path:f.SETTINGS_COMPANY.replace("/settings/",""),element:e.jsx(_a,{})}),e.jsx(se,{path:f.SETTINGS_SUBSCRIPTIONS.replace("/settings/",""),element:e.jsx(tl,{})})]})})]})})},na=()=>e.jsx(ol,{});export{na as Settings,na as default};
