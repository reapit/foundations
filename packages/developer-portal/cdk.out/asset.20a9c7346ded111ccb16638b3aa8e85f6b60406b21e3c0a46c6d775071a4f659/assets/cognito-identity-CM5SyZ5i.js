import{aW as He,bF as Ee}from"./vendor-q73t4OJb.js";import{b as Et,i as Tt}from"./index-C6DP0Ld9.js";import{l as pe}from"./index-DkTsc282.js";/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var Dt=function(){function o(e){var i=e||{},n=i.ValidationData,a=i.Username,f=i.Password,c=i.AuthParameters,l=i.ClientMetadata;this.validationData=n||{},this.authParameters=c||{},this.clientMetadata=l||{},this.username=a,this.password=f}var r=o.prototype;return r.getUsername=function(){return this.username},r.getPassword=function(){return this.password},r.getValidationData=function(){return this.validationData},r.getAuthParameters=function(){return this.authParameters},r.getClientMetadata=function(){return this.clientMetadata},o}(),D={},bt={}.toString,It=Array.isArray||function(o){return bt.call(o)=="[object Array]"};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/(function(o){var r=Et,e=Tt,i=It;o.Buffer=c,o.SlowBuffer=T,o.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=He.TYPED_ARRAY_SUPPORT!==void 0?He.TYPED_ARRAY_SUPPORT:n(),o.kMaxLength=a();function n(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42&&typeof t.subarray=="function"&&t.subarray(1,1).byteLength===0}catch{return!1}}function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(t,s){if(a()<s)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(s),t.__proto__=c.prototype):(t===null&&(t=new c(s)),t.length=s),t}function c(t,s,u){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,s,u);if(typeof t=="number"){if(typeof s=="string")throw new Error("If encoding is specified then the first argument must be a string");return y(this,t)}return l(this,t,s,u)}c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t};function l(t,s,u,h){if(typeof s=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer?A(t,s,u,h):typeof s=="string"?m(t,s,u):U(t,s)}c.from=function(t,s,u){return l(null,t,s,u)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0}));function p(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function v(t,s,u,h){return p(s),s<=0?f(t,s):u!==void 0?typeof h=="string"?f(t,s).fill(u,h):f(t,s).fill(u):f(t,s)}c.alloc=function(t,s,u){return v(null,t,s,u)};function y(t,s){if(p(s),t=f(t,s<0?0:E(s)|0),!c.TYPED_ARRAY_SUPPORT)for(var u=0;u<s;++u)t[u]=0;return t}c.allocUnsafe=function(t){return y(null,t)},c.allocUnsafeSlow=function(t){return y(null,t)};function m(t,s,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError('"encoding" must be a valid string encoding');var h=L(s,u)|0;t=f(t,h);var d=t.write(s,u);return d!==h&&(t=t.slice(0,d)),t}function S(t,s){var u=s.length<0?0:E(s.length)|0;t=f(t,u);for(var h=0;h<u;h+=1)t[h]=s[h]&255;return t}function A(t,s,u,h){if(s.byteLength,u<0||s.byteLength<u)throw new RangeError("'offset' is out of bounds");if(s.byteLength<u+(h||0))throw new RangeError("'length' is out of bounds");return u===void 0&&h===void 0?s=new Uint8Array(s):h===void 0?s=new Uint8Array(s,u):s=new Uint8Array(s,u,h),c.TYPED_ARRAY_SUPPORT?(t=s,t.__proto__=c.prototype):t=S(t,s),t}function U(t,s){if(c.isBuffer(s)){var u=E(s.length)|0;return t=f(t,u),t.length===0||s.copy(t,0,0,u),t}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||At(s.length)?f(t,0):S(t,s);if(s.type==="Buffer"&&i(s.data))return S(t,s.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function E(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return t|0}function T(t){return+t!=t&&(t=0),c.alloc(+t)}c.isBuffer=function(t){return!!(t!=null&&t._isBuffer)},c.compare=function(t,s){if(!c.isBuffer(t)||!c.isBuffer(s))throw new TypeError("Arguments must be Buffers");if(t===s)return 0;for(var u=t.length,h=s.length,d=0,g=Math.min(u,h);d<g;++d)if(t[d]!==s[d]){u=t[d],h=s[d];break}return u<h?-1:h<u?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,s){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);var u;if(s===void 0)for(s=0,u=0;u<t.length;++u)s+=t[u].length;var h=c.allocUnsafe(s),d=0;for(u=0;u<t.length;++u){var g=t[u];if(!c.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(h,d),d+=g.length}return h};function L(t,s){if(c.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var u=t.length;if(u===0)return 0;for(var h=!1;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":case void 0:return fe(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return qe(t).length;default:if(h)return fe(t).length;s=(""+s).toLowerCase(),h=!0}}c.byteLength=L;function W(t,s,u){var h=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(t||(t="utf8");;)switch(t){case"hex":return gt(this,s,u);case"utf8":case"utf-8":return J(this,s,u);case"ascii":return pt(this,s,u);case"latin1":case"binary":return dt(this,s,u);case"base64":return se(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,s,u);default:if(h)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),h=!0}}c.prototype._isBuffer=!0;function M(t,s,u){var h=t[s];t[s]=t[u],t[u]=h}c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<t;s+=2)M(this,s,s+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<t;s+=4)M(this,s,s+3),M(this,s+1,s+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<t;s+=8)M(this,s,s+7),M(this,s+1,s+6),M(this,s+2,s+5),M(this,s+3,s+4);return this},c.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?J(this,0,t):W.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0},c.prototype.inspect=function(){var t="",s=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,s).match(/.{2}/g).join(" "),this.length>s&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,s,u,h,d){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(s===void 0&&(s=0),u===void 0&&(u=t?t.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),s<0||u>t.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&s>=u)return 0;if(h>=d)return-1;if(s>=u)return 1;if(s>>>=0,u>>>=0,h>>>=0,d>>>=0,this===t)return 0;for(var g=d-h,C=u-s,b=Math.min(g,C),R=this.slice(h,d),I=t.slice(s,u),_=0;_<b;++_)if(R[_]!==I[_]){g=R[_],C=I[_];break}return g<C?-1:C<g?1:0};function Y(t,s,u,h,d){if(t.length===0)return-1;if(typeof u=="string"?(h=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,isNaN(u)&&(u=d?0:t.length-1),u<0&&(u=t.length+u),u>=t.length){if(d)return-1;u=t.length-1}else if(u<0)if(d)u=0;else return-1;if(typeof s=="string"&&(s=c.from(s,h)),c.isBuffer(s))return s.length===0?-1:Z(t,s,u,h,d);if(typeof s=="number")return s=s&255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(t,s,u):Uint8Array.prototype.lastIndexOf.call(t,s,u):Z(t,[s],u,h,d);throw new TypeError("val must be string, number or Buffer")}function Z(t,s,u,h,d){var g=1,C=t.length,b=s.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(t.length<2||s.length<2)return-1;g=2,C/=2,b/=2,u/=2}function R(je,Ye){return g===1?je[Ye]:je.readUInt16BE(Ye*g)}var I;if(d){var _=-1;for(I=u;I<C;I++)if(R(t,I)===R(s,_===-1?0:I-_)){if(_===-1&&(_=I),I-_+1===b)return _*g}else _!==-1&&(I-=I-_),_=-1}else for(u+b>C&&(u=C-b),I=u;I>=0;I--){for(var k=!0,le=0;le<b;le++)if(R(t,I+le)!==R(s,le)){k=!1;break}if(k)return I}return-1}c.prototype.includes=function(t,s,u){return this.indexOf(t,s,u)!==-1},c.prototype.indexOf=function(t,s,u){return Y(this,t,s,u,!0)},c.prototype.lastIndexOf=function(t,s,u){return Y(this,t,s,u,!1)};function q(t,s,u,h){u=Number(u)||0;var d=t.length-u;h?(h=Number(h),h>d&&(h=d)):h=d;var g=s.length;if(g%2!==0)throw new TypeError("Invalid hex string");h>g/2&&(h=g/2);for(var C=0;C<h;++C){var b=parseInt(s.substr(C*2,2),16);if(isNaN(b))return C;t[u+C]=b}return C}function x(t,s,u,h){return he(fe(s,t.length-u),t,u,h)}function H(t,s,u,h){return he(Ct(s),t,u,h)}function z(t,s,u,h){return H(t,s,u,h)}function X(t,s,u,h){return he(qe(s),t,u,h)}function $(t,s,u,h){return he(Ut(s,t.length-u),t,u,h)}c.prototype.write=function(t,s,u,h){if(s===void 0)h="utf8",u=this.length,s=0;else if(u===void 0&&typeof s=="string")h=s,u=this.length,s=0;else if(isFinite(s))s=s|0,isFinite(u)?(u=u|0,h===void 0&&(h="utf8")):(h=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-s;if((u===void 0||u>d)&&(u=d),t.length>0&&(u<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var g=!1;;)switch(h){case"hex":return q(this,t,s,u);case"utf8":case"utf-8":return x(this,t,s,u);case"ascii":return H(this,t,s,u);case"latin1":case"binary":return z(this,t,s,u);case"base64":return X(this,t,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,s,u);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(t,s,u){return s===0&&u===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(s,u))}function J(t,s,u){u=Math.min(t.length,u);for(var h=[],d=s;d<u;){var g=t[d],C=null,b=g>239?4:g>223?3:g>191?2:1;if(d+b<=u){var R,I,_,k;switch(b){case 1:g<128&&(C=g);break;case 2:R=t[d+1],(R&192)===128&&(k=(g&31)<<6|R&63,k>127&&(C=k));break;case 3:R=t[d+1],I=t[d+2],(R&192)===128&&(I&192)===128&&(k=(g&15)<<12|(R&63)<<6|I&63,k>2047&&(k<55296||k>57343)&&(C=k));break;case 4:R=t[d+1],I=t[d+2],_=t[d+3],(R&192)===128&&(I&192)===128&&(_&192)===128&&(k=(g&15)<<18|(R&63)<<12|(I&63)<<6|_&63,k>65535&&k<1114112&&(C=k))}}C===null?(C=65533,b=1):C>65535&&(C-=65536,h.push(C>>>10&1023|55296),C=56320|C&1023),h.push(C),d+=b}return lt(h)}var ae=4096;function lt(t){var s=t.length;if(s<=ae)return String.fromCharCode.apply(String,t);for(var u="",h=0;h<s;)u+=String.fromCharCode.apply(String,t.slice(h,h+=ae));return u}function pt(t,s,u){var h="";u=Math.min(t.length,u);for(var d=s;d<u;++d)h+=String.fromCharCode(t[d]&127);return h}function dt(t,s,u){var h="";u=Math.min(t.length,u);for(var d=s;d<u;++d)h+=String.fromCharCode(t[d]);return h}function gt(t,s,u){var h=t.length;(!s||s<0)&&(s=0),(!u||u<0||u>h)&&(u=h);for(var d="",g=s;g<u;++g)d+=wt(t[g]);return d}function vt(t,s,u){for(var h=t.slice(s,u),d="",g=0;g<h.length;g+=2)d+=String.fromCharCode(h[g]+h[g+1]*256);return d}c.prototype.slice=function(t,s){var u=this.length;t=~~t,s=s===void 0?u:~~s,t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),s<0?(s+=u,s<0&&(s=0)):s>u&&(s=u),s<t&&(s=t);var h;if(c.TYPED_ARRAY_SUPPORT)h=this.subarray(t,s),h.__proto__=c.prototype;else{var d=s-t;h=new c(d,void 0);for(var g=0;g<d;++g)h[g]=this[g+t]}return h};function P(t,s,u){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+s>u)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(t,s,u){t=t|0,s=s|0,u||P(t,s,this.length);for(var h=this[t],d=1,g=0;++g<s&&(d*=256);)h+=this[t+g]*d;return h},c.prototype.readUIntBE=function(t,s,u){t=t|0,s=s|0,u||P(t,s,this.length);for(var h=this[t+--s],d=1;s>0&&(d*=256);)h+=this[t+--s]*d;return h},c.prototype.readUInt8=function(t,s){return s||P(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,s){return s||P(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,s){return s||P(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,s){return s||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},c.prototype.readUInt32BE=function(t,s){return s||P(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,s,u){t=t|0,s=s|0,u||P(t,s,this.length);for(var h=this[t],d=1,g=0;++g<s&&(d*=256);)h+=this[t+g]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*s)),h},c.prototype.readIntBE=function(t,s,u){t=t|0,s=s|0,u||P(t,s,this.length);for(var h=s,d=1,g=this[t+--h];h>0&&(d*=256);)g+=this[t+--h]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*s)),g},c.prototype.readInt8=function(t,s){return s||P(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},c.prototype.readInt16LE=function(t,s){s||P(t,2,this.length);var u=this[t]|this[t+1]<<8;return u&32768?u|4294901760:u},c.prototype.readInt16BE=function(t,s){s||P(t,2,this.length);var u=this[t+1]|this[t]<<8;return u&32768?u|4294901760:u},c.prototype.readInt32LE=function(t,s){return s||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,s){return s||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,s){return s||P(t,4,this.length),e.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,s){return s||P(t,4,this.length),e.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,s){return s||P(t,8,this.length),e.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,s){return s||P(t,8,this.length),e.read(this,t,!1,52,8)};function O(t,s,u,h,d,g){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>d||s<g)throw new RangeError('"value" argument is out of bounds');if(u+h>t.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(t,s,u,h){if(t=+t,s=s|0,u=u|0,!h){var d=Math.pow(2,8*u)-1;O(this,t,s,u,d,0)}var g=1,C=0;for(this[s]=t&255;++C<u&&(g*=256);)this[s+C]=t/g&255;return s+u},c.prototype.writeUIntBE=function(t,s,u,h){if(t=+t,s=s|0,u=u|0,!h){var d=Math.pow(2,8*u)-1;O(this,t,s,u,d,0)}var g=u-1,C=1;for(this[s+g]=t&255;--g>=0&&(C*=256);)this[s+g]=t/C&255;return s+u},c.prototype.writeUInt8=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[s]=t&255,s+1};function ue(t,s,u,h){s<0&&(s=65535+s+1);for(var d=0,g=Math.min(t.length-u,2);d<g;++d)t[u+d]=(s&255<<8*(h?d:1-d))>>>(h?d:1-d)*8}c.prototype.writeUInt16LE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[s]=t&255,this[s+1]=t>>>8):ue(this,t,s,!0),s+2},c.prototype.writeUInt16BE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[s]=t>>>8,this[s+1]=t&255):ue(this,t,s,!1),s+2};function ce(t,s,u,h){s<0&&(s=4294967295+s+1);for(var d=0,g=Math.min(t.length-u,4);d<g;++d)t[u+d]=s>>>(h?d:3-d)*8&255}c.prototype.writeUInt32LE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[s+3]=t>>>24,this[s+2]=t>>>16,this[s+1]=t>>>8,this[s]=t&255):ce(this,t,s,!0),s+4},c.prototype.writeUInt32BE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[s]=t>>>24,this[s+1]=t>>>16,this[s+2]=t>>>8,this[s+3]=t&255):ce(this,t,s,!1),s+4},c.prototype.writeIntLE=function(t,s,u,h){if(t=+t,s=s|0,!h){var d=Math.pow(2,8*u-1);O(this,t,s,u,d-1,-d)}var g=0,C=1,b=0;for(this[s]=t&255;++g<u&&(C*=256);)t<0&&b===0&&this[s+g-1]!==0&&(b=1),this[s+g]=(t/C>>0)-b&255;return s+u},c.prototype.writeIntBE=function(t,s,u,h){if(t=+t,s=s|0,!h){var d=Math.pow(2,8*u-1);O(this,t,s,u,d-1,-d)}var g=u-1,C=1,b=0;for(this[s+g]=t&255;--g>=0&&(C*=256);)t<0&&b===0&&this[s+g+1]!==0&&(b=1),this[s+g]=(t/C>>0)-b&255;return s+u},c.prototype.writeInt8=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[s]=t&255,s+1},c.prototype.writeInt16LE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[s]=t&255,this[s+1]=t>>>8):ue(this,t,s,!0),s+2},c.prototype.writeInt16BE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[s]=t>>>8,this[s+1]=t&255):ue(this,t,s,!1),s+2},c.prototype.writeInt32LE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[s]=t&255,this[s+1]=t>>>8,this[s+2]=t>>>16,this[s+3]=t>>>24):ce(this,t,s,!0),s+4},c.prototype.writeInt32BE=function(t,s,u){return t=+t,s=s|0,u||O(this,t,s,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[s]=t>>>24,this[s+1]=t>>>16,this[s+2]=t>>>8,this[s+3]=t&255):ce(this,t,s,!1),s+4};function Ke(t,s,u,h,d,g){if(u+h>t.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Ve(t,s,u,h,d){return d||Ke(t,s,u,4),e.write(t,s,u,h,23,4),u+4}c.prototype.writeFloatLE=function(t,s,u){return Ve(this,t,s,!0,u)},c.prototype.writeFloatBE=function(t,s,u){return Ve(this,t,s,!1,u)};function Le(t,s,u,h,d){return d||Ke(t,s,u,8),e.write(t,s,u,h,52,8),u+8}c.prototype.writeDoubleLE=function(t,s,u){return Le(this,t,s,!0,u)},c.prototype.writeDoubleBE=function(t,s,u){return Le(this,t,s,!1,u)},c.prototype.copy=function(t,s,u,h){if(u||(u=0),!h&&h!==0&&(h=this.length),s>=t.length&&(s=t.length),s||(s=0),h>0&&h<u&&(h=u),h===u||t.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("sourceStart out of bounds");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-s<h-u&&(h=t.length-s+u);var d=h-u,g;if(this===t&&u<s&&s<h)for(g=d-1;g>=0;--g)t[g+s]=this[g+u];else if(d<1e3||!c.TYPED_ARRAY_SUPPORT)for(g=0;g<d;++g)t[g+s]=this[g+u];else Uint8Array.prototype.set.call(t,this.subarray(u,u+d),s);return d},c.prototype.fill=function(t,s,u,h){if(typeof t=="string"){if(typeof s=="string"?(h=s,s=0,u=this.length):typeof u=="string"&&(h=u,u=this.length),t.length===1){var d=t.charCodeAt(0);d<256&&(t=d)}if(h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h)}else typeof t=="number"&&(t=t&255);if(s<0||this.length<s||this.length<u)throw new RangeError("Out of range index");if(u<=s)return this;s=s>>>0,u=u===void 0?this.length:u>>>0,t||(t=0);var g;if(typeof t=="number")for(g=s;g<u;++g)this[g]=t;else{var C=c.isBuffer(t)?t:fe(new c(t,h).toString()),b=C.length;for(g=0;g<u-s;++g)this[g+s]=C[g%b]}return this};var yt=/[^+\/0-9A-Za-z-_]/g;function mt(t){if(t=St(t).replace(yt,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function St(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function wt(t){return t<16?"0"+t.toString(16):t.toString(16)}function fe(t,s){s=s||1/0;for(var u,h=t.length,d=null,g=[],C=0;C<h;++C){if(u=t.charCodeAt(C),u>55295&&u<57344){if(!d){if(u>56319){(s-=3)>-1&&g.push(239,191,189);continue}else if(C+1===h){(s-=3)>-1&&g.push(239,191,189);continue}d=u;continue}if(u<56320){(s-=3)>-1&&g.push(239,191,189),d=u;continue}u=(d-55296<<10|u-56320)+65536}else d&&(s-=3)>-1&&g.push(239,191,189);if(d=null,u<128){if((s-=1)<0)break;g.push(u)}else if(u<2048){if((s-=2)<0)break;g.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;g.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;g.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return g}function Ct(t){for(var s=[],u=0;u<t.length;++u)s.push(t.charCodeAt(u)&255);return s}function Ut(t,s){for(var u,h,d,g=[],C=0;C<t.length&&!((s-=2)<0);++C)u=t.charCodeAt(C),h=u>>8,d=u%256,g.push(d),g.push(h);return g}function qe(t){return r.toByteArray(mt(t))}function he(t,s,u,h){for(var d=0;d<h&&!(d+u>=s.length||d>=t.length);++d)s[d+u]=t[d];return d}function At(t){return t!==t}})(D);var N;if(typeof window<"u"&&window.crypto&&(N=window.crypto),!N&&typeof window<"u"&&window.msCrypto&&(N=window.msCrypto),!N&&typeof global<"u"&&global.crypto&&(N=global.crypto),!N&&typeof require=="function")try{N=require("crypto")}catch{}function _t(){if(N){if(typeof N.getRandomValues=="function")try{return N.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof N.randomBytes=="function")try{return N.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function Pt(o){for(var r=o.words,e=o.sigBytes,i=[],n=0;n<e;n++){var a=r[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((a&15).toString(16))}return i.join("")}var Rt=function(){function o(e,i){e=this.words=e||[],i!=null?this.sigBytes=i:this.sigBytes=e.length*4}var r=o.prototype;return r.random=function(e){for(var i=[],n=0;n<e;n+=4)i.push(_t());return new o(i,e)},r.toString=function(){return Pt(this)},o}(),Q={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Te=function(o,r){return Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},Te(o,r)};function kt(o,r){Te(o,r);function e(){this.constructor=o}o.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var De=function(){return De=Object.assign||function(o){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(o[n]=r[n])}return o},De.apply(this,arguments)};function Bt(o,r){var e={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&r.indexOf(i)<0&&(e[i]=o[i]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(o);n<i.length;n++)r.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(o,i[n])&&(e[i[n]]=o[i[n]]);return e}function Ot(o,r,e,i){var n=arguments.length,a=n<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(o,r,e,i);else for(var c=o.length-1;c>=0;c--)(f=o[c])&&(a=(n<3?f(a):n>3?f(r,e,a):f(r,e))||a);return n>3&&a&&Object.defineProperty(r,e,a),a}function Ft(o,r){return function(e,i){r(e,i,o)}}function Mt(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function xt(o,r,e,i){function n(a){return a instanceof e?a:new e(function(f){f(a)})}return new(e||(e=Promise))(function(a,f){function c(v){try{p(i.next(v))}catch(y){f(y)}}function l(v){try{p(i.throw(v))}catch(y){f(y)}}function p(v){v.done?a(v.value):n(v.value).then(c,l)}p((i=i.apply(o,r||[])).next())})}function Nt(o,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,f;return f={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function c(p){return function(v){return l([p,v])}}function l(p){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(a=p[0]&2?n.return:p[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,p[1])).done)return a;switch(n=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,n=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){e.label=p[1];break}if(p[0]===6&&e.label<a[1]){e.label=a[1],a=p;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(p);break}a[2]&&e.ops.pop(),e.trys.pop();continue}p=r.call(o,e)}catch(v){p=[6,v],n=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Kt(o,r,e,i){i===void 0&&(i=e),o[i]=r[e]}function Vt(o,r){for(var e in o)e!=="default"&&!r.hasOwnProperty(e)&&(r[e]=o[e])}function be(o){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&o[r],i=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Je(o,r){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var i=e.call(o),n,a=[],f;try{for(;(r===void 0||r-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(c){f={error:c}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(f)throw f.error}}return a}function Lt(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Je(arguments[r]));return o}function qt(){for(var o=0,r=0,e=arguments.length;r<e;r++)o+=arguments[r].length;for(var i=Array(o),n=0,r=0;r<e;r++)for(var a=arguments[r],f=0,c=a.length;f<c;f++,n++)i[n]=a[f];return i}function ie(o){return this instanceof ie?(this.v=o,this):new ie(o)}function jt(o,r,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(o,r||[]),n,a=[];return n={},f("next"),f("throw"),f("return"),n[Symbol.asyncIterator]=function(){return this},n;function f(m){i[m]&&(n[m]=function(S){return new Promise(function(A,U){a.push([m,S,A,U])>1||c(m,S)})})}function c(m,S){try{l(i[m](S))}catch(A){y(a[0][3],A)}}function l(m){m.value instanceof ie?Promise.resolve(m.value.v).then(p,v):y(a[0][2],m)}function p(m){c("next",m)}function v(m){c("throw",m)}function y(m,S){m(S),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Yt(o){var r,e;return r={},i("next"),i("throw",function(n){throw n}),i("return"),r[Symbol.iterator]=function(){return this},r;function i(n,a){r[n]=o[n]?function(f){return(e=!e)?{value:ie(o[n](f)),done:n==="return"}:a?a(f):f}:a}}function Ht(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],e;return r?r.call(o):(o=typeof be=="function"?be(o):o[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(a){e[a]=o[a]&&function(f){return new Promise(function(c,l){f=o[a](f),n(c,l,f.done,f.value)})}}function n(a,f,c,l){Promise.resolve(l).then(function(p){a({value:p,done:c})},f)}}function Jt(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function Gt(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var e in o)Object.hasOwnProperty.call(o,e)&&(r[e]=o[e]);return r.default=o,r}function Wt(o){return o&&o.__esModule?o:{default:o}}function Zt(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function zt(o,r,e){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,e),e}const Xt=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return De},__asyncDelegator:Yt,__asyncGenerator:jt,__asyncValues:Ht,__await:ie,__awaiter:xt,__classPrivateFieldGet:Zt,__classPrivateFieldSet:zt,__createBinding:Kt,__decorate:Ot,__exportStar:Vt,__extends:kt,__generator:Nt,__importDefault:Wt,__importStar:Gt,__makeTemplateObject:Jt,__metadata:Mt,__param:Ft,__read:Je,__rest:Bt,__spread:Lt,__spreadArrays:qt,__values:be},Symbol.toStringTag,{value:"Module"})),Ge=Ee(Xt);var de={},F={};Object.defineProperty(F,"__esModule",{value:!0}),F.MAX_HASHABLE_LENGTH=F.INIT=F.KEY=F.DIGEST_LENGTH=F.BLOCK_SIZE=void 0,F.BLOCK_SIZE=64,F.DIGEST_LENGTH=32,F.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),F.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],F.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.RawSha256=void 0;var K=F,$t=function(){function o(){this.state=Int32Array.from(K.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o.prototype.update=function(r){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=0,i=r.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>K.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=r[e++],i--,this.bufferLength===K.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},o.prototype.digest=function(){if(!this.finished){var r=this.bytesHashed*8,e=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(e.setUint8(this.bufferLength++,128),i%K.BLOCK_SIZE>=K.BLOCK_SIZE-8){for(var n=this.bufferLength;n<K.BLOCK_SIZE;n++)e.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<K.BLOCK_SIZE-8;n++)e.setUint8(n,0);e.setUint32(K.BLOCK_SIZE-8,Math.floor(r/4294967296),!0),e.setUint32(K.BLOCK_SIZE-4,r),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(K.DIGEST_LENGTH),n=0;n<8;n++)a[n*4]=this.state[n]>>>24&255,a[n*4+1]=this.state[n]>>>16&255,a[n*4+2]=this.state[n]>>>8&255,a[n*4+3]=this.state[n]>>>0&255;return a},o.prototype.hashBuffer=function(){for(var r=this,e=r.buffer,i=r.state,n=i[0],a=i[1],f=i[2],c=i[3],l=i[4],p=i[5],v=i[6],y=i[7],m=0;m<K.BLOCK_SIZE;m++){if(m<16)this.temp[m]=(e[m*4]&255)<<24|(e[m*4+1]&255)<<16|(e[m*4+2]&255)<<8|e[m*4+3]&255;else{var S=this.temp[m-2],A=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10;S=this.temp[m-15];var U=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3;this.temp[m]=(A+this.temp[m-7]|0)+(U+this.temp[m-16]|0)}var E=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&p^~l&v)|0)+(y+(K.KEY[m]+this.temp[m]|0)|0)|0,T=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&a^n&f^a&f)|0;y=v,v=p,p=l,l=c+E|0,c=f,f=a,a=n,n=E+T|0}i[0]+=n,i[1]+=a,i[2]+=f,i[3]+=c,i[4]+=l,i[5]+=p,i[6]+=v,i[7]+=y},o}();ge.RawSha256=$t;var We={},ve={};const Qt=o=>{const r=[];for(let e=0,i=o.length;e<i;e++){const n=o.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192,n&63|128);else if(e+1<o.length&&(n&64512)===55296&&(o.charCodeAt(e+1)&64512)===56320){const a=65536+((n&1023)<<10)+(o.charCodeAt(++e)&1023);r.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else r.push(n>>12|224,n>>6&63|128,n&63|128)}return Uint8Array.from(r)},er=o=>{let r="";for(let e=0,i=o.length;e<i;e++){const n=o[e];if(n<128)r+=String.fromCharCode(n);else if(192<=n&&n<224){const a=o[++e];r+=String.fromCharCode((n&31)<<6|a&63)}else if(240<=n&&n<365){const a="%"+[n,o[++e],o[++e],o[++e]].map(f=>f.toString(16)).join("%");r+=decodeURIComponent(a)}else r+=String.fromCharCode((n&15)<<12|(o[++e]&63)<<6|o[++e]&63)}return r};function tr(o){return new TextEncoder().encode(o)}function rr(o){return new TextDecoder("utf-8").decode(o)}const nr=o=>typeof TextEncoder=="function"?tr(o):Qt(o),ir=o=>typeof TextDecoder=="function"?rr(o):er(o),or=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:nr,toUtf8:ir},Symbol.toStringTag,{value:"Module"})),sr=Ee(or);Object.defineProperty(ve,"__esModule",{value:!0}),ve.convertToBuffer=void 0;var ar=sr,ur=typeof Buffer<"u"&&Buffer.from?function(o){return Buffer.from(o,"utf8")}:ar.fromUtf8;function cr(o){return o instanceof Uint8Array?o:typeof o=="string"?ur(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}ve.convertToBuffer=cr;var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.isEmptyData=void 0;function fr(o){return typeof o=="string"?o.length===0:o.byteLength===0}ye.isEmptyData=fr;var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.numToUint8=void 0;function hr(o){return new Uint8Array([(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255])}me.numToUint8=hr;var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.uint32ArrayFrom=void 0;function lr(o){if(!Array.from){for(var r=new Uint32Array(o.length),e=0;e<o.length;)r[e]=o[e];return r}return Uint32Array.from(o)}Se.uint32ArrayFrom=lr,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.uint32ArrayFrom=o.numToUint8=o.isEmptyData=o.convertToBuffer=void 0;var r=ve;Object.defineProperty(o,"convertToBuffer",{enumerable:!0,get:function(){return r.convertToBuffer}});var e=ye;Object.defineProperty(o,"isEmptyData",{enumerable:!0,get:function(){return e.isEmptyData}});var i=me;Object.defineProperty(o,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var n=Se;Object.defineProperty(o,"uint32ArrayFrom",{enumerable:!0,get:function(){return n.uint32ArrayFrom}})}(We),Object.defineProperty(de,"__esModule",{value:!0}),de.Sha256=void 0;var Ze=Ge,we=F,Ie=ge,_e=We,pr=function(){function o(r){if(this.hash=new Ie.RawSha256,r){this.outer=new Ie.RawSha256;var e=dr(r),i=new Uint8Array(we.BLOCK_SIZE);i.set(e);for(var n=0;n<we.BLOCK_SIZE;n++)e[n]^=54,i[n]^=92;this.hash.update(e),this.outer.update(i);for(var n=0;n<e.byteLength;n++)e[n]=0}}return o.prototype.update=function(r){if(!((0,_e.isEmptyData)(r)||this.error))try{this.hash.update((0,_e.convertToBuffer)(r))}catch(e){this.error=e}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return(0,Ze.__awaiter)(this,void 0,void 0,function(){return(0,Ze.__generator)(this,function(r){return[2,this.digestSync()]})})},o}();de.Sha256=pr;function dr(o){var r=(0,_e.convertToBuffer)(o);if(r.byteLength>we.BLOCK_SIZE){var e=new Ie.RawSha256;e.update(r),r=e.digest()}var i=new Uint8Array(we.BLOCK_SIZE);return i.set(r),i}(function(o){Object.defineProperty(o,"__esModule",{value:!0});var r=Ge;(0,r.__exportStar)(de,o)})(Q);function w(o,r){o!=null&&this.fromString(o,r)}function B(){return new w(null)}var j,gr=0xdeadbeefcafe,ze=(gr&16777215)==15715070;function vr(o,r,e,i,n,a){for(;--a>=0;){var f=r*this[o++]+e[i]+n;n=Math.floor(f/67108864),e[i++]=f&67108863}return n}function yr(o,r,e,i,n,a){for(var f=r&32767,c=r>>15;--a>=0;){var l=this[o]&32767,p=this[o++]>>15,v=c*l+p*f;l=f*l+((v&32767)<<15)+e[i]+(n&1073741823),n=(l>>>30)+(v>>>15)+c*p+(n>>>30),e[i++]=l&1073741823}return n}function mr(o,r,e,i,n,a){for(var f=r&16383,c=r>>14;--a>=0;){var l=this[o]&16383,p=this[o++]>>14,v=c*l+p*f;l=f*l+((v&16383)<<14)+e[i]+n,n=(l>>28)+(v>>14)+c*p,e[i++]=l&268435455}return n}var Xe=typeof navigator<"u";Xe&&ze&&navigator.appName=="Microsoft Internet Explorer"?(w.prototype.am=yr,j=30):Xe&&ze&&navigator.appName!="Netscape"?(w.prototype.am=vr,j=26):(w.prototype.am=mr,j=28),w.prototype.DB=j,w.prototype.DM=(1<<j)-1,w.prototype.DV=1<<j;var Pe=52;w.prototype.FV=Math.pow(2,Pe),w.prototype.F1=Pe-j,w.prototype.F2=2*j-Pe;var Sr="0123456789abcdefghijklmnopqrstuvwxyz",Ce=new Array,ee,V;for(ee=48,V=0;V<=9;++V)Ce[ee++]=V;for(ee=97,V=10;V<36;++V)Ce[ee++]=V;for(ee=65,V=10;V<36;++V)Ce[ee++]=V;function $e(o){return Sr.charAt(o)}function wr(o,r){var e=Ce[o.charCodeAt(r)];return e??-1}function Cr(o){for(var r=this.t-1;r>=0;--r)o[r]=this[r];o.t=this.t,o.s=this.s}function Ur(o){this.t=1,this.s=o<0?-1:0,o>0?this[0]=o:o<-1?this[0]=o+this.DV:this.t=0}function Re(o){var r=B();return r.fromInt(o),r}function Ar(o,r){var e;if(r==16)e=4;else if(r==8)e=3;else if(r==2)e=1;else if(r==32)e=5;else if(r==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var i=o.length,n=!1,a=0;--i>=0;){var f=wr(o,i);if(f<0){o.charAt(i)=="-"&&(n=!0);continue}n=!1,a==0?this[this.t++]=f:a+e>this.DB?(this[this.t-1]|=(f&(1<<this.DB-a)-1)<<a,this[this.t++]=f>>this.DB-a):this[this.t-1]|=f<<a,a+=e,a>=this.DB&&(a-=this.DB)}this.clamp(),n&&w.ZERO.subTo(this,this)}function Er(){for(var o=this.s&this.DM;this.t>0&&this[this.t-1]==o;)--this.t}function Tr(o){if(this.s<0)return"-"+this.negate().toString(o);var r;if(o==16)r=4;else if(o==8)r=3;else if(o==2)r=1;else if(o==32)r=5;else if(o==4)r=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var e=(1<<r)-1,i,n=!1,a="",f=this.t,c=this.DB-f*this.DB%r;if(f-- >0)for(c<this.DB&&(i=this[f]>>c)>0&&(n=!0,a=$e(i));f>=0;)c<r?(i=(this[f]&(1<<c)-1)<<r-c,i|=this[--f]>>(c+=this.DB-r)):(i=this[f]>>(c-=r)&e,c<=0&&(c+=this.DB,--f)),i>0&&(n=!0),n&&(a+=$e(i));return n?a:"0"}function Dr(){var o=B();return w.ZERO.subTo(this,o),o}function br(){return this.s<0?this.negate():this}function Ir(o){var r=this.s-o.s;if(r!=0)return r;var e=this.t;if(r=e-o.t,r!=0)return this.s<0?-r:r;for(;--e>=0;)if((r=this[e]-o[e])!=0)return r;return 0}function ke(o){var r=1,e;return(e=o>>>16)!=0&&(o=e,r+=16),(e=o>>8)!=0&&(o=e,r+=8),(e=o>>4)!=0&&(o=e,r+=4),(e=o>>2)!=0&&(o=e,r+=2),(e=o>>1)!=0&&(o=e,r+=1),r}function _r(){return this.t<=0?0:this.DB*(this.t-1)+ke(this[this.t-1]^this.s&this.DM)}function Pr(o,r){var e;for(e=this.t-1;e>=0;--e)r[e+o]=this[e];for(e=o-1;e>=0;--e)r[e]=0;r.t=this.t+o,r.s=this.s}function Rr(o,r){for(var e=o;e<this.t;++e)r[e-o]=this[e];r.t=Math.max(this.t-o,0),r.s=this.s}function kr(o,r){var e=o%this.DB,i=this.DB-e,n=(1<<i)-1,a=Math.floor(o/this.DB),f=this.s<<e&this.DM,c;for(c=this.t-1;c>=0;--c)r[c+a+1]=this[c]>>i|f,f=(this[c]&n)<<e;for(c=a-1;c>=0;--c)r[c]=0;r[a]=f,r.t=this.t+a+1,r.s=this.s,r.clamp()}function Br(o,r){r.s=this.s;var e=Math.floor(o/this.DB);if(e>=this.t){r.t=0;return}var i=o%this.DB,n=this.DB-i,a=(1<<i)-1;r[0]=this[e]>>i;for(var f=e+1;f<this.t;++f)r[f-e-1]|=(this[f]&a)<<n,r[f-e]=this[f]>>i;i>0&&(r[this.t-e-1]|=(this.s&a)<<n),r.t=this.t-e,r.clamp()}function Or(o,r){for(var e=0,i=0,n=Math.min(o.t,this.t);e<n;)i+=this[e]-o[e],r[e++]=i&this.DM,i>>=this.DB;if(o.t<this.t){for(i-=o.s;e<this.t;)i+=this[e],r[e++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e<o.t;)i-=o[e],r[e++]=i&this.DM,i>>=this.DB;i-=o.s}r.s=i<0?-1:0,i<-1?r[e++]=this.DV+i:i>0&&(r[e++]=i),r.t=e,r.clamp()}function Fr(o,r){var e=this.abs(),i=o.abs(),n=e.t;for(r.t=n+i.t;--n>=0;)r[n]=0;for(n=0;n<i.t;++n)r[n+e.t]=e.am(0,i[n],r,n,0,e.t);r.s=0,r.clamp(),this.s!=o.s&&w.ZERO.subTo(r,r)}function Mr(o){for(var r=this.abs(),e=o.t=2*r.t;--e>=0;)o[e]=0;for(e=0;e<r.t-1;++e){var i=r.am(e,r[e],o,2*e,0,1);(o[e+r.t]+=r.am(e+1,2*r[e],o,2*e+1,i,r.t-e-1))>=r.DV&&(o[e+r.t]-=r.DV,o[e+r.t+1]=1)}o.t>0&&(o[o.t-1]+=r.am(e,r[e],o,2*e,0,1)),o.s=0,o.clamp()}function xr(o,r,e){var i=o.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){r==null||r.fromInt(0),e!=null&&this.copyTo(e);return}e==null&&(e=B());var a=B(),f=this.s,c=o.s,l=this.DB-ke(i[i.t-1]);l>0?(i.lShiftTo(l,a),n.lShiftTo(l,e)):(i.copyTo(a),n.copyTo(e));var p=a.t,v=a[p-1];if(v!=0){var y=v*(1<<this.F1)+(p>1?a[p-2]>>this.F2:0),m=this.FV/y,S=(1<<this.F1)/y,A=1<<this.F2,U=e.t,E=U-p,T=r??B();for(a.dlShiftTo(E,T),e.compareTo(T)>=0&&(e[e.t++]=1,e.subTo(T,e)),w.ONE.dlShiftTo(p,T),T.subTo(a,a);a.t<p;)a[a.t++]=0;for(;--E>=0;){var L=e[--U]==v?this.DM:Math.floor(e[U]*m+(e[U-1]+A)*S);if((e[U]+=a.am(0,L,e,E,0,p))<L)for(a.dlShiftTo(E,T),e.subTo(T,e);e[U]<--L;)e.subTo(T,e)}r!=null&&(e.drShiftTo(p,r),f!=c&&w.ZERO.subTo(r,r)),e.t=p,e.clamp(),l>0&&e.rShiftTo(l,e),f<0&&w.ZERO.subTo(e,e)}}}function Nr(o){var r=B();return this.abs().divRemTo(o,null,r),this.s<0&&r.compareTo(w.ZERO)>0&&o.subTo(r,r),r}function Kr(){if(this.t<1)return 0;var o=this[0];if(!(o&1))return 0;var r=o&3;return r=r*(2-(o&15)*r)&15,r=r*(2-(o&255)*r)&255,r=r*(2-((o&65535)*r&65535))&65535,r=r*(2-o*r%this.DV)%this.DV,r>0?this.DV-r:-r}function Vr(o){return this.compareTo(o)==0}function Lr(o,r){for(var e=0,i=0,n=Math.min(o.t,this.t);e<n;)i+=this[e]+o[e],r[e++]=i&this.DM,i>>=this.DB;if(o.t<this.t){for(i+=o.s;e<this.t;)i+=this[e],r[e++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;e<o.t;)i+=o[e],r[e++]=i&this.DM,i>>=this.DB;i+=o.s}r.s=i<0?-1:0,i>0?r[e++]=i:i<-1&&(r[e++]=this.DV+i),r.t=e,r.clamp()}function qr(o){var r=B();return this.addTo(o,r),r}function jr(o){var r=B();return this.subTo(o,r),r}function Yr(o){var r=B();return this.multiplyTo(o,r),r}function Hr(o){var r=B();return this.divRemTo(o,r,null),r}function te(o){this.m=o,this.mp=o.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<o.DB-15)-1,this.mt2=2*o.t}function Jr(o){var r=B();return o.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),o.s<0&&r.compareTo(w.ZERO)>0&&this.m.subTo(r,r),r}function Gr(o){var r=B();return o.copyTo(r),this.reduce(r),r}function Wr(o){for(;o.t<=this.mt2;)o[o.t++]=0;for(var r=0;r<this.m.t;++r){var e=o[r]&32767,i=e*this.mpl+((e*this.mph+(o[r]>>15)*this.mpl&this.um)<<15)&o.DM;for(e=r+this.m.t,o[e]+=this.m.am(0,i,o,r,0,this.m.t);o[e]>=o.DV;)o[e]-=o.DV,o[++e]++}o.clamp(),o.drShiftTo(this.m.t,o),o.compareTo(this.m)>=0&&o.subTo(this.m,o)}function Zr(o,r){o.squareTo(r),this.reduce(r)}function zr(o,r,e){o.multiplyTo(r,e),this.reduce(e)}te.prototype.convert=Jr,te.prototype.revert=Gr,te.prototype.reduce=Wr,te.prototype.mulTo=zr,te.prototype.sqrTo=Zr;function Xr(o,r,e){var i=o.bitLength(),n,a=Re(1),f=new te(r);if(i<=0)return a;i<18?n=1:i<48?n=3:i<144?n=4:i<768?n=5:n=6;var c=new Array,l=3,p=n-1,v=(1<<n)-1;if(c[1]=f.convert(this),n>1){var y=B();for(f.sqrTo(c[1],y);l<=v;)c[l]=B(),f.mulTo(y,c[l-2],c[l]),l+=2}var m=o.t-1,S,A=!0,U=B(),E;for(i=ke(o[m])-1;m>=0;){for(i>=p?S=o[m]>>i-p&v:(S=(o[m]&(1<<i+1)-1)<<p-i,m>0&&(S|=o[m-1]>>this.DB+i-p)),l=n;!(S&1);)S>>=1,--l;if((i-=l)<0&&(i+=this.DB,--m),A)c[S].copyTo(a),A=!1;else{for(;l>1;)f.sqrTo(a,U),f.sqrTo(U,a),l-=2;l>0?f.sqrTo(a,U):(E=a,a=U,U=E),f.mulTo(U,c[S],a)}for(;m>=0&&!(o[m]&1<<i);)f.sqrTo(a,U),E=a,a=U,U=E,--i<0&&(i=this.DB-1,--m)}var T=f.revert(a);return e(null,T),T}w.prototype.copyTo=Cr,w.prototype.fromInt=Ur,w.prototype.fromString=Ar,w.prototype.clamp=Er,w.prototype.dlShiftTo=Pr,w.prototype.drShiftTo=Rr,w.prototype.lShiftTo=kr,w.prototype.rShiftTo=Br,w.prototype.subTo=Or,w.prototype.multiplyTo=Fr,w.prototype.squareTo=Mr,w.prototype.divRemTo=xr,w.prototype.invDigit=Kr,w.prototype.addTo=Lr,w.prototype.toString=Tr,w.prototype.negate=Dr,w.prototype.abs=br,w.prototype.compareTo=Ir,w.prototype.bitLength=_r,w.prototype.mod=Nr,w.prototype.equals=Vr,w.prototype.add=qr,w.prototype.subtract=jr,w.prototype.multiply=Yr,w.prototype.divide=Hr,w.prototype.modPow=Xr,w.ZERO=Re(0),w.ONE=Re(1);/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/function Be(o){return D.Buffer.from(new Rt().random(o).toString(),"hex")}var $r=/^[89a-f]/i,Qr="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",en="userAttributes.",re=function(){function o(e){this.N=new w(Qr,16),this.g=new w("2",16),this.k=new w(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=D.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var r=o.prototype;return r.getSmallAValue=function(){return this.smallAValue},r.getLargeAValue=function(e){var i=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(n,a){n&&e(n,null),i.largeAValue=a,e(null,i.largeAValue)})},r.generateRandomSmallA=function(){var e=Be(128).toString("hex"),i=new w(e,16);return i},r.generateRandomString=function(){return Be(40).toString("base64")},r.getRandomPassword=function(){return this.randomPassword},r.getSaltDevices=function(){return this.SaltToHashDevices},r.getVerifierDevices=function(){return this.verifierDevices},r.generateHashDevice=function(e,i,n){var a=this;this.randomPassword=this.generateRandomString();var f=""+e+i+":"+this.randomPassword,c=this.hash(f),l=Be(16).toString("hex");this.SaltToHashDevices=this.padHex(new w(l,16)),this.g.modPow(new w(this.hexHash(this.SaltToHashDevices+c),16),this.N,function(p,v){p&&n(p,null),a.verifierDevices=a.padHex(v),n(null,null)})},r.calculateA=function(e,i){var n=this;this.g.modPow(e,this.N,function(a,f){a&&i(a,null),f.mod(n.N).equals(w.ZERO)&&i(new Error("Illegal paramater. A mod N cannot be 0."),null),i(null,f)})},r.calculateU=function(e,i){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(i));var n=new w(this.UHexHash,16);return n},r.hash=function(e){var i=new Q.Sha256;i.update(e);var n=i.digestSync(),a=D.Buffer.from(n).toString("hex");return new Array(64-a.length).join("0")+a},r.hexHash=function(e){return this.hash(D.Buffer.from(e,"hex"))},r.computehkdf=function(e,i){var n=D.Buffer.concat([this.infoBits,D.Buffer.from("","utf8")]),a=new Q.Sha256(i);a.update(e);var f=a.digestSync(),c=new Q.Sha256(f);c.update(n);var l=c.digestSync(),p=l,v=p.slice(0,16);return v},r.getPasswordAuthenticationKey=function(e,i,n,a,f){var c=this;if(n.mod(this.N).equals(w.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(w.ZERO))throw new Error("U cannot be zero.");var l=""+this.poolName+e+":"+i,p=this.hash(l),v=new w(this.hexHash(this.padHex(a)+p),16);this.calculateS(v,n,function(y,m){y&&f(y,null);var S=c.computehkdf(D.Buffer.from(c.padHex(m),"hex"),D.Buffer.from(c.padHex(c.UValue),"hex"));f(null,S)})},r.calculateS=function(e,i,n){var a=this;this.g.modPow(e,this.N,function(f,c){f&&n(f,null);var l=i.subtract(a.k.multiply(c));l.modPow(a.smallAValue.add(a.UValue.multiply(e)),a.N,function(p,v){p&&n(p,null),n(null,v.mod(a.N))})})},r.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return en},r.padHex=function(e){if(!(e instanceof w))throw new Error("Not a BigInteger");var i=e.compareTo(w.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!==0?"0"+n:n,n=$r.test(n)?"00"+n:n,i){var a=n.split("").map(function(c){var l=~parseInt(c,16)&15;return"0123456789ABCDEF".charAt(l)}).join(""),f=new w(a,16).add(w.ONE);n=f.toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},o}();/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var Qe=function(){function o(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var r=o.prototype;return r.getJwtToken=function(){return this.jwtToken},r.getExpiration=function(){return this.payload.exp},r.getIssuedAt=function(){return this.payload.iat},r.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(D.Buffer.from(e,"base64").toString("utf8"))}catch{return{}}},o}();function tn(o,r){o.prototype=Object.create(r.prototype),o.prototype.constructor=o,Oe(o,r)}function Oe(o,r){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Oe(o,r)}var et=function(o){tn(r,o);function r(e){var i=e===void 0?{}:e,n=i.AccessToken;return o.call(this,n||"")||this}return r}(Qe);function rn(o,r){o.prototype=Object.create(r.prototype),o.prototype.constructor=o,Fe(o,r)}function Fe(o,r){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Fe(o,r)}var tt=function(o){rn(r,o);function r(e){var i=e===void 0?{}:e,n=i.IdToken;return o.call(this,n||"")||this}return r}(Qe);/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var rt=function(){function o(e){var i=e===void 0?{}:e,n=i.RefreshToken;this.token=n||""}var r=o.prototype;return r.getToken=function(){return this.token},o}(),nn="5.0.4";/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var on="aws-amplify/"+nn,nt={userAgent:on,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},sn=function(){return nt.userAgent};/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var it=function(){function o(e){var i=e===void 0?{}:e,n=i.IdToken,a=i.RefreshToken,f=i.AccessToken,c=i.ClockDrift;if(f==null||n==null)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=a,this.accessToken=f,this.clockDrift=c===void 0?this.calculateClockDrift():c}var r=o.prototype;return r.getIdToken=function(){return this.idToken},r.getRefreshToken=function(){return this.refreshToken},r.getAccessToken=function(){return this.accessToken},r.getClockDrift=function(){return this.clockDrift},r.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),i=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-i},r.isValid=function(){var e=Math.floor(new Date/1e3),i=e-this.clockDrift;return i<this.accessToken.getExpiration()&&i<this.idToken.getExpiration()},o}();/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var an=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],un=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ot=function(){function o(){}var r=o.prototype;return r.getNowString=function(){var e=new Date,i=un[e.getUTCDay()],n=an[e.getUTCMonth()],a=e.getUTCDate(),f=e.getUTCHours();f<10&&(f="0"+f);var c=e.getUTCMinutes();c<10&&(c="0"+c);var l=e.getUTCSeconds();l<10&&(l="0"+l);var p=e.getUTCFullYear(),v=i+" "+n+" "+a+" "+f+":"+c+":"+l+" UTC "+p;return v},o}();/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var cn=function(){function o(e){var i=e===void 0?{}:e,n=i.Name,a=i.Value;this.Name=n||"",this.Value=a||""}var r=o.prototype;return r.getValue=function(){return this.Value},r.setValue=function(e){return this.Value=e,this},r.getName=function(){return this.Name},r.setName=function(e){return this.Name=e,this},r.toString=function(){return JSON.stringify(this)},r.toJSON=function(){return{Name:this.Name,Value:this.Value}},o}();/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var G={},fn=function(){function o(){}return o.setItem=function(r,e){return G[r]=e,G[r]},o.getItem=function(r){return Object.prototype.hasOwnProperty.call(G,r)?G[r]:void 0},o.removeItem=function(r){return delete G[r]},o.clear=function(){return G={},G},o}(),st=function(){function o(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=fn}}var r=o.prototype;return r.getStorage=function(){return this.storageWindow},o}();/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var hn=typeof navigator<"u",at=hn?nt.isReactNative?"react-native":navigator.userAgent:"nodejs",Me=function(){function o(e){if(e==null||e.Username==null||e.Pool==null)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||new st().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var r=o.prototype;return r.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},r.getSignInUserSession=function(){return this.signInUserSession},r.getUsername=function(){return this.username},r.getAuthenticationFlowType=function(){return this.authenticationFlowType},r.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},r.initiateAuth=function(e,i){var n=this,a=e.getAuthParameters();a.USERNAME=this.username;var f=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),c={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:f};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,function(l,p){if(l)return i.onFailure(l);var v=p.ChallengeName,y=p.ChallengeParameters;return v==="CUSTOM_CHALLENGE"?(n.Session=p.Session,i.customChallenge(y)):(n.signInUserSession=n.getCognitoUserSession(p.AuthenticationResult),n.cacheTokens(),i.onSuccess(n.signInUserSession))})},r.authenticateUser=function(e,i){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(e,i):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(e,i):i.onFailure(new Error("Authentication flow type is invalid."))},r.authenticateUserDefaultAuth=function(e,i){var n=this,a=new re(this.pool.getUserPoolName()),f=new ot,c,l,p={};this.deviceKey!=null&&(p.DEVICE_KEY=this.deviceKey),p.USERNAME=this.username,a.getLargeAValue(function(v,y){v&&i.onFailure(v),p.SRP_A=y.toString(16),n.authenticationFlowType==="CUSTOM_AUTH"&&(p.CHALLENGE_NAME="SRP_A");var m=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),S={AuthFlow:n.authenticationFlowType,ClientId:n.pool.getClientId(),AuthParameters:p,ClientMetadata:m};n.getUserContextData(n.username)&&(S.UserContextData=n.getUserContextData(n.username)),n.client.request("InitiateAuth",S,function(A,U){if(A)return i.onFailure(A);var E=U.ChallengeParameters;n.username=E.USER_ID_FOR_SRP,n.userDataKey=n.keyPrefix+"."+n.username+".userData",c=new w(E.SRP_B,16),l=new w(E.SALT,16),n.getCachedDeviceKeyAndPassword(),a.getPasswordAuthenticationKey(n.username,e.getPassword(),c,l,function(T,L){T&&i.onFailure(T);var W=f.getNowString(),M=D.Buffer.concat([D.Buffer.from(n.pool.getUserPoolName(),"utf8"),D.Buffer.from(n.username,"utf8"),D.Buffer.from(E.SECRET_BLOCK,"base64"),D.Buffer.from(W,"utf8")]),Y=new Q.Sha256(L);Y.update(M);var Z=Y.digestSync(),q=D.Buffer.from(Z).toString("base64"),x={};x.USERNAME=n.username,x.PASSWORD_CLAIM_SECRET_BLOCK=E.SECRET_BLOCK,x.TIMESTAMP=W,x.PASSWORD_CLAIM_SIGNATURE=q,n.deviceKey!=null&&(x.DEVICE_KEY=n.deviceKey);var H=function X($,se){return n.client.request("RespondToAuthChallenge",$,function(J,ae){return J&&J.code==="ResourceNotFoundException"&&J.message.toLowerCase().indexOf("device")!==-1?(x.DEVICE_KEY=null,n.deviceKey=null,n.randomPassword=null,n.deviceGroupKey=null,n.clearCachedDeviceKeyAndPassword(),X($,se)):se(J,ae)})},z={ChallengeName:"PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:x,Session:U.Session,ClientMetadata:m};n.getUserContextData()&&(z.UserContextData=n.getUserContextData()),H(z,function(X,$){return X?i.onFailure(X):n.authenticateUserInternal($,a,i)})})})})},r.authenticateUserPlainUsernamePassword=function(e,i){var n=this,a={};if(a.USERNAME=this.username,a.PASSWORD=e.getPassword(),!a.PASSWORD){i.onFailure(new Error("PASSWORD parameter is required"));return}var f=new re(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(a.DEVICE_KEY=this.deviceKey);var c=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),l={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:a,ClientMetadata:c};this.getUserContextData(this.username)&&(l.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",l,function(p,v){return p?i.onFailure(p):n.authenticateUserInternal(v,f,i)})},r.authenticateUserInternal=function(e,i,n){var a=this,f=e.ChallengeName,c=e.ChallengeParameters;if(f==="SMS_MFA")return this.Session=e.Session,n.mfaRequired(f,c);if(f==="SELECT_MFA_TYPE")return this.Session=e.Session,n.selectMFAType(f,c);if(f==="MFA_SETUP")return this.Session=e.Session,n.mfaSetup(f,c);if(f==="SOFTWARE_TOKEN_MFA")return this.Session=e.Session,n.totpRequired(f,c);if(f==="CUSTOM_CHALLENGE")return this.Session=e.Session,n.customChallenge(c);if(f==="NEW_PASSWORD_REQUIRED"){this.Session=e.Session;var l=null,p=null,v=[],y=i.getNewPasswordRequiredChallengeUserAttributePrefix();if(c&&(l=JSON.parse(e.ChallengeParameters.userAttributes),p=JSON.parse(e.ChallengeParameters.requiredAttributes)),p)for(var m=0;m<p.length;m++)v[m]=p[m].substr(y.length);return n.newPasswordRequired(l,v)}if(f==="DEVICE_SRP_AUTH"){this.Session=e.Session,this.getDeviceResponse(n);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=f,this.cacheTokens();var S=e.AuthenticationResult.NewDeviceMetadata;if(S==null)return n.onSuccess(this.signInUserSession);i.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(A){if(A)return n.onFailure(A);var U={Salt:D.Buffer.from(i.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:D.Buffer.from(i.getVerifierDevices(),"hex").toString("base64")};a.verifierDevices=U.PasswordVerifier,a.deviceGroupKey=S.DeviceGroupKey,a.randomPassword=i.getRandomPassword(),a.client.request("ConfirmDevice",{DeviceKey:S.DeviceKey,AccessToken:a.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:U,DeviceName:at},function(E,T){return E?n.onFailure(E):(a.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,a.cacheDeviceKeyAndPassword(),T.UserConfirmationNecessary===!0?n.onSuccess(a.signInUserSession,T.UserConfirmationNecessary):n.onSuccess(a.signInUserSession))})})},r.completeNewPasswordChallenge=function(e,i,n,a){var f=this;if(!e)return n.onFailure(new Error("New password is required."));var c=new re(this.pool.getUserPoolName()),l=c.getNewPasswordRequiredChallengeUserAttributePrefix(),p={};i&&Object.keys(i).forEach(function(y){p[l+y]=i[y]}),p.NEW_PASSWORD=e,p.USERNAME=this.username;var v={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:p,Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",v,function(y,m){return y?n.onFailure(y):f.authenticateUserInternal(m,c,n)})},r.getDeviceResponse=function(e,i){var n=this,a=new re(this.deviceGroupKey),f=new ot,c={};c.USERNAME=this.username,c.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(l,p){l&&e.onFailure(l),c.SRP_A=p.toString(16);var v={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:c,ClientMetadata:i,Session:n.Session};n.getUserContextData()&&(v.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",v,function(y,m){if(y)return e.onFailure(y);var S=m.ChallengeParameters,A=new w(S.SRP_B,16),U=new w(S.SALT,16);a.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,A,U,function(E,T){if(E)return e.onFailure(E);var L=f.getNowString(),W=D.Buffer.concat([D.Buffer.from(n.deviceGroupKey,"utf8"),D.Buffer.from(n.deviceKey,"utf8"),D.Buffer.from(S.SECRET_BLOCK,"base64"),D.Buffer.from(L,"utf8")]),M=new Q.Sha256(T);M.update(W);var Y=M.digestSync(),Z=D.Buffer.from(Y).toString("base64"),q={};q.USERNAME=n.username,q.PASSWORD_CLAIM_SECRET_BLOCK=S.SECRET_BLOCK,q.TIMESTAMP=L,q.PASSWORD_CLAIM_SIGNATURE=Z,q.DEVICE_KEY=n.deviceKey;var x={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:q,Session:m.Session};n.getUserContextData()&&(x.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",x,function(H,z){return H?e.onFailure(H):(n.signInUserSession=n.getCognitoUserSession(z.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))})})})})},r.confirmRegistration=function(e,i,n,a){var f={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:i,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",f,function(c){return c?n(c,null):n(null,"SUCCESS")})},r.sendCustomChallengeAnswer=function(e,i,n){var a=this,f={};f.USERNAME=this.username,f.ANSWER=e;var c=new re(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var l={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(p,v){return p?i.onFailure(p):a.authenticateUserInternal(v,c,i)})},r.sendMFACode=function(e,i,n,a){var f=this,c={};c.USERNAME=this.username,c.SMS_MFA_CODE=e;var l=n||"SMS_MFA";l==="SOFTWARE_TOKEN_MFA"&&(c.SOFTWARE_TOKEN_MFA_CODE=e),this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey);var p={ChallengeName:l,ChallengeResponses:c,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,y){if(v)return i.onFailure(v);var m=y.ChallengeName;if(m==="DEVICE_SRP_AUTH"){f.getDeviceResponse(i);return}if(f.signInUserSession=f.getCognitoUserSession(y.AuthenticationResult),f.cacheTokens(),y.AuthenticationResult.NewDeviceMetadata==null)return i.onSuccess(f.signInUserSession);var S=new re(f.pool.getUserPoolName());S.generateHashDevice(y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,y.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(A){if(A)return i.onFailure(A);var U={Salt:D.Buffer.from(S.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:D.Buffer.from(S.getVerifierDevices(),"hex").toString("base64")};f.verifierDevices=U.PasswordVerifier,f.deviceGroupKey=y.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,f.randomPassword=S.getRandomPassword(),f.client.request("ConfirmDevice",{DeviceKey:y.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:f.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:U,DeviceName:at},function(E,T){return E?i.onFailure(E):(f.deviceKey=y.AuthenticationResult.NewDeviceMetadata.DeviceKey,f.cacheDeviceKeyAndPassword(),T.UserConfirmationNecessary===!0?i.onSuccess(f.signInUserSession,T.UserConfirmationNecessary):i.onSuccess(f.signInUserSession))})})})},r.changePassword=function(e,i,n,a){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(f){return f?n(f,null):n(null,"SUCCESS")})},r.enableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var i=[],n={DeliveryMedium:"SMS",AttributeName:"phone_number"};i.push(n),this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e(a,null):e(null,"SUCCESS")})},r.setUserMfaPreference=function(e,i,n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?n(a,null):n(null,"SUCCESS")})},r.disableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var i=[];this.client.request("SetUserSettings",{MFAOptions:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e(n,null):e(null,"SUCCESS")})},r.deleteUser=function(e,i){var n=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:i},function(a){return a?e(a,null):(n.clearCachedUser(),e(null,"SUCCESS"))})},r.updateAttributes=function(e,i,n){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(f,c){return f?i(f,null):a.getUserData(function(){return i(null,"SUCCESS",c)},{bypassCache:!0})})},r.getUserAttributes=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,n){if(i)return e(i,null);for(var a=[],f=0;f<n.UserAttributes.length;f++){var c={Name:n.UserAttributes[f].Name,Value:n.UserAttributes[f].Value},l=new cn(c);a.push(l)}return e(null,a)})},r.getMFAOptions=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(i,n){return i?e(i,null):e(null,n.MFAOptions)})},r.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},r.refreshSessionIfPossible=function(e){var i=this;return e===void 0&&(e={}),new Promise(function(n){var a=i.signInUserSession.getRefreshToken();a&&a.getToken()?i.refreshSession(a,n,e.clientMetadata):n()})},r.getUserData=function(e,i){var n=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var a=this.getUserDataFromCache();if(!a){this.fetchUserData().then(function(f){e(null,f)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(i)){this.fetchUserData().then(function(f){return n.refreshSessionIfPossible(i).then(function(){return f})}).then(function(f){return e(null,f)}).catch(e);return}try{e(null,JSON.parse(a));return}catch(f){this.clearCachedUserData(),e(f,null);return}},r.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},r.isFetchUserDataAndTokenRequired=function(e){var i=e||{},n=i.bypassCache,a=n===void 0?!1:n;return a},r.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(i){return e.cacheUserData(i),i})},r.deleteAttributes=function(e,i){var n=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):n.getUserData(function(){return i(null,"SUCCESS")},{bypassCache:!0})})},r.resendConfirmationCode=function(e,i){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.client.request("ResendConfirmationCode",n,function(a,f){return a?e(a,null):e(null,f)})},r.getSession=function(e,i){if(i===void 0&&(i={}),this.username==null)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,a=n+".idToken",f=n+".accessToken",c=n+".refreshToken",l=n+".clockDrift";if(this.storage.getItem(a)){var p=new tt({IdToken:this.storage.getItem(a)}),v=new et({AccessToken:this.storage.getItem(f)}),y=new rt({RefreshToken:this.storage.getItem(c)}),m=parseInt(this.storage.getItem(l),0)||0,S={IdToken:p,AccessToken:v,RefreshToken:y,ClockDrift:m},A=new it(S);if(A.isValid())return this.signInUserSession=A,e(null,this.signInUserSession);if(!y.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(y,e,i.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},r.refreshSession=function(e,i,n){var a=this,f=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(i):i,c={};c.REFRESH_TOKEN=e.getToken();var l="CognitoIdentityServiceProvider."+this.pool.getClientId(),p=l+".LastAuthUser";if(this.storage.getItem(p)){this.username=this.storage.getItem(p);var v=l+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(v),c.DEVICE_KEY=this.deviceKey}var y={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:c,ClientMetadata:n};this.getUserContextData()&&(y.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",y,function(m,S){if(m)return m.code==="NotAuthorizedException"&&a.clearCachedUser(),f(m,null);if(S){var A=S.AuthenticationResult;return Object.prototype.hasOwnProperty.call(A,"RefreshToken")||(A.RefreshToken=e.getToken()),a.signInUserSession=a.getCognitoUserSession(A),a.cacheTokens(),f(null,a.signInUserSession)}})},r.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",a=e+"."+this.username+".refreshToken",f=e+"."+this.username+".clockDrift",c=e+".LastAuthUser";this.storage.setItem(i,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(f,""+this.signInUserSession.getClockDrift()),this.storage.setItem(c,this.username)},r.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},r.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},r.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},r.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",n=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.setItem(i,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(a,this.deviceGroupKey)},r.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",n=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.getItem(i)&&(this.deviceKey=this.storage.getItem(i),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(a))},r.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,i=e+".deviceKey",n=e+".randomPasswordKey",a=e+".deviceGroupKey";this.storage.removeItem(i),this.storage.removeItem(n),this.storage.removeItem(a)},r.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),i=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",a=e+"."+this.username+".refreshToken",f=e+".LastAuthUser",c=e+"."+this.username+".clockDrift";this.storage.removeItem(i),this.storage.removeItem(n),this.storage.removeItem(a),this.storage.removeItem(f),this.storage.removeItem(c)},r.getCognitoUserSession=function(e){var i=new tt(e),n=new et(e),a=new rt(e),f={IdToken:i,AccessToken:n,RefreshToken:a};return new it(f)},r.forgotPassword=function(e,i){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:i};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,function(a,f){return a?e.onFailure(a):typeof e.inputVerificationCode=="function"?e.inputVerificationCode(f):e.onSuccess(f)})},r.confirmPassword=function(e,i,n,a){var f={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:i,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",f,function(c){return c?n.onFailure(c):n.onSuccess("SUCCESS")})},r.getAttributeVerificationCode=function(e,i,n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},function(a,f){return a?i.onFailure(a):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(f):i.onSuccess("SUCCESS")})},r.verifyAttribute=function(e,i,n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?n.onFailure(a):n.onSuccess("SUCCESS")})},r.getDevice=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(i,n){return i?e.onFailure(i):e.onSuccess(n)})},r.forgetSpecificDevice=function(e,i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(n){return n?i.onFailure(n):i.onSuccess("SUCCESS")})},r.forgetDevice=function(e){var i=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return i.deviceKey=null,i.deviceGroupKey=null,i.randomPassword=null,i.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},r.setDeviceStatusRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(i){return i?e.onFailure(i):e.onSuccess("SUCCESS")})},r.setDeviceStatusNotRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(i){return i?e.onFailure(i):e.onSuccess("SUCCESS")})},r.listDevices=function(e,i,n){if(this.signInUserSession==null||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var a={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};i&&(a.PaginationToken=i),this.client.request("ListDevices",a,function(f,c){return f?n.onFailure(f):n.onSuccess(c)})},r.globalSignOut=function(e){var i=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n){return n?e.onFailure(n):(i.clearCachedUser(),e.onSuccess("SUCCESS"))})},r.signOut=function(e){var i=this;if(!e||typeof e!="function"){this.cleanClientData();return}this.getSession(function(n,a){if(n)return e(n);i.revokeTokens(function(f){i.cleanClientData(),e(f)})})},r.revokeTokens=function(e){if(e===void 0&&(e=function(){}),typeof e!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var i=new Error("User is not authenticated");return e(i)}if(!this.signInUserSession.getAccessToken()){var n=new Error("No Access token available");return e(n)}var a=this.signInUserSession.getRefreshToken().getToken(),f=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(f)&&a)return this.revokeToken({token:a,callback:e});e()},r.isSessionRevocable=function(e){if(e&&typeof e.decodePayload=="function")try{var i=e.decodePayload(),n=i.origin_jti;return!!n}catch{}return!1},r.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},r.revokeToken=function(e){var i=e.token,n=e.callback;this.client.requestWithRetry("RevokeToken",{Token:i,ClientId:this.pool.getClientId()},function(a){if(a)return n(a);n()})},r.sendMFASelectionAnswer=function(e,i){var n=this,a={};a.USERNAME=this.username,a.ANSWER=e;var f={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:a,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(c,l){if(c)return i.onFailure(c);if(n.Session=l.Session,e==="SMS_MFA")return i.mfaRequired(l.ChallengeName,l.ChallengeParameters);if(e==="SOFTWARE_TOKEN_MFA")return i.totpRequired(l.ChallengeName,l.ChallengeParameters)})},r.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},r.associateSoftwareToken=function(e){var i=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(n,a){return n?e.onFailure(n):e.associateSecretCode(a.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(n,a){return n?e.onFailure(n):(i.Session=a.Session,e.associateSecretCode(a.SecretCode))})},r.verifySoftwareToken=function(e,i,n){var a=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:i},function(f,c){return f?n.onFailure(f):n.onSuccess(c)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:i},function(f,c){if(f)return n.onFailure(f);a.Session=c.Session;var l={};l.USERNAME=a.username;var p={ChallengeName:"MFA_SETUP",ClientId:a.pool.getClientId(),ChallengeResponses:l,Session:a.Session};a.getUserContextData()&&(p.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",p,function(v,y){return v?n.onFailure(v):(a.signInUserSession=a.getCognitoUserSession(y.AuthenticationResult),a.cacheTokens(),n.onSuccess(a.signInUserSession))})})},o}();function ln(o,r){return r=r||{},new Promise(function(e,i){var n=new XMLHttpRequest,a=[],f=[],c={},l=function(){return{ok:(n.status/100|0)==2,statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:l,headers:{keys:function(){return a},entries:function(){return f},get:function(v){return c[v.toLowerCase()]},has:function(v){return v.toLowerCase()in c}}}};for(var p in n.open(r.method||"get",o,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(v,y,m){a.push(y=y.toLowerCase()),f.push([y,m]),c[y]=c[y]?c[y]+","+m:m}),e(l())},n.onerror=i,n.withCredentials=r.credentials=="include",r.headers)n.setRequestHeader(p,r.headers[p]);n.send(r.body||null)})}const pn=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),ut=Ee(pn);self.fetch||(self.fetch=ut.default||ut);function ne(){}ne.prototype.userAgent=sn();var dn=function(o){var r=ne.category?" "+ne.category:"",e=ne.framework?" framework/"+ne.framework:"",i=""+ne.prototype.userAgent+r+e;return i};function gn(o,r){o.prototype=Object.create(r.prototype),o.prototype.constructor=o,oe(o,r)}function xe(o){var r=typeof Map=="function"?new Map:void 0;return xe=function(e){if(e===null||!yn(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(e))return r.get(e);r.set(e,i)}function i(){return Ue(e,arguments,Ne(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),oe(i,e)},xe(o)}function Ue(o,r,e){return vn()?Ue=Reflect.construct.bind():Ue=function(i,n,a){var f=[null];f.push.apply(f,n);var c=Function.bind.apply(i,f),l=new c;return a&&oe(l,a.prototype),l},Ue.apply(null,arguments)}function vn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yn(o){try{return Function.toString.call(o).indexOf("[native code]")!==-1}catch{return typeof o=="function"}}function oe(o,r){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},oe(o,r)}function Ne(o){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ne(o)}var mn=function(o){gn(r,o);function r(e,i,n,a){var f;return f=o.call(this,e)||this,f.code=i,f.name=n,f.statusCode=a,f}return r}(xe(Error)),Sn=function(){function o(e,i,n){this.endpoint=i||"https://cognito-idp."+e+".amazonaws.com/";var a=n||{},f=a.credentials;this.fetchOptions=f?{credentials:f}:{}}var r=o.prototype;return r.promisifyRequest=function(e,i){var n=this;return new Promise(function(a,f){n.request(e,i,function(c,l){c?f(new mn(c.message,c.code,c.name,c.statusCode)):a(l)})})},r.requestWithRetry=function(e,i,n){var a=this,f=5*1e3;An(function(c){return new Promise(function(l,p){a.request(e,c,function(v,y){v?p(v):l(y)})})},[i],f).then(function(c){return n(null,c)}).catch(function(c){return n(c)})},r.request=function(e,i,n){var a={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":dn(),"Cache-Control":"no-store"},f=Object.assign({},this.fetchOptions,{headers:a,method:"POST",mode:"cors",body:JSON.stringify(i)}),c;fetch(this.endpoint,f).then(function(l){return c=l,l},function(l){throw l instanceof TypeError?new Error("Network error"):l}).then(function(l){return l.json().catch(function(){return{}})}).then(function(l){if(c.ok)return n(null,l);var p=(l.__type||l.code).split("#").pop(),v=new Error(l.message||l.Message||null);return v.name=p,v.code=p,n(v)}).catch(function(l){if(c&&c.headers&&c.headers.get("x-amzn-errortype"))try{var p=c.headers.get("x-amzn-errortype").split(":")[0],v=new Error(c.status?c.status.toString():null);return v.code=p,v.name=p,v.statusCode=c.status,n(v)}catch{return n(l)}else l instanceof Error&&l.message==="Network error"&&(l.code="NetworkError");return n(l)})},o}(),Ae={debug:function(){}},wn=function(o){var r="nonRetryable";return o&&o[r]};function ct(o,r,e,i){if(i===void 0&&(i=1),typeof o!="function")throw Error("functionToRetry must be a function");return Ae.debug(o.name+" attempt #"+i+" with args: "+JSON.stringify(r)),o.apply(void 0,r).catch(function(n){if(Ae.debug("error on "+o.name,n),wn(n))throw Ae.debug(o.name+" non retryable error",n),n;var a=e(i,r,n);if(Ae.debug(o.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(f){return setTimeout(f,a)}).then(function(){return ct(o,r,e,i+1)});throw n})}function Cn(o){var r=100,e=100;return function(i){var n=Math.pow(2,i)*r+e*Math.random();return n>o?!1:n}}var Un=5*60*1e3;function An(o,r,e){return e===void 0&&(e=Un),ct(o,r,Cn(e))}/*!
* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/var En=55,Tn=function(){function o(e,i){var n=e||{},a=n.UserPoolId,f=n.ClientId,c=n.endpoint,l=n.fetchOptions,p=n.AdvancedSecurityDataCollectionFlag;if(!a||!f)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>En||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var v=a.split("_")[0];this.userPoolId=a,this.clientId=f,this.client=new Sn(v,c,l),this.advancedSecurityDataCollectionFlag=p!==!1,this.storage=e.Storage||new st().getStorage(),i&&(this.wrapRefreshSessionCallback=i)}var r=o.prototype;return r.getUserPoolId=function(){return this.userPoolId},r.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},r.getClientId=function(){return this.clientId},r.signUp=function(e,i,n,a,f,c){var l=this,p={ClientId:this.clientId,Username:e,Password:i,UserAttributes:n,ValidationData:a,ClientMetadata:c};this.getUserContextData(e)&&(p.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",p,function(v,y){if(v)return f(v,null);var m={Username:e,Pool:l,Storage:l.storage},S={user:new Me(m),userConfirmed:y.UserConfirmed,userSub:y.UserSub,codeDeliveryDetails:y.CodeDeliveryDetails};return f(null,S)})},r.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",i=this.storage.getItem(e);if(i){var n={Username:i,Pool:this,Storage:this.storage};return new Me(n)}return null},r.getUserContextData=function(e){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var i=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=i.getData(e,this.userPoolId,this.clientId);if(n){var a={EncodedData:n};return a}}return{}}},o}(),Dn={exports:{}};/*!
* JavaScript Cookie v2.2.1
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/(function(o,r){(function(e){var i;if(o.exports=e(),i=!0,!i){var n=window.Cookies,a=window.Cookies=e();a.noConflict=function(){return window.Cookies=n,a}}})(function(){function e(){for(var a=0,f={};a<arguments.length;a++){var c=arguments[a];for(var l in c)f[l]=c[l]}return f}function i(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(a){function f(){}function c(p,v,y){if(!(typeof document>"u")){y=e({path:"/"},f.defaults,y),typeof y.expires=="number"&&(y.expires=new Date(new Date*1+y.expires*864e5)),y.expires=y.expires?y.expires.toUTCString():"";try{var m=JSON.stringify(v);/^[\{\[]/.test(m)&&(v=m)}catch{}v=a.write?a.write(v,p):encodeURIComponent(String(v)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),p=encodeURIComponent(String(p)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var S="";for(var A in y)y[A]&&(S+="; "+A,y[A]!==!0&&(S+="="+y[A].split(";")[0]));return document.cookie=p+"="+v+S}}function l(p,v){if(!(typeof document>"u")){for(var y={},m=document.cookie?document.cookie.split("; "):[],S=0;S<m.length;S++){var A=m[S].split("="),U=A.slice(1).join("=");!v&&U.charAt(0)==='"'&&(U=U.slice(1,-1));try{var E=i(A[0]);if(U=(a.read||a)(U,E)||i(U),v)try{U=JSON.parse(U)}catch{}if(y[E]=U,p===E)break}catch{}}return p?y[p]:y}}return f.set=c,f.get=function(p){return l(p,!1)},f.getJSON=function(p){return l(p,!0)},f.remove=function(p,v){c(p,"",e(v,{expires:-1}))},f.defaults={},f.withConverter=n,f}return n(function(){})})})(Dn);var ft={appEnv:"development",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",chatbotAppId:"d0f4d712-c12a-4cdf-72a1-7e9795bc061a",marketplaceUrl:"https://marketplace.dev.paas.reapit.cloud/apps",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerEditionDownloadUrl:"https://updates.reapit.net/install/setupdev.exe",adobeSignApiKey:"CBFCIBAA3AAABLblqZhCDiTpm3mtYxQo6xlPEpdTIPMUeWo1RPWyJnzmq9hUu_O9-a96bDc8nX8bBYL8pztU",liveChatWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],elementsUri:"https://elements.dev.paas.reapit.cloud/?path=/docs/welcome--docs",graphQLUri:"https://graphql.dev.paas.reapit.cloud/graphql",analyticsSchemaDocsUrl:"https://reapit-analytics-schema.dev.paas.reapit.cloud",swaggerUri:"https://reapit-swagger-dev.s3.eu-west-2.amazonaws.com/foundations_swagger.json",DEPLOYMENT_SERVICE_HOST:"https://deployments.dev.paas.reapit.cloud/",PUSHER_KEY:"c48c04b607a9201f6054",zendeskUri:"https://static.zdassets.com/ekr/snippet.js?key=e8ed8416-ceb4-4e91-8186-097321c3ceda",pipelineWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"],swaggerWhitelist:["421b65bc-dd09-4c34-90fa-dacc3cd2ff5a"]};const ht=(o,r,e)=>{const i={UserPoolId:e||ft.connectUserPoolId,ClientId:r},n=new Tn(i),a={Username:o,Pool:n};return new Me(a)},bn=async({password:o,userName:r,newPassword:e})=>new Promise((i,n)=>{const a={Username:r,Password:o},f=new Dt(a),c=ht(r,ft.connectClientId);c.authenticateUser(f,{onSuccess:()=>{c.changePassword(o,e,l=>{l&&(pe(new Error(l.message)),n(l)),i(!0)})},onFailure:l=>{pe(new Error(l.message)),i(!1)}})}),In=async({verificationCode:o,userName:r,connectClientId:e})=>new Promise((i,n)=>{ht(r,e).confirmRegistration(o,!0,a=>{a&&(pe(new Error(a.message)),n(`Bad request, confirm registration service failed ${JSON.stringify(a)}`)),i("SUCCESS")})}),_n=async o=>{const{verificationCode:r,userName:e,connectClientId:i}=o,n=r&&e&&i;try{if(!n)throw new Error("Bad request, verification code and username are required");return await In(o)}catch(a){pe(a),console.error(`Bad request, failed to confirm registration, ${a}`)}};export{bn as a,_n as c};
