import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { InputGroup } from './index'
import { Input } from '../input'
import { Icon } from '../icon'
import { Label } from '../label'
import { InputAddOn } from '../input-add-on'
import { RenderHtmlMarkup } from '../../storybook/render-html-markup'
import { InputError } from './../input-error'

<Meta title="InputGroup" component={InputGroup} />

# InputGroup

InputGroup provides a wrapper and styling for the `Input`, `Icon`, `Label`, and `InputAddOn` components, so that they can work nicely together.

<ArgsTable of={InputGroup} />

## Usage with HTML & CSS only

- The order of the child components matters, in order to make the focus state work (i.e. the different styling applied when you click into the component)
- The `<input>` component must come first in the DOM, before the `<label>`, and the `<span>` for the icon and InputAddOn, as is shown in the HTML docs

## Usage with React

- You can supply the child components individually (ensure the `Input` component is included as the first child). When using like this, any additional props on the `InputGroup` component are added to the underlying `div`.
- Or, there is also a shorthand for React where you can supply props. This only works if _no children_ are supplied

## Complete example, with Icon, Label, and InputAddOn

<Canvas>
  <Story name="Complete example">
    <InputGroup>
      <Input id="myId" type="text" />
      <Icon icon="usernameSystem" />
      <Label htmlFor="myId">Enter your username</Label>
      <InputAddOn>Required</InputAddOn>
    </InputGroup>
  </Story>
</Canvas>

<RenderHtmlMarkup component="InputGroup" story="Complete example" />

## With Icon only

<Canvas>
  <Story name="With Icon only">
    <InputGroup>
      <Input id="myId2" type="tel" placeholder="Enter your mobile number" />
      <Icon icon="phoneSystem" />
    </InputGroup>
  </Story>
</Canvas>

<RenderHtmlMarkup component="InputGroup" story="With Icon only" />

## With Label only

<Canvas>
  <Story name="With Label only">
    <InputGroup>
      <Input id="myId3" type="email" />
      <Label htmlFor="myId3">Email address</Label>
    </InputGroup>
  </Story>
</Canvas>

<RenderHtmlMarkup component="InputGroup" story="With Label only" />

## With InputAddOn only

<Canvas>
  <Story name="With InputAddOn only">
    <InputGroup>
      <Input id="myId3" type="email" />
      <InputAddOn>Required</InputAddOn>
    </InputGroup>
  </Story>
</Canvas>

<RenderHtmlMarkup component="InputGroup" story="With InputAddOn only" />

## Shorthand usage for React users

Any additional props not listed here are added to the `Input` component that is rendered as part of `InputGroup`. This way you can easily supply `onChange`, `type`, etc props to the underlying `Input`

React shorthand with `icon` and `label` props

<Canvas>
  <Story name="React shorthand">
    <InputGroup icon="homeSystem" label="Please enter an address" type="text" />
  </Story>
</Canvas>

## With a custom ID

<Canvas>
  <Story name="React shorthand - custom ID">
    <InputGroup id="my-id" icon="homeSystem" label="Please enter an address" type="text" />
  </Story>
</Canvas>

## With `icon`, `label`, `InputAddOn` and `intent` props

<Canvas>
  <Story name="React shorthand - all props">
    <InputGroup icon="asteriskSystem" label="Email address" InputAddOn="Required" intent="danger" type="text" />
  </Story>
</Canvas>

## Checkbox

<Canvas>
  <Story name="Input checkbox">
    <InputGroup type="checkbox" icon="phoneSystem" label="Status" InputAddOn="Listed" />
  </Story>
  <Story name="Input checkbox - with intent">
    <InputGroup type="checkbox" icon="infoSystem" intent="danger" label="Status" InputAddOn="Listed" />
  </Story>
  <Story name="Input checkbox - no icon">
    <InputGroup type="checkbox" label="Status" InputAddOn="Listed" />
  </Story>
  <Story name="Input checkbox - no label">
    <InputGroup type="checkbox" InputAddOn="Listed" />
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="InputGroup"
  story={['Input checkbox', 'Input checkbox - with intent', 'Input checkbox - no icon', 'Input checkbox - no label']}
/>

## Radio

<Canvas>
  <Story name="Input radio">
    <Label className="el-mb2 el-flex">Preferred contact</Label>
    <InputGroup className="el-mb2" type="radio" name="phone" icon="phoneSystem" label="Mobile phone" />
    <InputGroup className="el-mb2" type="radio" name="phone" icon="homeSystem" label="Home phone" />
    <InputGroup className="el-mb2" type="radio" name="phone" icon="emailSystem" label="Email" />
  </Story>
  <Story name="Input radio - with intent">
    <Label className="el-mb2 el-flex">Preferred contact</Label>
    <InputGroup className="el-mb2" type="radio" name="phone" icon="phoneSystem" label="Mobile phone" intent="danger" />
    <InputGroup className="el-mb2" type="radio" name="phone" icon="homeSystem" label="Home phone" intent="danger" />
    <InputGroup className="el-mb2" type="radio" name="phone" icon="emailSystem" label="Email" intent="danger" />
  </Story>
  <Story name="Input radio - no icon">
    <Label className="el-mb2 el-flex">Preferred contact</Label>
    <InputGroup className="el-mb2" type="radio" name="phone" label="Mobile phone" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Home phone" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Email" />
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="InputGroup"
  story={['Input radio', 'Input radio - with intent', 'Input radio - no icon']}
/>

## Use with radio input and InputAddOn

The `inputAddOn` prop (and use of the `InputAddOn` component within `InputGroup` in general) _is_ supported with radio buttons, however with radio buttons the `Label` does most of the work.

`inputAddOn` can be used but won't add that much value, and it's reccomended to use just `Label` on it's own. See an example below:

<Canvas>
  <Story name="Input radio - with InputAddOn">
    <Label className="el-mb2 el-flex">Preferred contact</Label>
    <InputGroup className="el-mb2" type="radio" name="phone" label="Mobile phone" InputAddOn="Test" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Home phone" InputAddOn="Test" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Email" InputAddOn="Test" />
  </Story>
</Canvas>

## Error messages

Below are some examples of error messages with input groups. The error message prop on input group can be used for simple types such as text and email. For groups of radios or checkboxes you can use the `InputError` component instead.

<Canvas>
  <Story name="Error message">
    <InputGroup
      className="el-mb2"
      type="email"
      name="phone"
      label="Email Address"
      errorMessage="Email address is not valid"
    />
    <Label className="el-mb2 el-flex">Preferred contact</Label>
    <InputGroup className="el-mb2" type="radio" name="phone" label="Mobile phone" InputAddOn="Test" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Home phone" InputAddOn="Test" />
    <InputGroup className="el-mb2" type="radio" name="phone" label="Email" InputAddOn="Test" />
    <InputError message="Please select a contact method" />
  </Story>
</Canvas>
