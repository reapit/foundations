import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks'
import { cx } from 'linaria'
import useModal from '../../hooks/use-modal'
import { Modal, ModalBg, ModalContainer, ModalHeader, ModalBody } from './index'
import { Button } from '../button'
import { BodyText } from '../typography'
import { elFlex, elFlexJustifyCenter } from '../../styles/flexbox'
import { FlexContainer } from '../layout'
import { RenderHtmlMarkup } from '../../storybook/render-html-markup'

<Meta title="Modal" />

# Modal

<ArgsTable component={Modal} />

## Basic Usage

The Modal component can be used for UI purposes only, but won't have the functionality of the React implementation (i.e. managing the state of whether it is open or closed)

If using the Modal component like this, you will need to toggle the `el-is-active` class to show/hide the modal.

This class must be applied on two elements, `div.el-modal-bg` and also `div.el-modal`, when you want the modal to be shown.

Click "Show code" below to see HTML code for an un-opened modal.

<Canvas>
  <Story name="Basic Usage">
    <ModalBg />
    <ModalContainer>
      <ModalHeader>Welcome to the demo modal</ModalHeader>
      <ModalBody>
        <BodyText>Here's some nice content for the inside of the modal.</BodyText>
      </ModalBody>
    </ModalContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component={ModalContainer} story={['Basic Usage']} />

## React usage- Complete example with `useModal` hook

<Canvas>
  <Story name="useModal example">
    {() => {
      const { Modal: ModalComponent, openModal, closeModal } = useModal()
      return (
        <>
          <Button onClick={openModal}>Open Modal</Button>
          <ModalComponent title="Welcome to the demo modal">
            <BodyText>Here's some nice content for the inside of the modal.</BodyText>
            <FlexContainer isFlexJustifyCenter>
              <Button onClick={closeModal}>Close the modal</Button>
            </FlexContainer>
          </ModalComponent>
        </>
      )
    }}
  </Story>
</Canvas>

## React usage - With multiple `useModal` hooks

<Canvas>
  <Story name="useModal example - multiple modals">
    {() => {
      const { Modal: ModalA, openModal: openModalA } = useModal()
      const { Modal: ModalB, openModal: openModalB } = useModal()
      return (
        <>
          <Button onClick={openModalA}>Open Modal A</Button>
          <Button onClick={openModalB}>Open Modal B</Button>
          <ModalA title="Modal A">I'm the modal A's content</ModalA>
          <ModalB title="Modal B">I'm the modal B's content</ModalB>
        </>
      )
    }}
  </Story>
</Canvas>

If using multiple modals within a component, ensure you rename the exports from `useModal` to avoid conflicts, e.g. `const { Modal: ModalA, openModal: openModalA } = useModal()`

## `useModal` API

Exports the following properties as an object:

- `Modal`: `ReactNode` - a React component that should be placed somewhere with the component that you want to use the modal.
- `openModal`: `() => void` - a method that will open the Modal.
- `closeModal`: `() => void` - a method that will close the Modal. The Modal can also be closed by default from within the Modal, or by clicking on the background
