import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks'
import { Snack, SnackHolder } from './index'
import { SnackProvider } from '../../contexts/snacks'
import { UseSnackHookStory } from './use-snack-hook.stories'
import useSnack from '../../hooks/use-snack'
import { RenderHtmlMarkup } from '../../storybook/render-html-markup'

<Meta title="Snack" component={Snack} />

# Snack

A multi purpose notification component to inform users of updates and events within your application.

<ArgsTable of={Snack} />

## Basic Usage

The Snack component can be used for UI purposes only, but won't have the functionality of the React implementation (i.e. the timeouts, appearing at the top of the screen, etc)

Underlying tag: `<div>`

<Canvas>
  <Story name="Basic Usage">
    <Snack>Message goes here</Snack>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Snack" story="Basic Usage" />

## With an icon

<Canvas>
  <Story name="With an icon">
    <Snack icon="infoSystem">Message goes here</Snack>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Snack" story="With an icon" />

## With intents

<Canvas>
  <Story name="Intent: primary">
    <Snack icon="infoSystem" intent="primary">
      Primary message goes here
    </Snack>
  </Story>
  <Story name="Intent: secondary">
    <Snack intent="secondary" icon="infoSystem">
      Secondary message goes here
    </Snack>
  </Story>
  <Story name="Intent: Critical">
    <Snack intent="critical" icon="warningSystem">
      Critical message goes here
    </Snack>
  </Story>
  <Story name="Intent: success">
    <Snack intent="success" icon="tickSystem">
      Success message goes here
    </Snack>
  </Story>
  <Story name="Intent: danger">
    <Snack intent="danger" icon="errorSystem">
      Danger message goes here
    </Snack>
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="Snack"
  story={['Intent: primary', 'Intent: secondary', 'Intent: Critical', 'Intent: success', 'Intent: danger']}
/>

## SnackHolder

This component is essentially invisible. It is used automatically as part of the `<SnackProvider>` component, so if you are a React user you shouldn't need to use this component on it's own.

`SnackHolder`'s purpose is to group snacks and dispaly them in the corner of the screen above all other content.

If you are using this library without react, you may find is useful for putting `Snack`s inside of.

<ArgsTable of={SnackHolder} />

<Canvas>
  <Story name="Default Usage">
    <SnackHolder />
  </Story>
</Canvas>

<RenderHtmlMarkup component="SnackHolder" story="Default Usage" />

## React usage with `SnackProvider` and `useSnack` hook

A context and a hook is provided to use the Snack component out of the box called `SnackProvider`

<Canvas>
  <Story name="useSnack hook">
    <SnackProvider>
      <UseSnackHookStory />
    </SnackProvider>
  </Story>
</Canvas>

You must wrap your whole application in the `SnackProvider` component. Thereafter you can use the `useSnack` hook in any component to trigger a hook.

## `useSnack` API

Exports the following methods

- `custom`: (snack: ISnack, timeout?: number) => void
- `success`: (text: string, timeout?: number) => void
- `info`: (text: string, timeout?: number) => void
- `error`: (text: string, timeout?: number) => void
- `warning`: (text: string, timeout?: number) => void

#### Description of arguments

- `snack`: See below for the properties of the `ISnack` interface
- `timeout`: Set to `0` to stop a Snack from disappearing on it's own. It would then have to be dismissed by the user instead.
- `text`: The text content that will be shown inside the snack
