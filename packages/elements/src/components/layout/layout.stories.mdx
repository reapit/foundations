import { useState } from 'react'
import { Story, Canvas, Meta, ArgsTable } from '@storybook/addon-docs'
import { MainContainer, PageContainer, SecondaryNavContainer, FlexContainer } from './index'
import { GridDemoBlock } from '../../storybook/demo-block'
import { RenderHtmlMarkup } from '../../storybook/render-html-markup'
import { NavStateProvider } from '../../hooks/use-nav-state'
import { MediaStateProvider } from '../../hooks/use-media-query'
import { SecondaryNav, SecondaryNavItem } from '../secondary-nav'
import { PageHeader } from '../page-header'
import { NavResponsive } from '../nav'
import { Grid, Col, ColSplitThird, ColSplitTwoThirds, GridThirds } from '../grid'

<Meta title="Layouts" component={MainContainer} />

# Layouts

When thinking about laying out your page, you will need to wrap your content in a series of Containers. To support out common patterns, will first introduce some new container components.

The components themsleves are really around laying out a page so you may want to skip forward to the full examples below.

## MainContainer

In this example you can see the `MainContainer` component - used to wrap the whole application and will handle the `Nav` and main content positioning.

<Canvas>
  <Story name="Main Container">
    <MainContainer>
      <FlexContainer isFlexGrow1>
        <PageContainer>
          <GridDemoBlock />
        </PageContainer>
      </FlexContainer>
    </MainContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Main Container" />

## SecondaryNavContainer

The `SecondaryNavContainer` is fixed width and used to contain secondary navigation as well as controls like filters.

<Canvas>
  <Story name="Secondary Nav Container">
    <SecondaryNavContainer>
      <GridDemoBlock />
    </SecondaryNavContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Secondary Nav Container" />

## PageContainer

The `PageContainer` should be the body of your content, it will typically contain a `Grid` component.

<Canvas>
  <Story name="Page Container">
    <PageContainer>
      <Grid>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
        <Col>
          <GridDemoBlock />
        </Col>
      </Grid>
    </PageContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Page Container" />

## Page Container Max Width

The `PageContainer` should be the body of your content but maxes out at 1200px width when the `hasMaxWidth` prop is applied in Desktop and is centered on the page.

<Canvas>
  <Story name="Page Container Max Width">
    <PageContainer hasMaxWidth>
      <GridDemoBlock />
    </PageContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Page Container Max Width" />

## Has Grey Background

All containers accept a `hasGreyBackground` prop which will add a grey background to the container to support white tile on grey background layouts

<Canvas>
  <Story name="Has Grey Background">
    <PageContainer hasGreyBackground>
      <GridDemoBlock />
    </PageContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Has Grey Background" />

## FlexContainer

The previous two containers are postioned using the `FlexContainer` component. This component has a number of optional props to perform most flexbox operations - see the below inteface for React users:

<ArgsTable of={FlexContainer} />

<Canvas>
  <Story name="Flex Container">
    <FlexContainer isFlexColumn>
      <GridDemoBlock />
      <GridDemoBlock />
    </FlexContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Flex Container" />

## Combined Container Components

In this example you can see the `MainContainer` component - used to wrap the whole application and will handle the `Nav` and main content positioning.

The `SecondaryNavContainer` is fixed width and used to contain secondary navigation as well as controls like filters.

The `PageContainer` should be the body of your content, it will typically contain a `Grid` component.

The previous two containers are postioned using the `FlexContainer` component. This component has a number of optional props to perform most flexbox operations - see the below inteface for React users:

These booleans map 1:1 to the flexbox helpers you can see here on [Github](https://github.com/reapit/foundations/blob/master/packages/elements/src/styles-v3/base/flexbox.ts). For the output helper classes, see the HTML Markup Component below.

<Canvas>
  <Story name="Combined Container Components">
    <MainContainer>
      <FlexContainer isFlexGrow1>
        <SecondaryNavContainer>
          <GridDemoBlock />
        </SecondaryNavContainer>
        <PageContainer>
          <GridDemoBlock />
          <FlexContainer isFlexColumn>
            <GridDemoBlock />
            <GridDemoBlock />
          </FlexContainer>
        </PageContainer>
      </FlexContainer>
    </MainContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story={['Combined Container Components']} />

## Combined Layout

For a complete example of how to lay out a page, see below where we have combined a number of other stories including `Nav`, `PageHeader`, `SecondaryNav` and `Grid` to give a full page layout.

<Canvas>
  <Story name="Complete Combined Example">
    {() => {
      const [selectedItem, setSelectedItem] = useState(1)
      return (
        <NavStateProvider>
          <MediaStateProvider>
            <MainContainer>
              <NavResponsive
                defaultNavIndex={1}
                appSwitcherOptions={[
                  {
                    text: 'AppMarket',
                    callback: () => console.log('Navigating'),
                    iconUrl: <Icon icon="reapitLogoSmallInfographic" />,
                  },
                  {
                    text: 'DevPortal',
                    callback: () => console.log('Navigating'),
                    iconUrl: <Icon icon="reapitLogoSmallInfographic" />,
                  },
                ]}
                avatarText="JD"
                avatarOptions={[
                  {
                    text: 'Settings',
                    callback: () => console.log('Navigating'),
                  },
                  {
                    text: 'Profile',
                    callback: () => console.log('Navigating'),
                  },
                  {
                    text: 'Log Out',
                    callback: () => console.log('Navigating'),
                  },
                ]}
                options={[
                  {
                    itemIndex: 0,
                    callback: () => console.log('Navigating'),
                  },
                  {
                    itemIndex: 1,
                    callback: () => console.log('Navigating'),
                    text: 'Apps',
                    subItems: [
                      {
                        itemIndex: 0,
                        callback: () => console.log('Navigating'),
                        text: 'App List',
                      },
                      {
                        itemIndex: 1,
                        callback: () => console.log('Navigating'),
                        text: 'Create App',
                      },
                    ],
                  },
                  {
                    itemIndex: 2,
                    callback: () => console.log('Navigating'),
                    text: 'Analytics',
                    subItems: [
                      {
                        itemIndex: 2,
                        callback: () => console.log('Navigating'),
                        text: 'Hits Per Day',
                      },
                      {
                        itemIndex: 3,
                        callback: () => console.log('Navigating'),
                        text: 'Weekly Hits',
                      },
                    ],
                  },
                  {
                    itemIndex: 3,
                    href: 'https://marketplace.reapit.cloud',
                    text: 'Marketplace',
                  },
                ]}
              />
              <FlexContainer isFlexGrow1>
                <SecondaryNavContainer>
                  <SecondaryNav>
                    <SecondaryNavItem active={selectedItem === 1} onClick={() => setSelectedItem(1)}>
                      App List
                    </SecondaryNavItem>
                    <SecondaryNavItem active={selectedItem === 2} onClick={() => setSelectedItem(2)}>
                      Create App
                    </SecondaryNavItem>
                  </SecondaryNav>
                </SecondaryNavContainer>
                <PageContainer>
                  <PageHeader
                    breadcrumb={{
                      defaultActiveIndex: 3,
                      items: [
                        {
                          text: 'Home',
                          onClick: () => console.log('Home clicked'),
                        },
                        {
                          text: 'Level 1',
                          onClick: () => console.log('1 clicked'),
                        },
                        {
                          text: 'Level 2',
                          onClick: () => console.log('2 clicked'),
                        },
                        {
                          text: 'Level 3',
                          onClick: () => console.log('3 clicked'),
                        },
                      ],
                    }}
                    avatar={{
                      type: 'image',
                      src: 'https://picsum.photos/200/300',
                    }}
                    pageTitle={{
                      children: 'Page Title',
                      hasBoldText: true,
                    }}
                    tags={[
                      {
                        intent: 'primary',
                        children: 'Tag 1',
                      },
                      {
                        intent: 'primary',
                        children: 'Tag 2',
                      },
                    ]}
                    pageSubtitle={{
                      children: 'Page Sub Title',
                      hasBoldText: true,
                    }}
                    pageInfo={[
                      {
                        children: 'Page Info 1',
                      },
                      {
                        children: 'Page Info 2',
                      },
                      {
                        children: 'Page Info 3',
                      },
                    ]}
                    buttons={[
                      {
                        children: 'Button 1',
                        intent: 'default',
                      },
                      {
                        children: 'Button 2',
                        intent: 'default',
                      },
                    ]}
                    tabs={{
                      name: 'my-cool-tabs-full-width',
                      isFullWidth: true,
                      hasNoBorder: true,
                      options: [
                        {
                          id: 'tab-1-fw',
                          value: 'tab-1-fw',
                          text: 'Tab Content 1',
                          isChecked: true,
                        },
                        {
                          id: 'tab-2-fw',
                          value: 'tab-2-fw',
                          text: 'Tab Content 2',
                          isChecked: false,
                        },
                        {
                          id: 'tab-3-fw',
                          value: 'tab-3-fw',
                          text: 'Tab Content 3',
                          isChecked: false,
                        },
                      ],
                    }}
                  />
                  <Grid>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                    <Col>
                      <GridDemoBlock />
                    </Col>
                  </Grid>
                </PageContainer>
              </FlexContainer>
            </MainContainer>
          </MediaStateProvider>
        </NavStateProvider>
      )
    }}
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="Layouts"
  story={['Complete Combined Example']}
  label="Complete Combined Example Rendered HTML markup"
/>

## Combined Layout Max Width

Variant on the complete layout but using a max width container in desktop, a side column and no secondary nav.

<Canvas>
  <Story name="Complete Combined Example Max Width">
    {() => {
      const [selectedItem, setSelectedItem] = useState(1)
      return (
        <NavStateProvider>
          <MediaStateProvider>
            <MainContainer hasGreyBackground>
              <NavResponsive
                defaultNavIndex={1}
                appSwitcherOptions={[
                  {
                    text: 'AppMarket',
                    callback: () => console.log('Navigating'),
                    iconUrl: <Icon icon="reapitLogoSmallInfographic" />,
                  },
                  {
                    text: 'DevPortal',
                    callback: () => console.log('Navigating'),
                    iconUrl: <Icon icon="reapitLogoSmallInfographic" />,
                  },
                ]}
                avatarText="JD"
                avatarOptions={[
                  {
                    text: 'Settings',
                    callback: () => console.log('Navigating'),
                  },
                  {
                    text: 'Profile',
                    callback: () => console.log('Navigating'),
                  },
                  {
                    text: 'Log Out',
                    callback: () => console.log('Navigating'),
                  },
                ]}
                options={[
                  {
                    itemIndex: 0,
                    callback: () => console.log('Navigating'),
                  },
                  {
                    itemIndex: 1,
                    callback: () => console.log('Navigating'),
                    text: 'Apps',
                    subItems: [
                      {
                        itemIndex: 0,
                        callback: () => console.log('Navigating'),
                        text: 'App List',
                      },
                      {
                        itemIndex: 1,
                        callback: () => console.log('Navigating'),
                        text: 'Create App',
                      },
                    ],
                  },
                  {
                    itemIndex: 2,
                    callback: () => console.log('Navigating'),
                    text: 'Analytics',
                    subItems: [
                      {
                        itemIndex: 2,
                        callback: () => console.log('Navigating'),
                        text: 'Hits Per Day',
                      },
                      {
                        itemIndex: 3,
                        callback: () => console.log('Navigating'),
                        text: 'Weekly Hits',
                      },
                    ],
                  },
                  {
                    itemIndex: 3,
                    href: 'https://marketplace.reapit.cloud',
                    text: 'Marketplace',
                  },
                ]}
              />
              <PageContainer hasGreyBackground>
                <PageHeader
                  hasMaxWidth
                  breadcrumb={{
                    defaultActiveIndex: 3,
                    items: [
                      {
                        text: 'Home',
                        onClick: () => console.log('Home clicked'),
                      },
                      {
                        text: 'Level 1',
                        onClick: () => console.log('1 clicked'),
                      },
                      {
                        text: 'Level 2',
                        onClick: () => console.log('2 clicked'),
                      },
                      {
                        text: 'Level 3',
                        onClick: () => console.log('3 clicked'),
                      },
                    ],
                  }}
                  avatar={{
                    type: 'image',
                    src: 'https://picsum.photos/200/300',
                  }}
                  pageTitle={{
                    children: 'Page Title',
                    hasBoldText: true,
                  }}
                  tags={[
                    {
                      intent: 'primary',
                      children: 'Tag 1',
                    },
                    {
                      intent: 'primary',
                      children: 'Tag 2',
                    },
                  ]}
                  pageSubtitle={{
                    children: 'Page Sub Title',
                    hasBoldText: true,
                  }}
                  pageInfo={[
                    {
                      children: 'Page Info 1',
                    },
                    {
                      children: 'Page Info 2',
                    },
                    {
                      children: 'Page Info 3',
                    },
                  ]}
                  buttons={[
                    {
                      children: 'Button 1',
                      intent: 'default',
                    },
                    {
                      children: 'Button 2',
                      intent: 'default',
                    },
                  ]}
                  tabs={{
                    name: 'my-cool-tabs-max-width',
                    isFullWidth: true,
                    hasNoBorder: true,
                    options: [
                      {
                        id: 'tab-1-mw',
                        value: 'tab-1-mw',
                        text: 'Tab Content 1',
                        isChecked: true,
                      },
                      {
                        id: 'tab-2-mw',
                        value: 'tab-2-mw',
                        text: 'Tab Content 2',
                        isChecked: false,
                      },
                      {
                        id: 'tab-3-mw',
                        value: 'tab-3-mw',
                        text: 'Tab Content 3',
                        isChecked: false,
                      },
                    ],
                  }}
                />
                <FlexContainer hasMaxWidth isFlexColumn>
                  <GridThirds>
                    <ColSplitThird>
                      <GridDemoBlock />
                    </ColSplitThird>
                    <ColSplitTwoThirds>
                      <GridDemoBlock />
                    </ColSplitTwoThirds>
                  </GridThirds>
                </FlexContainer>
              </PageContainer>
            </MainContainer>
          </MediaStateProvider>
        </NavStateProvider>
      )
    }}
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="Layouts"
  story={['Complete Combined Example Max Width']}
  label="Complete Combined Example Rendered HTML markup"
/>
