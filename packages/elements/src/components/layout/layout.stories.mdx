import { useState } from 'react'
import { Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import { MainContainer, PageContainer, SecondaryNavContainer, Molecule, FlexContainer } from './index'
import { GridDemoBlock } from '../../storybook/demo-block'
import { RenderHtmlMarkup } from '../../storybook/render-html-markup'
import { NavStateProvider } from '../../hooks/use-nav-state'
import { MediaStateProvider } from '../../hooks/use-media-query'
import { UseNavMobileSubMenuStory } from '../nav/use-nav.stories'
import { SecondaryNav, SecondaryNavItem } from '../secondary-nav'

<Meta title="Layouts" component={Molecule} />

# Layouts

When thinking about laying out your page, you will need to wrap your content in a series of Containers. To support out common patterns, will first introduce some new container components.

The components themsleves are really around laying out a page so you may want to skip forward to the full examples below.

## Container Components

In this example you can see the `MainContainer` component - used to wrap the whole application and will handle the `Nav` and main content positioning.

The `SecondaryNavContainer` is fixed width and used to contain secondary navigation as well as controls like filters.

The `PageContainer` should be the body of your content, it will typically contain a `Grid` component.

The previous two containers are postioned using the `FlexContainer` component. This component has a number of optional props to perform most flexbox operations - see the below inteface for React users:

These booleans map 1:1 to the flexbox helpers you can see here on [Github](https://github.com/reapit/foundations/blob/master/packages/elements/src/styles-v3/base/flexbox.ts). For the output helper classes, see the HTML Markup Component below.

Finally, the `Molecule` container is a multi purpose container for adding sensible default spacing between items for example blocks of text.

<Canvas>
  <Story name="Container Components">
    <MainContainer>
      <FlexContainer isFlexGrow1>
        <SecondaryNavContainer>
          <GridDemoBlock />
        </SecondaryNavContainer>
        <PageContainer>
          <GridDemoBlock />
          <FlexContainer>
            <Molecule>
              <GridDemoBlock />
            </Molecule>
            <Molecule>
              <GridDemoBlock />
            </Molecule>
          </FlexContainer>
        </PageContainer>
      </FlexContainer>
    </MainContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story={['Container Components']} />

## Combined Layout

For a complete example of how to lay out a page, see below where we have combined a number of other stories including `Nav`, `SecondaryNav` and `Grid` to give a full page layout.

<Canvas>
  <Story name="Complete Combined Example">
    {() => {
      const [selectedItem, setSelectedItem] = useState(1)
      return (
        <NavStateProvider>
          <MediaStateProvider>
            <MainContainer>
              <UseNavMobileSubMenuStory />
              <FlexContainer isFlexGrow1>
                <SecondaryNavContainer>
                  <SecondaryNav>
                    <SecondaryNavItem active={selectedItem === 1} onClick={() => setSelectedItem(1)}>
                      App List
                    </SecondaryNavItem>
                    <SecondaryNavItem active={selectedItem === 2} onClick={() => setSelectedItem(2)}>
                      Create App
                    </SecondaryNavItem>
                  </SecondaryNav>
                </SecondaryNavContainer>
                <PageContainer>
                  <Molecule>
                    <GridDemoBlock />
                  </Molecule>
                  <Grid>
                    <Col>
                      <FlexContainer>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                      </FlexContainer>
                    </Col>
                    <Col>
                      <FlexContainer>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                      </FlexContainer>
                    </Col>
                    <Col>
                      <FlexContainer>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                      </FlexContainer>
                    </Col>
                    <Col>
                      <FlexContainer>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                        <Molecule>
                          <GridDemoBlock />
                        </Molecule>
                      </FlexContainer>
                    </Col>
                    <Col>
                      <Molecule>
                        <GridDemoBlock />
                      </Molecule>
                    </Col>
                    <Col>
                      <Molecule>
                        <GridDemoBlock />
                      </Molecule>
                    </Col>
                    <Col>
                      <Molecule>
                        <GridDemoBlock />
                      </Molecule>
                    </Col>
                    <Col>
                      <Molecule>
                        <GridDemoBlock />
                      </Molecule>
                    </Col>
                  </Grid>
                  <Molecule>
                    <GridDemoBlock />
                  </Molecule>
                </PageContainer>
              </FlexContainer>
            </MainContainer>
          </MediaStateProvider>
        </NavStateProvider>
      )
    }}
  </Story>
</Canvas>

<RenderHtmlMarkup
  component="Layouts"
  story={['Complete Combined Example']}
  label="Complete Combined Example Rendered HTML markup"
/>

## Atomic design

Atomic design is a design system methodology for defining the structure or scale of a set of components. A simple explaination is as follows: the smallest component is defined as an `Atom`. A collection of Atoms is defined as a `Molecule`. A collection of Molecules is defined as an `Organisum`.

So the summarise `Atom => Molecule => Organisum`.

## Molecule

<Canvas>
  <Story name="Molecule">
    <Molecule>
      <GridDemoBlock />
    </Molecule>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Molecule" />

## PageContainer

The `PageContainer` should be the body of your content, it will typically contain a `Grid` component.

<Canvas>
  <Story name="Page Container">
    <PageContainer>
      <GridDemoBlock />
      <FlexContainer isFlexGrow1>
        <Molecule>
          <GridDemoBlock />
        </Molecule>
        <Molecule>
          <GridDemoBlock />
        </Molecule>
      </FlexContainer>
    </PageContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Page Container" />

## MainContainer

In this example you can see the `MainContainer` component - used to wrap the whole application and will handle the `Nav` and main content positioning.

<Canvas>
  <Story name="Main Container">
    <MainContainer>
      <FlexContainer isFlexGrow1>
        <PageContainer>
          <GridDemoBlock />
          <FlexContainer>
            <Molecule>
              <GridDemoBlock />
            </Molecule>
            <Molecule>
              <GridDemoBlock />
            </Molecule>
          </FlexContainer>
        </PageContainer>
      </FlexContainer>
    </MainContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Main Container" />

## SecondaryNavContainer

The `SecondaryNavContainer` is fixed width and used to contain secondary navigation as well as controls like filters.

<Canvas>
  <Story name="Secondary Nav Container">
    <SecondaryNavContainer></SecondaryNavContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Secondary Nav Container" />

## FlexContainer

The previous two containers are postioned using the `FlexContainer` component. This component has a number of optional props to perform most flexbox operations - see the below inteface for React users:

<ArgsTable of={FlexContainer} />

<Canvas>
  <Story name="Flex Container">
    <FlexContainer>
      <Molecule>
        <GridDemoBlock />
      </Molecule>
      <Molecule>
        <GridDemoBlock />
      </Molecule>
    </FlexContainer>
  </Story>
</Canvas>

<RenderHtmlMarkup component="Layouts" story="Flex Container" />
