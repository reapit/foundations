import{r as o,j as e,B as C,g as q,ab as I,a8 as b,am as E,an as m,ap as R,aq as u,ad as S,F as _,ar as A,W as D,ac as H,a7 as M,ae as w,z as N,k as U,c as J}from"./vendor-troV5kp-.js";import{E as y}from"./index-7TJbm2qB.js";import{c as K}from"./index-PuzADKUO.js";import{u as Q}from"./index.esm-zVN26rm4.js";import{u as F,r as P,g as T,G,o as V}from"./index-7tW5-Pg7.js";import{f as X}from"./index-tSHtSDOC.js";import{S as Y}from"./index-1k5r5oX4.js";import"./FileSaver.min-JSyqwKbI.js";const k="four-col-table",Z=({orgId:r})=>{var i,t;const[l,c]=o.useState(1),[h,n]=o.useState(12),[a,x]=F({reapitConnectBrowserSession:P,action:T[G.getGroupsByOrgId],queryParams:{pageSize:h,pageNumber:l},uriParams:{orgId:r},fetchWhenTrue:[r]});return e.jsx(y,{children:x?e.jsx(C,{}):(i=a==null?void 0:a._embedded)!=null&&i.length?e.jsxs(e.Fragment,{children:[e.jsx(q,{children:"Office Groups"}),e.jsxs(I,{className:b,children:[e.jsxs(E,{className:k,children:[e.jsx(m,{children:"Customer Id"}),e.jsx(m,{children:"Group Name"}),e.jsx(m,{children:"Office Ids"}),e.jsx(m,{children:"Status"})]}),(t=a==null?void 0:a._embedded)==null?void 0:t.map(({customerId:j,name:d,officeIds:s,status:p})=>e.jsxs(R,{className:k,children:[e.jsx(u,{children:j}),e.jsx(u,{children:d}),e.jsx(u,{children:s}),e.jsx(u,{children:p})]},d))]}),e.jsx(S,{callback:c,currentPage:l,numberPages:Math.ceil(((a==null?void 0:a.totalCount)??1)/12)}),e.jsx(Y,{area:"OFFICE_GROUPS",data:a,setPageSize:n})]}):e.jsx(_,{className:A,isInline:!0,isExpanded:!0,isFullWidth:!0,intent:"primary",children:"No office groups found for this organisation"})})},v=(r,l)=>()=>{l&&r(l)},O=()=>{var f;const[r,l]=o.useState(1),[c,h]=o.useState({}),[n,a]=o.useState(null),{name:x,agencyCloudId:i}=c,{register:t,handleSubmit:j}=Q({mode:"onChange"}),d=V(c),[s,p]=F({reapitConnectBrowserSession:P,action:T[G.getCustomers],queryParams:{...d,pageSize:12,pageNumber:r},fetchWhenTrue:[x||i]});return e.jsx(y,{children:e.jsxs(D,{children:[e.jsx(H,{children:"Customers"}),e.jsx("form",{onChange:j(X(h,500)),children:e.jsxs(M,{className:b,children:[e.jsx(w,{children:e.jsx(N,{...t("name"),label:"Customer Name",type:"search"})}),e.jsx(w,{children:e.jsx(N,{...t("agencyCloudId"),label:"Customer Code",type:"search"})})]})}),p?e.jsx(C,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:b,rows:(f=s==null?void 0:s.data)==null?void 0:f.map(({name:z,address:B,agencyCloudId:L,billingReference:W,id:g})=>({cells:[{label:"Customer Name",value:z,icon:"flatInfographic",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Agency Cloud Id",value:L,cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Customer Id",value:g,narrowTable:{showLabel:!0}},{label:"Customer Billing Reference",value:W||"-",narrowTable:{showLabel:!0}},{label:"Customer Address",value:K(B),narrowTable:{showLabel:!0}}],expandableContent:{content:e.jsxs(e.Fragment,{children:[e.jsx(U,{alignment:"center",children:e.jsx(J,{intent:"primary",onClick:v(a,g),children:"Fetch Office Groups"})}),n&&n===g&&e.jsx(Z,{orgId:n})]})}}))}),e.jsx(S,{callback:l,currentPage:r,numberPages:Math.ceil(((s==null?void 0:s.totalCount)??1)/12)})]})]})})};export{O as Customers,O as default,v as handleFetchGroups};
