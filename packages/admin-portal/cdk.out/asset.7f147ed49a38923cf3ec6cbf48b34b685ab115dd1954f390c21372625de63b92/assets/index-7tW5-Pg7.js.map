{"version":3,"mappings":"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","names":["imageCropperOuter","imageCropperPreviewWrapper","imageCropperPreview","generateDefaultCrop","aspect","generateBase64FromCanvas","canvas","completedCrop","calculateOutputDimensions","originHeight","isWidthGreaterThanHeight","resizeDimensions","cropRatio","originWidth","isHeightGreaterThanOrEqualWidth","DEFAULT_CANVAS_AXIS_COORDINATE","previewCanvasRef","imgRef","image","scaleX","crop","outputWidth","ctx","scaleY","outputHeight","onChangeHandler","setCrop","onCompleteHandler","setCompletedCrop","onCloseHandler","setVisible","setFileName","setCroppedImage","onCropClick","base64Data","event","reader","file","base64","error","handleFileCrop","croppedImage","onFileUpload","value","uuid","onFileView","defaultValue","label","placeholderText","accept","rest","ref","fileUrl","useState","visible","defaultCrop","useRef","inputId","id","randomId","useEffect","drawCanvasAfterCrop","handleSetNativeInput","isImageCropped","jsxs","Fragment","jsx","Label","FlexContainer","ElFileInput","ElFileInputHidden","ElFileInputIconContainer","handleFileView","elMr4","Icon","handleFileClear","SmallText","cx","reactImageCropGlobalStyles","imageCropperInner","imageCropperCropPanelWrapper","ReactCrop","imageCropperCropPanel","onLoadHandler","Subtitle","ButtonGroup","onCropClickHandler","catchChunkError","resolve","reject","fn","retriesLeft","interval","okayWrapper","okayContent","OkayPage","children","className","logger","connectSession","Sentry.setContext","Sentry.captureException","GLOBAL_KEY","key","setMarketplaceGlobalsByKey","existingObject","keyValueObject","LOCALSTORAGE_KEY","globalsObject","clearMarkeplaceGlobals","restoreGlobalObjectFromLS","localStorageObject","RC_SESSION_MISSING_ERROR","NETWORK_ERROR","getMergedHeaders","reapitConnectBrowserSession","headers","accessToken","handleReapitError","message","reapitError","description","title","errors","field","fieldErrors","messageString","fieldString","getUrl","uriParams","action","deSerialisedPath","path","uriReplaceKey","query","stringListToBatchQuery","queryKey","list","index","nextItem","queryObject","currentQuery","objectItem","queryParams","onSuccess","refetchOnWindowFocus","retry","withCredentials","errorSnack","useSnack","queryClient","useQueryClient","navigate","useNavigate","successMessage","errorMessage","url","useMemo","isEnabled","fetchWhenTrue","data","isLoading","isRefetching","refetch","reqHeaders","axios","onError","errorString","result","define_process_env_default","GetActionNames","getActions","ApiNames","PathNames","UpdateActionNames","handleSetInitialOptions","valueKey","setOptions","item","currentValues","options","newSelectedOptions","option","newFetchedOptions","newOptions","uniqueOptions","SearchableMultiSelect","defaultList","searchKey","debounce","params","response","loading","searchString","defaultValues","nameKey","handleSetNewOptions","InputWrapFull","InputGroup","elMb5","Loader","PersistentNotification","connectSessionVerifyDecodeIdTokenWithPublicKeys","decodedToken","decode","token","aud","verifier","IdTokenVerifier","claim","payload","err","currentSeconds","connectSessionVerifyDecodeIdToken","connectOAuthUrl","connectClientId","resetTimer","ReapitConnectBrowserSession","session","refresh_token","id_token","loginIdentity","stateNonce","internalRedirectString","redirectUri","internalRedirectPath","authRedirectUri","loginRedirectUri","logoutRedirectUri","endpoint","expiry","fiveMinsFromNow","base64Encoded","Buffer","name","class","propsAsIs","LoginContentWrapper","styled","redirectPath","Login","appName","loginUser","useCallback","elMb7","Button","Routes","createBrowserHistory","ApprovalsPage","React","__vitePreload","CustomersPage","SubscriptionsPage","UsagePage","FourOFour","PageContainer","RoutesComponent","Route","RoutePaths","PrivateRouteWrapper","BillingPage","IaaSPage","injectSwitchModeToWindow","App","StrictMode","QueryClientProvider","MediaStateProvider","Router","ReactQueryDevtools"],"ignoreList":[],"sources":["../../../utils-react/src/image-cropper/__styles__/styles.ts","../../../utils-react/src/image-cropper/utils.ts","../../../utils-react/src/image-cropper/handlers.ts","../../../utils-react/src/image-cropper/image-cropper.tsx","../../../utils-react/src/catch-chunk-error/index.ts","../../../utils-react/src/cloud-alert/ok-page.tsx","../../../utils-react/src/logger/index.ts","../../../utils-react/src/switch-window-mode/index.ts","../../../use-reapit-data/src/utils.ts","../../../use-reapit-data/src/use-reapit-get.ts","../../../use-reapit-data/src/api-regions.ts","../../../use-reapit-data/src/get-actions.ts","../../../use-reapit-data/src/update-actions.ts","../../../utils-react/src/searchable-multi-select/index.tsx","../../../connect-session/src/utils/verify-decode-id-token.ts","../../../connect-session/src/browser/index.ts","../../../connect-session/src/server/index.ts","../../../utils-react/src/login/__styles__/index.ts","../../../utils-react/src/login/index.tsx","../../src/constants/routes.ts","../../src/core/connect-session.ts","../../src/core/router.tsx","../../src/core/app.tsx"],"sourcesContent":["/* eslint-disable max-len */\nimport { css } from '@linaria/core'\n\n// CSS from react-image-cropper\nexport const reactImageCropGlobalStyles = css`\n  .ReactCrop {\n    position: relative;\n    display: inline-block;\n    cursor: crosshair;\n    overflow: hidden;\n    max-width: 100%;\n  }\n  .ReactCrop:focus {\n    outline: none;\n  }\n  .ReactCrop--disabled,\n  .ReactCrop--locked {\n    cursor: inherit;\n  }\n  .ReactCrop__image {\n    display: block;\n    max-width: 100%;\n    touch-action: manipulation;\n  }\n  .ReactCrop__crop-selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n    transform: translate3d(0, 0, 0);\n    box-sizing: border-box;\n    cursor: move;\n    box-shadow: 0 0 0 9999em rgba(0, 0, 0, 0.5);\n    touch-action: manipulation;\n    border: 1px solid;\n    border-image-source: url('data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==');\n    border-image-slice: 1;\n    border-image-repeat: repeat;\n  }\n  .ReactCrop--disabled .ReactCrop__crop-selection {\n    cursor: inherit;\n  }\n  .ReactCrop--circular-crop .ReactCrop__crop-selection {\n    border-radius: 50%;\n    box-shadow:\n      0px 0px 1px 1px white,\n      0 0 0 9999em rgba(0, 0, 0, 0.5);\n  }\n  .ReactCrop--invisible-crop .ReactCrop__crop-selection {\n    display: none;\n  }\n  .ReactCrop__rule-of-thirds-vt::before,\n  .ReactCrop__rule-of-thirds-vt::after,\n  .ReactCrop__rule-of-thirds-hz::before,\n  .ReactCrop__rule-of-thirds-hz::after {\n    content: '';\n    display: block;\n    position: absolute;\n    background-color: rgba(255, 255, 255, 0.4);\n  }\n  .ReactCrop__rule-of-thirds-vt::before,\n  .ReactCrop__rule-of-thirds-vt::after {\n    width: 1px;\n    height: 100%;\n  }\n  .ReactCrop__rule-of-thirds-vt::before {\n    left: 33.3333%;\n    left: calc(100% / 3);\n  }\n  .ReactCrop__rule-of-thirds-vt::after {\n    left: 66.6666%;\n    left: calc(100% / 3 * 2);\n  }\n  .ReactCrop__rule-of-thirds-hz::before,\n  .ReactCrop__rule-of-thirds-hz::after {\n    width: 100%;\n    height: 1px;\n  }\n  .ReactCrop__rule-of-thirds-hz::before {\n    top: 33.3333%;\n    top: calc(100% / 3);\n  }\n  .ReactCrop__rule-of-thirds-hz::after {\n    top: 66.6666%;\n    top: calc(100% / 3 * 2);\n  }\n  .ReactCrop__drag-handle {\n    position: absolute;\n  }\n  .ReactCrop__drag-handle::after {\n    position: absolute;\n    content: '';\n    display: block;\n    width: 10px;\n    height: 10px;\n    background-color: rgba(0, 0, 0, 0.2);\n    border: 1px solid rgba(255, 255, 255, 0.7);\n    box-sizing: border-box;\n    outline: 1px solid transparent;\n  }\n  .ReactCrop .ord-nw {\n    top: 0;\n    left: 0;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: nw-resize;\n  }\n  .ReactCrop .ord-nw::after {\n    top: 0;\n    left: 0;\n  }\n  .ReactCrop .ord-n {\n    top: 0;\n    left: 50%;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: n-resize;\n  }\n  .ReactCrop .ord-n::after {\n    top: 0;\n  }\n  .ReactCrop .ord-ne {\n    top: 0;\n    right: 0;\n    margin-top: -5px;\n    margin-right: -5px;\n    cursor: ne-resize;\n  }\n  .ReactCrop .ord-ne::after {\n    top: 0;\n    right: 0;\n  }\n  .ReactCrop .ord-e {\n    top: 50%;\n    right: 0;\n    margin-top: -5px;\n    margin-right: -5px;\n    cursor: e-resize;\n  }\n  .ReactCrop .ord-e::after {\n    right: 0;\n  }\n  .ReactCrop .ord-se {\n    bottom: 0;\n    right: 0;\n    margin-bottom: -5px;\n    margin-right: -5px;\n    cursor: se-resize;\n  }\n  .ReactCrop .ord-se::after {\n    bottom: 0;\n    right: 0;\n  }\n  .ReactCrop .ord-s {\n    bottom: 0;\n    left: 50%;\n    margin-bottom: -5px;\n    margin-left: -5px;\n    cursor: s-resize;\n  }\n  .ReactCrop .ord-s::after {\n    bottom: 0;\n  }\n  .ReactCrop .ord-sw {\n    bottom: 0;\n    left: 0;\n    margin-bottom: -5px;\n    margin-left: -5px;\n    cursor: sw-resize;\n  }\n  .ReactCrop .ord-sw::after {\n    bottom: 0;\n    left: 0;\n  }\n  .ReactCrop .ord-w {\n    top: 50%;\n    left: 0;\n    margin-top: -5px;\n    margin-left: -5px;\n    cursor: w-resize;\n  }\n  .ReactCrop .ord-w::after {\n    left: 0;\n  }\n  .ReactCrop__disabled .ReactCrop__drag-handle {\n    cursor: inherit;\n  }\n  .ReactCrop__drag-bar {\n    position: absolute;\n  }\n  .ReactCrop__drag-bar.ord-n {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 6px;\n    margin-top: -3px;\n  }\n  .ReactCrop__drag-bar.ord-e {\n    right: 0;\n    top: 0;\n    width: 6px;\n    height: 100%;\n    margin-right: -3px;\n  }\n  .ReactCrop__drag-bar.ord-s {\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 6px;\n    margin-bottom: -3px;\n  }\n  .ReactCrop__drag-bar.ord-w {\n    top: 0;\n    left: 0;\n    width: 6px;\n    height: 100%;\n    margin-left: -3px;\n  }\n  .ReactCrop--new-crop .ReactCrop__drag-bar,\n  .ReactCrop--new-crop .ReactCrop__drag-handle,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-bar {\n    display: none;\n  }\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-n,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-e,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-s,\n  .ReactCrop--fixed-aspect .ReactCrop__drag-handle.ord-w {\n    display: none;\n  }\n  @media (pointer: coarse) {\n    .ReactCrop .ord-n,\n    .ReactCrop .ord-e,\n    .ReactCrop .ord-s,\n    .ReactCrop .ord-w {\n      display: none;\n    }\n    .ReactCrop__drag-handle {\n      width: 24px;\n      height: 24px;\n    }\n  }\n`\n\n// custom CSS\n\nexport const imageCropperOuter = css`\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  z-index: 999;\n  background-color: rgba(18, 38, 63, 0.3);\n`\n\nexport const imageCropperInner = css`\n  width: 80%;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n  background-color: #fff;\n  padding: 1rem;\n  overflow: scroll;\n`\n\nexport const imageCropperContent = css`\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n`\n\nexport const imageCropperCropPanelWrapper = css`\n  width: 70%;\n  @media (max-width: 768px) {\n    width: 100%;\n    margin-top: 2rem;\n  }\n  height: auto;\n  padding: 0.5rem;\n`\n\nexport const imageCropperCropPanel = css`\n  box-shadow:\n    0 1px 3px rgba(0, 0, 0, 0.12),\n    0 1px 2px rgba(0, 0, 0, 0.24);\n`\n\nexport const imageCropperPreviewWrapper = css`\n  width: 30%;\n  @media (max-width: 768px) {\n    width: 100%;\n    margin-top: 2rem;\n  }\n  height: auto;\n  padding: 0.5rem;\n`\nexport const imageCropperPreview = css`\n  width: 100%;\n  height: auto;\n  box-shadow:\n    0 1px 3px rgba(0, 0, 0, 0.12),\n    0 1px 2px rgba(0, 0, 0, 0.24);\n`\n","import { CompletedCrop, Crop, ResizeDimensions } from './types'\n\nexport const generateDefaultCrop = (aspect?: number): Crop => ({\n  unit: '%',\n  width: 50,\n  // if aspect is set, dont need height, because we can calculate height from width + aspect\n  // otherwise set initial height\n  height: aspect ? undefined : 50,\n  aspect,\n})\n\nexport const generateDownload = (canvas: HTMLCanvasElement, completedCrop: CompletedCrop) => {\n  if (!completedCrop || !canvas) {\n    return\n  }\n\n  canvas.toBlob(\n    (blob) => {\n      const url = window.URL.createObjectURL(blob as Blob)\n      const anchor = document.createElement('a')\n      anchor.download = 'cropped.png'\n      anchor.href = URL.createObjectURL(blob as Blob)\n      anchor.click()\n      window.URL.revokeObjectURL(url)\n    },\n    'image/png',\n    1,\n  )\n}\n\nexport const generateBase64FromCanvas = (canvas: HTMLCanvasElement, completedCrop: CompletedCrop): string => {\n  if (!completedCrop || !canvas) {\n    return ''\n  }\n  const base64Data = canvas.toDataURL('image/png')\n  return base64Data\n}\n\nexport const calculateOutputDimensions = ({\n  cropRatio,\n  resizeDimensions,\n  originWidth,\n  originHeight,\n}: {\n  cropRatio: number\n  resizeDimensions?: ResizeDimensions\n  originWidth: number\n  originHeight: number\n}): { outputWidth: number; outputHeight: number } => {\n  const isWidthGreaterThanHeight = !resizeDimensions && cropRatio > 1\n  const isHeightGreaterThanOrEqualWidth = !resizeDimensions && cropRatio <= 1\n\n  // if not set resizeDimensions, calculate from original width & height\n  if (isWidthGreaterThanHeight) {\n    return {\n      outputWidth: originWidth,\n      outputHeight: originWidth / cropRatio,\n    }\n  }\n\n  if (isHeightGreaterThanOrEqualWidth) {\n    return {\n      outputHeight: originHeight,\n      outputWidth: originHeight * cropRatio,\n    }\n  }\n\n  // if set, take that\n  return {\n    outputWidth: resizeDimensions?.width as number,\n    outputHeight: resizeDimensions?.height as number,\n  }\n}\n","import * as React from 'react'\nimport { generateBase64FromCanvas, calculateOutputDimensions } from './utils'\nimport { CompletedCrop, OnCropClick, Crop, ResizeDimensions } from './types'\n\nconst DEFAULT_CANVAS_AXIS_COORDINATE = 0\n\n// ImageCropper's handlers\nexport const drawCanvasAfterCrop =\n  ({\n    completedCrop: crop,\n    previewCanvasRef,\n    imgRef,\n    resizeDimensions,\n  }: {\n    completedCrop: CompletedCrop\n    previewCanvasRef: React.RefObject<HTMLCanvasElement>\n    imgRef: React.RefObject<HTMLImageElement>\n    resizeDimensions?: ResizeDimensions\n  }) =>\n  () => {\n    if (!crop || !previewCanvasRef.current || !imgRef.current) {\n      return\n    }\n\n    const image = imgRef.current\n    const canvas = previewCanvasRef.current\n\n    const originWidth = image.naturalWidth\n    const originHeight = image.naturalHeight\n\n    const scaleX = originWidth / image.width\n    const scaleY = originHeight / image.height\n\n    const cropRatio = crop.width / crop.height\n\n    const { outputWidth, outputHeight } = calculateOutputDimensions({\n      cropRatio,\n      resizeDimensions,\n      originHeight,\n      originWidth,\n    })\n\n    const ctx = canvas.getContext('2d')\n\n    if (ctx === null) {\n      return\n    }\n\n    // set real dimension when download, different from display dimension in preview\n    // to retain high-quality image\n    canvas.width = outputWidth\n    canvas.height = outputHeight\n\n    ctx.drawImage(\n      image,\n      crop.x * scaleX,\n      crop.y * scaleY,\n      crop.width * scaleX,\n      crop.height * scaleY,\n      DEFAULT_CANVAS_AXIS_COORDINATE,\n      DEFAULT_CANVAS_AXIS_COORDINATE,\n      outputWidth,\n      outputHeight,\n    )\n  }\n\nexport const onLoadHandler = (imgRef: React.RefObject<HTMLImageElement>) => (img) => {\n  ;(imgRef as React.MutableRefObject<HTMLImageElement>).current = img\n}\n\nexport const onChangeHandler = (setCrop: React.Dispatch<Crop>) => (crop: Crop) => setCrop(crop)\n\nexport const onCompleteHandler = (setCompletedCrop: React.Dispatch<CompletedCrop>) => (completedCrop: CompletedCrop) =>\n  setCompletedCrop(completedCrop)\n\nexport const onCropClickHandler =\n  ({\n    previewCanvasRef,\n    completedCrop,\n    onCropClick,\n  }: {\n    previewCanvasRef: React.RefObject<HTMLCanvasElement>\n    completedCrop: CompletedCrop\n    onCropClick: OnCropClick\n  }) =>\n  () => {\n    onCropClick({ previewCanvasRef, completedCrop })\n  }\n\n// ImageCropperWithInput's handlers\nexport const onCloseHandler =\n  ({\n    setVisible,\n    setFileName,\n    setCroppedImage,\n  }: {\n    setVisible: React.Dispatch<boolean>\n    setFileName: React.Dispatch<string>\n    setCroppedImage: React.Dispatch<string>\n  }) =>\n  () => {\n    setFileName('')\n    setCroppedImage('')\n    setVisible(false)\n  }\n\nexport const onCropClick =\n  ({ setCroppedImage, setVisible }: { setCroppedImage: React.Dispatch<string>; setVisible: React.Dispatch<boolean> }) =>\n  ({ previewCanvasRef, completedCrop }) => {\n    console.log(previewCanvasRef, completedCrop)\n    const base64Data = generateBase64FromCanvas(previewCanvasRef.current, completedCrop)\n    setCroppedImage(base64Data)\n    setVisible(false)\n  }\n","import React, {\n  forwardRef,\n  Dispatch,\n  SetStateAction,\n  ChangeEvent,\n  LegacyRef,\n  useMemo,\n  useRef,\n  useState,\n  useEffect,\n} from 'react'\nimport ReactCrop from 'react-image-crop'\nimport {\n  reactImageCropGlobalStyles,\n  imageCropperOuter,\n  imageCropperInner,\n  imageCropperContent,\n  imageCropperCropPanelWrapper,\n  imageCropperCropPanel,\n  imageCropperPreviewWrapper,\n  imageCropperPreview,\n} from './__styles__/styles'\nimport { cx } from '@linaria/core'\nimport {\n  drawCanvasAfterCrop,\n  onLoadHandler,\n  onCropClickHandler,\n  onChangeHandler,\n  onCompleteHandler,\n  onCropClick,\n  onCloseHandler,\n} from './handlers'\nimport { generateDefaultCrop } from './utils'\nimport { Crop, CompletedCrop, ImageCropperWithInputPropsWrapped } from './types'\nimport {\n  Button,\n  ButtonGroup,\n  CreateImageUploadModel,\n  ElFileInput,\n  ElFileInputHidden,\n  ElFileInputIconContainer,\n  ElFileInputWrap,\n  elMr4,\n  FlexContainer,\n  handleFileClear,\n  handleFileView,\n  handleSetNativeInput,\n  Icon,\n  ImageUploadModel,\n  Label,\n  SmallText,\n  Subtitle,\n} from '@reapit/elements'\nimport { v4 as uuid } from 'uuid'\n\nexport const handleFileChange =\n  (setFileName: Dispatch<SetStateAction<string>>, setVisible: Dispatch<SetStateAction<boolean>>) =>\n  (event: ChangeEvent<HTMLInputElement>) => {\n    if (event.target && event.target.files && event.target.files[0]) {\n      const file = event.target.files[0]\n\n      const reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = async () => {\n        const base64 = reader.result\n\n        if (base64 && typeof base64 === 'string') {\n          setFileName(base64)\n          setVisible(true)\n        }\n      }\n      reader.onerror = (error) => {\n        console.error(`file upload error: ${error}`)\n      }\n    }\n  }\n\nexport const handleFileCrop =\n  (\n    setFileName: Dispatch<SetStateAction<string>>,\n    croppedImage: string,\n    onFileUpload?: (uploadImageModel: CreateImageUploadModel) => Promise<ImageUploadModel>,\n  ) =>\n  () => {\n    const uploadFile = async () => {\n      const value =\n        onFileUpload &&\n        croppedImage &&\n        (await onFileUpload({\n          imageData: croppedImage,\n          name: uuid(),\n        }))\n\n      if (value && value.Url) {\n        setFileName(value.Url)\n      }\n    }\n\n    uploadFile().catch((error) => console.error(error))\n  }\n\nexport const ImageCropperFileInput: ImageCropperWithInputPropsWrapped = forwardRef(\n  (\n    { onFileView, onFileUpload, defaultValue, label, placeholderText, accept, id, aspect, resizeDimensions, ...rest },\n    ref: React.ForwardedRef<React.InputHTMLAttributes<HTMLInputElement>>,\n  ) => {\n    const [fileUrl, setFileName] = useState<string>(defaultValue ?? '')\n    const [visible, setVisible] = useState<boolean>(false)\n    const [croppedImage, setCroppedImage] = useState<string>('')\n    const defaultCrop: Crop = generateDefaultCrop(aspect)\n    const imgRef = useRef<HTMLImageElement>(null)\n    const previewCanvasRef = useRef<HTMLCanvasElement>(null)\n    const [crop, setCrop] = useState<Crop>(defaultCrop)\n    const [completedCrop, setCompletedCrop] = useState<CompletedCrop>(null)\n\n    const inputId = useMemo(() => {\n      if (id) return id\n      const randomId = uuid()\n      const isTest = window?.process?.env?.NODE_ENV === 'test'\n      return isTest ? 'test-static-id' : randomId\n    }, [id])\n\n    useEffect(drawCanvasAfterCrop({ completedCrop, previewCanvasRef, imgRef, resizeDimensions }), [completedCrop])\n\n    useEffect(handleFileCrop(setFileName, croppedImage, onFileUpload), [croppedImage])\n\n    useEffect(handleSetNativeInput(inputId, [fileUrl]), [fileUrl])\n\n    useEffect(() => {\n      if (defaultValue) {\n        setFileName(defaultValue)\n      }\n    }, [defaultValue])\n\n    const isImageCropped = Boolean(completedCrop?.width && completedCrop.height)\n\n    return (\n      <>\n        <ElFileInputWrap>\n          {label && <Label>{label}</Label>}\n          <FlexContainer isFlexAlignCenter>\n            <Button className={elMr4} type=\"button\" intent=\"default\">\n              {fileUrl ? 'Change' : 'Upload'}\n            </Button>\n            <ElFileInput accept={accept} type=\"file\" onChange={handleFileChange(setFileName, setVisible)} />\n            <ElFileInputHidden\n              id={inputId}\n              {...rest}\n              defaultValue={defaultValue}\n              ref={ref as LegacyRef<HTMLInputElement>}\n            />\n            {fileUrl ? (\n              <ElFileInputIconContainer>\n                {onFileView && (\n                  <Icon\n                    onClick={handleFileView(onFileView, fileUrl)}\n                    className={elMr4}\n                    intent=\"primary\"\n                    icon=\"view\"\n                    fontSize=\"1rem\"\n                  />\n                )}\n                <Icon\n                  onClick={handleFileClear(setFileName)}\n                  className={elMr4}\n                  intent=\"primary\"\n                  icon=\"close\"\n                  fontSize=\"1rem\"\n                />\n              </ElFileInputIconContainer>\n            ) : (\n              <SmallText hasGreyText hasNoMargin>\n                {placeholderText ?? 'Upload File'}\n              </SmallText>\n            )}\n          </FlexContainer>\n        </ElFileInputWrap>\n        {visible && (\n          <div className={cx(reactImageCropGlobalStyles, imageCropperOuter)}>\n            <div className={imageCropperInner}>\n              <div className={imageCropperContent}>\n                <div className={imageCropperCropPanelWrapper}>\n                  <Subtitle>Crop Image</Subtitle>\n                  <ReactCrop\n                    ruleOfThirds\n                    className={imageCropperCropPanel}\n                    src={fileUrl}\n                    onImageLoaded={onLoadHandler(imgRef)}\n                    crop={crop}\n                    onChange={onChangeHandler(setCrop)}\n                    onComplete={onCompleteHandler(setCompletedCrop)}\n                  />\n                </div>\n                <div className={imageCropperPreviewWrapper}>\n                  <Subtitle>Preview</Subtitle>\n                  {isImageCropped && <canvas ref={previewCanvasRef} className={imageCropperPreview} />}\n                </div>\n              </div>\n              <ButtonGroup alignment=\"right\">\n                <Button\n                  intent=\"default\"\n                  type=\"button\"\n                  onClick={onCloseHandler({ setVisible, setFileName, setCroppedImage })}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  intent=\"primary\"\n                  type=\"button\"\n                  disabled={!isImageCropped}\n                  onClick={onCropClickHandler({\n                    previewCanvasRef,\n                    completedCrop,\n                    onCropClick: onCropClick({ setCroppedImage, setVisible }),\n                  })}\n                >\n                  Crop\n                </Button>\n              </ButtonGroup>\n            </div>\n          </div>\n        )}\n      </>\n    )\n  },\n)\n","export const catchChunkError = (\n  fn: Function,\n  retriesLeft = 3,\n  interval = 500,\n): Promise<{ default: React.ComponentType<any> }> => {\n  return new Promise((resolve, reject) => {\n    fn()\n      .then(resolve)\n      .catch((error: Error) => {\n        // Ignore chunk cache error and retry to fetch, if cannot reload browser\n        console.info(error)\n        setTimeout(() => {\n          if (retriesLeft === 1) {\n            window.location.reload()\n            return\n          }\n          catchChunkError(fn, retriesLeft - 1, interval).then(resolve, reject)\n        }, interval)\n      })\n  })\n}\n","import React from 'react'\nimport { css } from '@linaria/core'\n\nconst okayWrapper = css`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: 100vh;\n`\n\nconst okayContent = css`\n  margin: 0 auto;\n`\n\nexport const OkayPage: React.FC = () => (\n  <div className={okayWrapper}>\n    <div className={okayContent}>\n      <h5 id=\"ok-content\">It&apos;s ok, everything&apos;s fine üëç</h5>\n    </div>\n  </div>\n)\n","import * as Sentry from '@sentry/react'\nimport { ReapitConnectSession } from '@reapit/connect-session'\n\n/**\n * Used to send custom logging message to Sentry\n */\nexport const logger = (error: Error, connectSession?: ReapitConnectSession | null) => {\n  if (process.env.NODE_ENV === 'production') {\n    Sentry.setContext('Error', {\n      message: error.message ?? 'No error message caputured',\n      page: window.location.href,\n      identity: connectSession?.loginIdentity ?? 'No Session Logged',\n      permissionGroups: connectSession?.loginIdentity.groups ?? [],\n      accessToken: connectSession?.accessToken ?? 'No Access Token Logged',\n      idToken: connectSession?.idToken ?? 'No Id Token Logged',\n    })\n    if (connectSession) {\n      Sentry.setUser({\n        email: connectSession?.loginIdentity.email ?? 'No email logged',\n        username: connectSession?.loginIdentity.name ?? 'No name logged',\n        id: connectSession?.loginIdentity.clientId ?? 'No client id logged',\n      })\n    }\n    Sentry.captureException(error)\n  } else {\n    console.error(error.message)\n  }\n}\n","export const GLOBAL_KEY = '__REAPIT_MARKETPLACE_GLOBALS__'\nexport const LOCALSTORAGE_KEY = '__REAPIT_MARKETPLACE_GLOBALS__'\n\n/**\n * If key is undefined, then return entire object,\n * else return value by key\n */\nexport const getMarketplaceGlobalsByKey = (key?: string) => {\n  if (!window || !window[GLOBAL_KEY]) {\n    return\n  }\n  if (key === undefined) {\n    return window[GLOBAL_KEY]\n  }\n  return window[GLOBAL_KEY][key]\n}\n\n/**\n * Used to set data into window.__REAPIT_MARKETPLACE_GLOBALS__ via localStorage and return that object,\n * Append to current existingObject and Overwrite if key is existed\n */\nexport const setMarketplaceGlobalsByKey = (\n  keyValueObject: { [key: string]: string } = {},\n): { [key: string]: string } | undefined => {\n  const existingObject = JSON.parse(window.localStorage.getItem(LOCALSTORAGE_KEY) as string)\n  const globalsObject =\n    typeof existingObject === 'object' && existingObject !== null\n      ? { ...existingObject, ...keyValueObject }\n      : { ...keyValueObject }\n  window.localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(globalsObject))\n  window[GLOBAL_KEY] = globalsObject\n  window.location.reload()\n  return globalsObject\n}\n\n/**\n * Used to clear localStorage and window globalsObject\n */\nexport const clearMarkeplaceGlobals = () => {\n  window.localStorage.removeItem(LOCALSTORAGE_KEY)\n\n  window[GLOBAL_KEY] = undefined\n  window.location.reload()\n  return true\n}\n\n/**\n * To check if localStorage has globalObject data\n * If has, restore it, otherwise, skip\n */\nexport const restoreGlobalObjectFromLS = (): { [key: string]: string } | boolean => {\n  const localStorageObject = JSON.parse(window.localStorage.getItem(LOCALSTORAGE_KEY) as string)\n  if (typeof localStorageObject === 'object' && localStorageObject !== null) {\n    const globalsObject = { ...localStorageObject }\n    window[GLOBAL_KEY] = globalsObject\n    console.log(`window.${GLOBAL_KEY} is set to`, JSON.parse(JSON.stringify(globalsObject)))\n    return globalsObject\n  }\n  // Clear storage if it's non-object\n  window.localStorage.removeItem(LOCALSTORAGE_KEY)\n  window[GLOBAL_KEY] = undefined\n  return false\n}\n\n/**\n * Used to inject window.desktopMode and window.webMode functions used to switch between mode\n * Call this before initializing state related to LoginMode\n * E.g. If you're using Redux, call this before initializing store,\n * If you're using React without Redux, call this in index.js\n */\nexport const injectSwitchModeToWindow = () => {\n  Object.defineProperty(window, 'desktopMode', {\n    value: setMarketplaceGlobalsByKey,\n  })\n  Object.defineProperty(window, 'webMode', {\n    value: clearMarkeplaceGlobals,\n  })\n  // Only restore if window[GLOBAL_KEY] is writable\n  // In REAL DESKTOP mode, window.__REAPIT_MARKETPLACE_GLOBALS__ writable is false\n  // and this function will not be executed\n  if (Object.getOwnPropertyDescriptor(window, GLOBAL_KEY)?.writable === false) {\n    return\n  }\n  restoreGlobalObjectFromLS()\n}\n","import { ReapitConnectBrowserSession } from '@reapit/connect-session'\nimport { AxiosError } from 'axios'\nimport qs from 'qs'\nimport { GetAction } from './get-actions'\nimport { UpdateAction } from './update-actions'\n\nexport const RC_SESSION_MISSING_ERROR =\n  'Missing valid Reapit Connect Session, please try logging in again if the problem persists'\nexport const NETWORK_ERROR = 'ERR_NETWORK'\n\nexport interface StringMap {\n  [key: string]: string\n}\n\nexport interface ReapitErrorField {\n  field?: string\n  message?: string\n}\n\nexport interface ReapitError {\n  statusCode?: number\n  errors?: ReapitErrorField[]\n  description?: string\n  dateTime?: string\n  message?: string\n  title?: string\n}\n\nexport const getMergedHeaders = async (\n  reapitConnectBrowserSession: ReapitConnectBrowserSession,\n  headers?: StringMap,\n): Promise<StringMap | null> => {\n  const connectSession = await reapitConnectBrowserSession.connectSession()\n  const accessToken = connectSession?.accessToken\n\n  return accessToken\n    ? {\n        Authorization: `Bearer ${accessToken}`,\n        'api-version': 'latest',\n        'Content-Type': 'application/json',\n        ...headers,\n      }\n    : null\n}\n\nexport const handleReapitError = (error: AxiosError<any>, defaultMessage?: string): string => {\n  const reapitError: ReapitError = error?.response?.data\n  const { description, title, message, errors } = reapitError ?? {}\n  const messageString = description\n    ? description\n    : title\n      ? title\n      : message\n        ? message\n        : error?.message\n          ? error.message\n          : defaultMessage\n            ? defaultMessage\n            : 'An unknown error has occurred, please refresh the page and try again.'\n  const fieldErrors = Array.isArray(errors) ? errors?.map(({ field, message }) => `\"${field}: ${message}\"`) : null\n  const fieldString = fieldErrors ? fieldErrors.join(', ') : ''\n\n  return `${messageString} ${fieldString}`\n}\n\nexport const getUrl = (action: GetAction | UpdateAction, queryParams?: Object, uriParams?: Object) => (): string => {\n  const { api, path } = action\n  const deSerialisedPath = uriParams\n    ? Object.keys(uriParams).reduce<string>((path, uriReplaceKey) => {\n        return path.replace(`{${uriReplaceKey}}`, uriParams[uriReplaceKey])\n      }, path)\n    : path\n  const query = qs.stringify(queryParams, { encode: false })\n  const url = `${api}${deSerialisedPath}${query ? `?${query}` : ''}`\n  return url\n}\n\n/** Util for useReapitGet queryParams to handle batch ids\n *\n * Problem: useReapitGet generates a query from an object so dupicate keys are not possible. The API sometimes requires\n * us to use multiple queries of the same key eg ?foo=bar&foo=baz&foo=bat\n *\n * This util takes a given list and outputs as a string that can be used as the value in a useReapitGet queryParams call\n * Usage: \n * \n  const [trafficEvents] = useReapitGet<TrafficEventsModel>({\n    reapitConnectBrowserSession,\n    action: getActions[GetActionNames.getTrafficStats],\n    queryParams: {\n      appId: listToBatchQuery<AppSummaryModel>(apps, 'id', 'appId')\n    },\n    fetchWhenTrue: [dateFrom, dateTo],\n  })\n\n   listToBatchQuery<AppSummaryModel>(apps, 'id', 'appId') === MOCK_ID1&appId=MOCK_ID2&appId=MOCK_ID3\n * \n */\n\nexport const listToBatchQuery = <ListType>(list: ListType[], listKey: keyof ListType, queryKey: string): string =>\n  list.reduce((query: string, nextItem: ListType, index: number) => {\n    const listValue = String(nextItem[listKey])\n    if (!index) {\n      return listValue\n    }\n    return `${query}&${queryKey}=${listValue}`\n  }, '')\n\n// Same principle for this function but where your list is an array of strings or numbers\nexport const stringListToBatchQuery = (list: (string | number)[], queryKey: string): string =>\n  list.reduce((query: string, nextItem: string | number, index: number) => {\n    if (!index) {\n      return String(nextItem)\n    }\n    return `${query}&${queryKey}=${nextItem}`\n  }, '')\n\n// And again where you have an object of filters with a mixture of arrays and strings / boolean / numeric values and\n// you need a string map returned for useReapitGet\nexport const objectToQuery = <QueryObjectType extends {}>(queryObject: QueryObjectType): StringMap =>\n  Object.keys(queryObject).reduce((currentQuery: StringMap, nextItem: string) => {\n    const objectItem = queryObject[nextItem]\n\n    if (Array.isArray(objectItem)) {\n      currentQuery[nextItem] = stringListToBatchQuery(objectItem, nextItem)\n    } else if (objectItem) {\n      currentQuery[nextItem] = String(objectItem)\n    }\n\n    return currentQuery\n  }, {} as StringMap)\n","import { useMemo } from 'react'\nimport { ReapitConnectBrowserSession } from '@reapit/connect-session'\nimport {\n  StringMap,\n  getMergedHeaders,\n  handleReapitError,\n  getUrl,\n  RC_SESSION_MISSING_ERROR,\n  NETWORK_ERROR,\n} from './utils'\nimport { GetAction } from './get-actions'\nimport { useSnack } from '@reapit/elements'\nimport { useQuery, useQueryClient, UseQueryOptions } from '@tanstack/react-query'\nimport axios, { AxiosError } from 'axios'\nimport { logger } from '@reapit/utils-react'\nimport { useNavigate } from 'react-router-dom'\n\nexport type ReapitGetState<DataType> = [\n  data: DataType | null,\n  loading: boolean,\n  error: string | null,\n  refresh: (queryParams?: Object) => void,\n  refreshing: boolean,\n  clearCache: () => void,\n]\n\nexport interface ReapitGetParams extends Pick<UseQueryOptions, 'refetchOnWindowFocus' | 'retry'> {\n  reapitConnectBrowserSession: ReapitConnectBrowserSession\n  action: GetAction\n  queryParams?: Object\n  uriParams?: Object\n  headers?: StringMap\n  fetchWhenTrue?: any[]\n  withCredentials?: boolean\n  onSuccess?: (message: string) => void\n  onError?: (message: string) => void\n}\n\nexport const useReapitGet = <DataType>({\n  reapitConnectBrowserSession,\n  action,\n  queryParams,\n  uriParams,\n  headers,\n  fetchWhenTrue,\n  onSuccess,\n  onError,\n  refetchOnWindowFocus,\n  retry,\n  withCredentials,\n}: ReapitGetParams): ReapitGetState<DataType> => {\n  const { success: successSnack, error: errorSnack } = useSnack()\n  const queryClient = useQueryClient()\n  const navigate = useNavigate()\n  const { successMessage, errorMessage } = action\n  const url = useMemo(getUrl(action, queryParams, uriParams), [queryParams, uriParams, action])\n  const isEnabled = fetchWhenTrue?.length\n    ? Boolean(fetchWhenTrue?.filter(Boolean).length === fetchWhenTrue.length)\n    : true\n\n  const { data, error, isLoading, isRefetching, refetch } = useQuery<DataType, AxiosError<any>>([url], {\n    queryFn: async () => {\n      const reqHeaders = await getMergedHeaders(reapitConnectBrowserSession, headers)\n\n      if (!reqHeaders) throw new Error('Missing valid Reapit Connect Session, please try logging in again.')\n\n      const req = await axios.get<DataType>(url, {\n        headers: reqHeaders,\n        withCredentials,\n      })\n      return req.data\n    },\n    onSuccess: () => {\n      if (onSuccess && successMessage) onSuccess(successMessage)\n      if (!onSuccess && successMessage) successSnack(successMessage)\n    },\n    onError: async (error) => {\n      const connectSession = await reapitConnectBrowserSession.connectSession()\n      const isRcError = error.message === RC_SESSION_MISSING_ERROR\n      const isFourOOne = error.code === NETWORK_ERROR\n\n      if (isRcError || isFourOOne || !connectSession) {\n        return navigate('/login')\n      }\n\n      const errorString = handleReapitError(error, errorMessage)\n\n      if (onError) onError(errorString)\n      if (!onError) {\n        errorSnack(errorString)\n        logger(new Error(errorString), connectSession)\n      }\n    },\n    retry: retry ? retry : 1,\n    refetchOnWindowFocus: Boolean(refetchOnWindowFocus),\n    enabled: isEnabled,\n  })\n\n  const result = data ? data : null\n  const errorString = error ? handleReapitError(error, errorMessage) : null\n  const loading = isEnabled && isLoading\n  const clearCache = () => {\n    queryClient.removeQueries({ queryKey: [url] })\n  }\n\n  return [result, loading, errorString, refetch, isRefetching, clearCache]\n}\n","type APIRegion = 'uk' | 'anz'\ntype MappedAPIConfig = {\n  region: APIRegion\n}\ntype DomainMap = Record<string, MappedAPIConfig>\n\nconst isMappedApiConfig = (obj: any): obj is MappedAPIConfig => {\n  return obj.region && (obj.region === 'uk' || obj.region === 'anz')\n}\nconst getRegion = (): APIRegion => {\n  if (process.env.domainMappings) {\n    const config: DomainMap = JSON.parse(process.env.domainMappings)\n    const domainConfig = config[window.location.hostname]\n    if (isMappedApiConfig(domainConfig)) {\n      return domainConfig.region\n    }\n  }\n  return 'uk'\n}\n\nconst region = getRegion()\nconst isDev = process.env.appEnv !== 'production'\n\nexport const getPlatformApiUrl = () => {\n  if (region === 'anz') {\n    if (isDev) {\n      return 'https://platform.au.dev.rc.reapit.cloud'\n    } else {\n      return 'https://platform.au.rc.reapit.cloud'\n    }\n  }\n\n  if (isDev) {\n    return 'https://platform.dev.paas.reapit.cloud'\n  } else {\n    return 'https://platform.reapit.cloud'\n  }\n}\n","import { ApiNames, PathNames } from './api-constants'\n\nexport interface GetAction {\n  api: string\n  path: PathNames\n  errorMessage?: string\n  successMessage?: string\n}\n\nexport enum GetActionNames {\n  getApps = 'getApps',\n  getPipeline = 'getPipeline',\n  paginatePipeline = 'paginatePipeline',\n  getPipelineDeployments = 'getPipelineDeployments',\n  getProducts = 'getProducts',\n  getSandboxes = 'getSandboxes',\n  getAppPermissions = 'getAppPermissions',\n  getApiKeysByUserId = 'getApiKeysByUserId',\n  getMember = 'getMember',\n  deleteApiKey = 'deleteApiKey',\n  getBillingDataByMonth = 'getBillingDataByMonth',\n  getBillingDataByPeriod = 'getBillingDataByPeriod',\n  getInstallations = 'getInstallations',\n  getDeveloperMembers = 'getDeveloperMembers',\n  getCustomersById = 'getCustomersById',\n  getAppById = 'getAppById',\n  getAppSecret = 'getAppSecret',\n  getDesktopIntegrationTypes = 'getDesktopIntegrationTypes',\n  getAppCategories = 'getAppCategories',\n  getAppRevisions = 'getAppRevisions',\n  getDeveloper = 'getDeveloper',\n  getTrafficStats = 'getTrafficStats',\n  getSubscriptions = 'getSubscriptions',\n  getWebhookSubscriptions = 'getWebhookSubscriptions',\n  getWebhookTopics = 'getWebhookTopics',\n  getWebhookLogs = 'getWebhookLogs',\n  getPipelineEnvironment = 'getPipelineEnvironment',\n  getPublicWebhookKey = 'getPublicWebhookKey',\n  getRevisionConsents = 'getRevisionConsents',\n  getAppMarketAdmin = 'getAppMarketAdmin',\n  getAppMarketAdminLive = 'getAppMarketAdminLive',\n  postAppMarketAdmin = 'postAppMarketAdmin',\n  getPropertyById = 'getPropertyById',\n  getProperties = 'getProperties',\n  getPayments = 'getPayments',\n  getPaymentById = 'getPaymentById',\n  getPaymentWithPropertyById = 'getPaymentWithPropertyById',\n  getUserInfo = 'getUserInfo',\n  getUserById = 'getUserById',\n  getCustomers = 'getCustomers',\n  getDevelopers = 'getDevelopers',\n  getApprovals = 'getApprovals',\n  getRevisionById = 'getRevisionById',\n  getDwAccounts = 'getDwAccounts',\n  getDwAccountById = 'getDwAccountById',\n  getDwDataSets = 'getDwDataSets',\n  getDwShares = 'getDwShares',\n  getUsers = 'getUsers',\n  getUserAuthenticators = 'getUserAuthenticators',\n  getReferralTypes = 'getReferralTypes',\n  getGroupsByOrgId = 'getGroupsByOrgId',\n  getPaymentsClientConfig = 'getPaymentsClientConfig',\n  getUserGroups = 'getUserGroups',\n  getUserSuppressionList = 'getUserSuppressionList',\n  getOrgs = 'getOrgs',\n  getOrgConfig = 'getOrgConfig',\n}\n\nexport type GetActions = { [key in GetActionNames]: GetAction }\n\nexport const getActions = {\n  [GetActionNames.getApps]: {\n    api: ApiNames.platform,\n    path: PathNames.apps,\n    errorMessage: 'Something went wrong fetching apps - this error has been logged',\n  },\n  [GetActionNames.getDwAccounts]: {\n    api: ApiNames.platform,\n    path: PathNames.dwAccounts,\n    errorMessage: 'Something went wrong fetching accounts - this error has been logged',\n  },\n  [GetActionNames.getDwDataSets]: {\n    api: ApiNames.platform,\n    path: PathNames.dwDataSets,\n    errorMessage: 'Something went wrong fetching data sets - this error has been logged',\n  },\n  [GetActionNames.getDwShares]: {\n    api: ApiNames.platform,\n    path: PathNames.dwShares,\n    errorMessage: 'Something went wrong fetching shares - this error has been logged',\n  },\n  [GetActionNames.getDwAccountById]: {\n    api: ApiNames.platform,\n    path: PathNames.dwAccountsId,\n    errorMessage: 'Something went wrong fetching account - this error has been logged',\n  },\n  [GetActionNames.getAppMarketAdmin]: {\n    api: ApiNames.appMarketCms,\n    path: PathNames.cmsConfig,\n    errorMessage: 'Something went wrong fetching config - this error has been logged',\n  },\n  [GetActionNames.getAppMarketAdminLive]: {\n    api: ApiNames.appMarketCms,\n    path: PathNames.cmsConfigLive,\n    errorMessage: 'Something went wrong fetching config - this error has been logged',\n  },\n  [GetActionNames.postAppMarketAdmin]: {\n    api: ApiNames.appMarketCms,\n    path: PathNames.cmsConfigPost,\n    errorMessage: 'Something went wrong updating config - this error has been logged',\n  },\n  [GetActionNames.getAppById]: {\n    api: ApiNames.platform,\n    path: PathNames.appsId,\n    errorMessage: 'Something went wrong fetching app details',\n  },\n  [GetActionNames.getPipeline]: {\n    api: ApiNames.pipeline,\n    path: PathNames.getPipeline,\n  },\n  [GetActionNames.getPipelineDeployments]: {\n    api: ApiNames.pipeline,\n    path: PathNames.getPipelineDeployments,\n  },\n  [GetActionNames.getProducts]: {\n    api: ApiNames.platform,\n    path: PathNames.products,\n    errorMessage: 'Something went wrong fetching products',\n  },\n  [GetActionNames.getSandboxes]: {\n    api: ApiNames.platform,\n    path: PathNames.sandboxes,\n    errorMessage: 'Something went wrong fetching sandboxes',\n  },\n  [GetActionNames.getAppPermissions]: {\n    api: ApiNames.platform,\n    path: PathNames.appPermissions,\n    errorMessage: 'Something went wrong fetching app permissions',\n  },\n  [GetActionNames.getApiKeysByUserId]: {\n    api: ApiNames.apiKey,\n    path: PathNames.getApiKeyByUserId,\n  },\n  [GetActionNames.getMember]: {\n    api: ApiNames.platform,\n    path: PathNames.getMember,\n  },\n  [GetActionNames.deleteApiKey]: {\n    api: ApiNames.apiKey,\n    path: PathNames.deleteApiKey,\n  },\n  [GetActionNames.getBillingDataByMonth]: {\n    api: ApiNames.platform,\n    path: PathNames.billingDataByMonth,\n    errorMessage: 'Something went wrong fetching billing data',\n  },\n  [GetActionNames.getBillingDataByPeriod]: {\n    api: ApiNames.platform,\n    path: PathNames.getBillingDataByPeriod,\n    errorMessage: 'Something went wrong fetching billing data',\n  },\n  [GetActionNames.getInstallations]: {\n    api: ApiNames.platform,\n    path: PathNames.installations,\n    errorMessage: 'Something went wrong fetching installations',\n  },\n  [GetActionNames.getDeveloperMembers]: {\n    api: ApiNames.platform,\n    path: PathNames.getMember,\n    errorMessage: 'Something went wrong fetching developer org members',\n  },\n  [GetActionNames.getDeveloper]: {\n    api: ApiNames.platform,\n    path: PathNames.developerById,\n    errorMessage: 'Something went wrong fetching developer org',\n  },\n  [GetActionNames.getCustomersById]: {\n    api: ApiNames.platform,\n    path: PathNames.customersById,\n    errorMessage: 'Something went wrong fetching your customer information',\n  },\n  [GetActionNames.getAppSecret]: {\n    api: ApiNames.platform,\n    path: PathNames.appSecretById,\n    errorMessage: 'Something went wrong fetching your client secret',\n  },\n  [GetActionNames.getDesktopIntegrationTypes]: {\n    api: ApiNames.platform,\n    path: PathNames.desktopIntegrationTypes,\n    errorMessage: 'Something went wrong fetching the desktop integration options',\n  },\n  [GetActionNames.getAppCategories]: {\n    api: ApiNames.platform,\n    path: PathNames.appCategories,\n    errorMessage: 'Something went wrong fetching the category options',\n  },\n  [GetActionNames.getAppRevisions]: {\n    api: ApiNames.platform,\n    path: PathNames.appRevisions,\n    errorMessage: 'Something went wrong fetching app revisions',\n  },\n  [GetActionNames.paginatePipeline]: {\n    api: ApiNames.pipeline,\n    path: PathNames.paginatePipeline,\n    errorMessage: 'Something went wrong fetching pipelines',\n  },\n  [GetActionNames.getTrafficStats]: {\n    api: ApiNames.platform,\n    path: PathNames.trafficStatistics,\n    errorMessage: 'Something went wrong fetching API calls data',\n  },\n  [GetActionNames.getSubscriptions]: {\n    api: ApiNames.platform,\n    path: PathNames.subscriptions,\n    errorMessage: 'Something went wrong fetching subscriptions',\n  },\n  [GetActionNames.getWebhookSubscriptions]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookSubscriptions,\n    errorMessage: 'Something went wrong fetching webhook subscriptions',\n  },\n  [GetActionNames.getWebhookTopics]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookTopics,\n    errorMessage: 'Something went wrong fetching webhook topics',\n  },\n  [GetActionNames.getWebhookLogs]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookLogs,\n    errorMessage: 'Something went wrong fetching webhook logs',\n  },\n  [GetActionNames.getPipelineEnvironment]: {\n    api: ApiNames.pipeline,\n    path: PathNames.getPipelineEnvironment,\n  },\n  [GetActionNames.getPublicWebhookKey]: {\n    api: ApiNames.platform,\n    path: PathNames.publicWebhookKey,\n  },\n  [GetActionNames.getRevisionConsents]: {\n    api: ApiNames.platform,\n    path: PathNames.appConsents,\n    errorMessage: 'Failed to fetch app revision consents',\n  },\n  [GetActionNames.getPropertyById]: {\n    api: ApiNames.platform,\n    path: PathNames.propertyById,\n    errorMessage: 'Failed to fetch property, this has been logged. Please try refreshing the page.',\n  },\n  [GetActionNames.getProperties]: {\n    api: ApiNames.platform,\n    path: PathNames.properties,\n    errorMessage: 'Failed to fetch properties, this has been logged. Please try refreshing the page.',\n  },\n  [GetActionNames.getPayments]: {\n    api: ApiNames.platform,\n    path: PathNames.payments,\n    errorMessage: 'Failed to fetch payments, this has been logged. Please try refreshing the page.',\n  },\n  [GetActionNames.getPaymentById]: {\n    api: ApiNames.platform,\n    path: PathNames.paymentById,\n    errorMessage: 'Failed to fetch payment, this has been logged. Please try refreshing the page.',\n  },\n  [GetActionNames.getPaymentWithPropertyById]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentById,\n    errorMessage: 'Failed to fetch payment, this has been logged. Please try refreshing the page.',\n  },\n  [GetActionNames.getUserInfo]: {\n    api: ApiNames.platform,\n    path: PathNames.userInfo,\n    errorMessage: 'Failed to fetch user info, this has been logged.',\n  },\n  [GetActionNames.getUserById]: {\n    api: ApiNames.platform,\n    path: PathNames.userById,\n    errorMessage: 'Failed to fetch user info, this has been logged.',\n  },\n  [GetActionNames.getCustomers]: {\n    api: ApiNames.platform,\n    path: PathNames.customers,\n    errorMessage: 'Failed to fetch customers, this has been logged.',\n  },\n  [GetActionNames.getDevelopers]: {\n    api: ApiNames.platform,\n    path: PathNames.developers,\n    errorMessage: 'Failed to fetch developers, this has been logged.',\n  },\n  [GetActionNames.getApprovals]: {\n    api: ApiNames.platform,\n    path: PathNames.approvals,\n    errorMessage: 'Failed to fetch approvals, this has been logged.',\n  },\n  [GetActionNames.getRevisionById]: {\n    api: ApiNames.platform,\n    path: PathNames.revisionById,\n    errorMessage: 'Failed to fetch revision, this has been logged.',\n  },\n  [GetActionNames.getUsers]: {\n    api: ApiNames.platform,\n    path: PathNames.users,\n    errorMessage: 'Failed to fetch users, this has been logged.',\n  },\n  [GetActionNames.getUserAuthenticators]: {\n    api: ApiNames.platform,\n    path: PathNames.userAuthenticators,\n    errorMessage: 'Failed to fetch authenticators, this has been logged.',\n  },\n  [GetActionNames.getReferralTypes]: {\n    api: ApiNames.platform,\n    path: PathNames.referralTypes,\n    errorMessage: 'Failed to fetch referrals, this has been logged.',\n  },\n  [GetActionNames.getGroupsByOrgId]: {\n    api: ApiNames.platform,\n    path: PathNames.orgGroups,\n    errorMessage: 'Failed to fetch groups, this has been logged.',\n  },\n  [GetActionNames.getPaymentsClientConfig]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentsConfigPrivate,\n    errorMessage: 'Failed to fetch client config this has been logged.',\n  },\n  [GetActionNames.getUserGroups]: {\n    api: ApiNames.platform,\n    path: PathNames.userGroups,\n    errorMessage: 'Failed to fetch groups, this has been logged.',\n  },\n  [GetActionNames.getUserSuppressionList]: {\n    api: ApiNames.platform,\n    path: PathNames.userEmailSuppressions,\n    errorMessage: 'Failed to fetch email suppression list, this has been logged.',\n  },\n  [GetActionNames.getOrgs]: {\n    api: ApiNames.platform,\n    path: PathNames.orgs,\n    errorMessage: 'Failed to fetch orgs list, this has been logged.',\n  },\n  [GetActionNames.getOrgConfig]: {\n    api: ApiNames.platform,\n    path: PathNames.getOrgConfig,\n    errorMessage: 'Failed to fetch org config, this has been logged.',\n  },\n}\n","import { ApiNames, PathNames } from './api-constants'\n\nexport interface UpdateAction {\n  api: string\n  path: PathNames\n  errorMessage?: string\n  successMessage?: string\n}\n\nexport enum UpdateActionNames {\n  updatePipeline = 'updatePipeline',\n  createPipelineDeployment = 'createPipelineDeployment',\n  createPipeline = 'createPipeline',\n  createApp = 'createApp',\n  createApiKeyByMember = 'createApiKeyByMember',\n  updateDeveloper = 'updateDeveloper',\n  deleteDeveloper = 'deleteDeveloper',\n  updateCustomer = 'updateCustomer',\n  createDeveloper = 'createDeveloper',\n  deleteApp = 'deleteApp',\n  createAppRevsion = 'createAppRevsion',\n  deleteOfficeGroup = 'deleteOfficeGroup',\n  deletePipeline = 'deletePipeline',\n  fileUpload = 'fileUpload',\n  terminateInstallation = 'terminateInstallation',\n  cancelRevision = 'cancelRevision',\n  updateMember = 'updateMember',\n  deleteMember = 'deleteMember',\n  inviteMember = 'inviteMember',\n  deleteSubscription = 'deleteSubscription',\n  createSubscription = 'createSubscription',\n  pingWebhook = 'pingWebhook',\n  createWebhook = 'createWebhook',\n  updateWebhook = 'updateWebhook',\n  deleteWebhook = 'deleteWebhook',\n  acceptInviteMember = 'acceptInviteMember',\n  rejectInviteMember = 'rejectInviteMember',\n  upsertPipelineEnvironment = 'upsertPipelineEnvironment',\n  createConsentEmails = 'createConsentEmails',\n  resendConsentEmail = 'resendConsentEmail',\n  approveConsent = 'approveConsent',\n  installApp = 'installApp',\n  appConsentApproveEmail = 'appConsentApproveEmail',\n  updateUser = 'updateUser',\n  featureApp = 'featureApp',\n  unFeatureApp = 'unFeatureApp',\n  approveRevision = 'approveRevision',\n  rejectRevision = 'rejectRevision',\n  createDwAccount = 'createDwAccount',\n  updateDwAccount = 'updateDwAccount',\n  deleteDwAccount = 'deleteDwAccount',\n  createDwRequest = 'createDwRequest',\n  deleteDwShare = 'deleteDwShare',\n  refreshDwShare = 'refreshDwShare',\n  createUserAuthenticator = 'createUserAuthenticator',\n  verifyUserAuthenticator = 'verifyUserAuthenticator',\n  deleteUserAuthenticator = 'deleteUserAuthenticator',\n  submitPrivatePaymentReceipt = 'submitPrivatePaymentReceipt',\n  privatePaymentUpdate = 'privatePaymentUpdate',\n  paymentsSessionCreate = 'paymentsSessionCreate',\n  paymentRequestCreate = 'paymentRequestCreate',\n  paymentsClientConfigCreate = 'paymentsClientConfigCreate',\n  paymentsClientConfigUpdate = 'paymentsClientConfigUpdate',\n  paymentsClientConfigDelete = 'paymentsClientConfigDelete',\n  getOpayoMerchantKey = 'getOpayoMerchantKey',\n  submitOpayoTransaction = 'submitOpayoTransaction',\n  createAuthClient = 'createAuthClient',\n  deleteAuthClient = 'deleteAuthClient',\n  deleteUserPassword = 'deleteUserPassword',\n  deleteUserSuppressionList = 'deleteUserSuppressionList',\n  removeMemberFromGroup = 'removeMemberFromGroup',\n  addMemberToGroup = 'addMemberToGroup',\n  updatePlatformConfig = 'updatePlatformConfig',\n  updateApp = 'updateApp',\n  updateInstallation = 'updateInstallation',\n}\n\nexport type UpdateActions = { [key in UpdateActionNames]: UpdateAction }\n\nexport const updateActions = {\n  [UpdateActionNames.updatePipeline]: {\n    api: ApiNames.pipeline,\n    path: PathNames.updatePipeline,\n    errorMessage:\n      'Something went wrong updating your pipleline, this has been logged. Please check for errors and resubmit.',\n    successMessage: 'Your pipeline has been successfully updated',\n  },\n  [UpdateActionNames.createPipeline]: {\n    api: ApiNames.pipeline,\n    path: PathNames.createPipeline,\n    errorMessage:\n      'Something went wrong creating your pipleline, this has been logged. Please check for errors and resubmit.',\n    successMessage: 'Your pipeline has been successfully created',\n  },\n  [UpdateActionNames.createPipelineDeployment]: {\n    api: ApiNames.pipeline,\n    path: PathNames.createPipelineDeployments,\n  },\n  [UpdateActionNames.createApp]: {\n    api: ApiNames.platform,\n    path: PathNames.apps,\n    errorMessage: 'Something went wrong creating your app, please check for errors and resubmit.',\n    successMessage: 'Your app has been successfully created',\n  },\n  [UpdateActionNames.deleteApp]: {\n    api: ApiNames.platform,\n    path: PathNames.appsId,\n    errorMessage: 'Something went wrong deleting your app, please try again.',\n    successMessage: 'Your app has been successfully deleted',\n  },\n  [UpdateActionNames.createApiKeyByMember]: {\n    api: ApiNames.apiKey,\n    path: PathNames.createApiKeyByMember,\n  },\n  [UpdateActionNames.updateDeveloper]: {\n    api: ApiNames.platform,\n    path: PathNames.developerById,\n    errorMessage: 'Developer update failed, please check for errors and try again.',\n    successMessage: 'Your developer record has been successfully updated',\n  },\n  [UpdateActionNames.deleteDeveloper]: {\n    api: ApiNames.platform,\n    path: PathNames.developerById,\n    errorMessage: 'Developer delete failed, please check for errors and try again.',\n    successMessage: 'Developer successfully deleted',\n  },\n  [UpdateActionNames.updateCustomer]: {\n    api: ApiNames.platform,\n    path: PathNames.customersById,\n    errorMessage: 'Update to terms failed, please try again',\n  },\n  [UpdateActionNames.createDeveloper]: {\n    api: ApiNames.platform,\n    path: PathNames.developers,\n    errorMessage: 'Failed to create developer organisation, please try again',\n    successMessage: 'Your developer account has been successfully created',\n  },\n  [UpdateActionNames.createAppRevsion]: {\n    api: ApiNames.platform,\n    path: PathNames.appRevision,\n    errorMessage: 'Failed to create an app revision, please check for errors and try again',\n    successMessage: 'App revision created successfully',\n  },\n  [UpdateActionNames.deleteOfficeGroup]: {\n    api: ApiNames.platform,\n    path: PathNames.officeGroupId,\n    errorMessage: 'Failed to delete this office group, please try again',\n    successMessage: 'Successfully deleted office group',\n  },\n  [UpdateActionNames.deletePipeline]: {\n    api: ApiNames.pipeline,\n    path: PathNames.getPipeline,\n    errorMessage: 'Failed to delete Pipeline',\n    successMessage: 'Pipeline deleting',\n  },\n  [UpdateActionNames.fileUpload]: {\n    api: ApiNames.platform,\n    path: PathNames.fileUpload,\n    errorMessage: 'Failed to upload one of your files',\n  },\n  [UpdateActionNames.terminateInstallation]: {\n    api: ApiNames.platform,\n    path: PathNames.terminateInstallation,\n    errorMessage: 'Failed to uninstall your app',\n    successMessage: 'App successfully uninstalled',\n  },\n  [UpdateActionNames.cancelRevision]: {\n    api: ApiNames.platform,\n    path: PathNames.cancelRevision,\n    errorMessage: 'Failed to cancel pending revision',\n    successMessage: 'Successfully cancelled pending revision',\n  },\n  [UpdateActionNames.updateMember]: {\n    api: ApiNames.platform,\n    path: PathNames.memberById,\n    errorMessage: 'Failed to update developer organisation member',\n    successMessage: 'Successfully updated developer organisation member',\n  },\n  [UpdateActionNames.deleteMember]: {\n    api: ApiNames.platform,\n    path: PathNames.memberById,\n    errorMessage: 'Failed to delete developer organisation member',\n    successMessage: 'Successfully developer developer organisation member',\n  },\n  [UpdateActionNames.inviteMember]: {\n    api: ApiNames.platform,\n    path: PathNames.getMember,\n    errorMessage: 'Failed to invite member, this has been logged. Please try again.',\n    successMessage: 'Successfully invited developer organisation member',\n  },\n  [UpdateActionNames.deleteSubscription]: {\n    api: ApiNames.platform,\n    path: PathNames.subscriptionsById,\n    errorMessage: 'Failed to cancel subscription, this has been logged. Please try again.',\n    successMessage: 'Successfully cancelled subscription',\n  },\n  [UpdateActionNames.createSubscription]: {\n    api: ApiNames.platform,\n    path: PathNames.subscriptions,\n    errorMessage: 'Failed to create subscription, this has been logged. Please try again.',\n    successMessage: 'Successfully created subscription',\n  },\n  [UpdateActionNames.pingWebhook]: {\n    api: ApiNames.platform,\n    path: PathNames.webhooksPing,\n    errorMessage: 'Failed to ping webhook, this has been logged. Please try again.',\n    successMessage: 'Successfully pinged webhook',\n  },\n  [UpdateActionNames.createWebhook]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookSubscriptions,\n    errorMessage: 'Failed to create webhook, this has been logged. Please try again.',\n    successMessage: 'Successfully created webhook',\n  },\n  [UpdateActionNames.updateWebhook]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookSubscriptionsId,\n    errorMessage: 'Failed to update webhook, this has been logged. Please try again.',\n    successMessage: 'Successfully updated webhook',\n  },\n  [UpdateActionNames.deleteWebhook]: {\n    api: ApiNames.platform,\n    path: PathNames.webhookSubscriptionsId,\n    errorMessage: 'Failed to delete webhook, this has been logged. Please try again.',\n    successMessage: 'Successfully deleted webhook',\n  },\n  [UpdateActionNames.acceptInviteMember]: {\n    api: ApiNames.platform,\n    path: PathNames.memberInviteAccept,\n    errorMessage: 'Failed to accept invite, this has been logged. Please try again.',\n    successMessage: 'Successfully accepted invite',\n  },\n  [UpdateActionNames.rejectInviteMember]: {\n    api: ApiNames.platform,\n    path: PathNames.memberInviteReject,\n    errorMessage: 'Failed to reject invite, this has been logged. Please try again.',\n    successMessage: 'Successfully rejected invite',\n  },\n  [UpdateActionNames.upsertPipelineEnvironment]: {\n    api: ApiNames.pipeline,\n    path: PathNames.upsertPipelineEnvironment,\n    successMessage: 'Added Environment variable',\n    errorMessage: 'Failed to add Environment variable',\n  },\n  [UpdateActionNames.createConsentEmails]: {\n    api: ApiNames.platform,\n    path: PathNames.appConsents,\n    successMessage: 'Sent consent request emails',\n    errorMessage: 'Failed to send consent request emails',\n  },\n  [UpdateActionNames.resendConsentEmail]: {\n    api: ApiNames.platform,\n    path: PathNames.appConsentResend,\n    successMessage: 'Resent consent request email',\n    errorMessage: 'Failed to resense consent request email',\n  },\n  [UpdateActionNames.approveConsent]: {\n    api: ApiNames.platform,\n    path: PathNames.appConsentApprove,\n    successMessage: 'App permission change request accepted',\n    errorMessage: 'Failed to accept app permission change, this has been logged. Please try again.',\n  },\n  [UpdateActionNames.installApp]: {\n    api: ApiNames.platform,\n    path: PathNames.installations,\n    successMessage: 'Successfully installed app',\n    errorMessage: 'Failed to install app, this has been logged. Please try again.',\n  },\n  [UpdateActionNames.appConsentApproveEmail]: {\n    api: ApiNames.platform,\n    path: PathNames.appConsentApproveEmail,\n    successMessage: 'Successfully sent email',\n    errorMessage: 'Failed to send to new email address. Please try again',\n  },\n  [UpdateActionNames.updateUser]: {\n    api: ApiNames.platform,\n    path: PathNames.userById,\n    successMessage: 'Successfully updated user info.',\n    errorMessage: 'Failed to update user info.',\n  },\n  [UpdateActionNames.featureApp]: {\n    api: ApiNames.platform,\n    path: PathNames.appByIdFeature,\n    successMessage: 'Successfully updated app.',\n    errorMessage: 'Failed to update app.',\n  },\n  [UpdateActionNames.unFeatureApp]: {\n    api: ApiNames.platform,\n    path: PathNames.appByIdFeature,\n    successMessage: 'Successfully updated app.',\n    errorMessage: 'Failed to update app.',\n  },\n  [UpdateActionNames.approveRevision]: {\n    api: ApiNames.platform,\n    path: PathNames.revisionApprove,\n    successMessage: 'Successfully approved revision.',\n    errorMessage: 'Failed to approve revision.',\n  },\n  [UpdateActionNames.rejectRevision]: {\n    api: ApiNames.platform,\n    path: PathNames.revisionReject,\n    successMessage: 'Successfully rejected revision.',\n    errorMessage: 'Failed to reject revision.',\n  },\n  [UpdateActionNames.createDwAccount]: {\n    api: ApiNames.platform,\n    path: PathNames.dwAccounts,\n    successMessage: 'Successfully created account.',\n    errorMessage: 'Failed to create account.',\n  },\n  [UpdateActionNames.updateDwAccount]: {\n    api: ApiNames.platform,\n    path: PathNames.dwAccountsId,\n    successMessage: 'Successfully updated account.',\n    errorMessage: 'Failed to update account.',\n  },\n  [UpdateActionNames.deleteDwAccount]: {\n    api: ApiNames.platform,\n    path: PathNames.dwAccountsId,\n    successMessage: 'Successfully deleted account.',\n    errorMessage: 'Failed to delete account.',\n  },\n  [UpdateActionNames.createDwRequest]: {\n    api: ApiNames.platform,\n    path: PathNames.dwRequests,\n    successMessage: 'Successfully created data share.',\n    errorMessage: 'Failed to create data share.',\n  },\n  [UpdateActionNames.deleteDwShare]: {\n    api: ApiNames.platform,\n    path: PathNames.dwSharesId,\n    successMessage: 'Successfully deleted data share.',\n    errorMessage: 'Failed to delete data share.',\n  },\n  [UpdateActionNames.refreshDwShare]: {\n    api: ApiNames.platform,\n    path: PathNames.dwShareRefresh,\n    successMessage: 'Successfully refreshed data share.',\n    errorMessage: 'Failed to refresh data share.',\n  },\n  [UpdateActionNames.createUserAuthenticator]: {\n    api: ApiNames.platform,\n    path: PathNames.userAuthenticators,\n    successMessage: 'Successfully fetched QR code.',\n    errorMessage: 'Failed to fetch QR code. This error has been logged',\n  },\n  [UpdateActionNames.deleteUserAuthenticator]: {\n    api: ApiNames.platform,\n    path: PathNames.userAuthenticatorById,\n    successMessage: 'Successfully reset authenticator.',\n    errorMessage: 'Failed to reset authenticator. This error has been logged',\n  },\n  [UpdateActionNames.verifyUserAuthenticator]: {\n    api: ApiNames.platform,\n    path: PathNames.userAuthenticatorVerify,\n    successMessage: 'Successfully verified authenticator.',\n    errorMessage: 'Failed to verify authenticator. This error has been logged',\n  },\n  [UpdateActionNames.submitPrivatePaymentReceipt]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentReceiptPrivate,\n    successMessage: 'Successfully sent receipt request.',\n    errorMessage: 'Failed to send receipt. This error has been logged',\n  },\n  [UpdateActionNames.privatePaymentUpdate]: {\n    api: ApiNames.platform,\n    path: PathNames.paymentById,\n    errorMessage: 'Failed to update payment request. This error has been logged',\n  },\n  [UpdateActionNames.paymentsSessionCreate]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentsSession,\n    errorMessage: 'Failed to create payment request. This error has been logged',\n  },\n  [UpdateActionNames.paymentRequestCreate]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentRequest,\n    successMessage: 'Successfully created payment request.',\n    errorMessage: 'Failed to create payment request. This error has been logged',\n  },\n  [UpdateActionNames.paymentsClientConfigCreate]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentsConfigPrivate,\n    successMessage: 'Successfully created a client configuration.',\n    errorMessage: 'Failed to create payment config. This error has been logged',\n  },\n  [UpdateActionNames.paymentsClientConfigUpdate]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentsConfigPrivate,\n    successMessage: 'Successfully updated a client configuration.',\n    errorMessage: 'Failed to update payment config. This error has been logged',\n  },\n  [UpdateActionNames.paymentsClientConfigDelete]: {\n    api: ApiNames.payments,\n    path: PathNames.paymentsConfigPrivate,\n    successMessage: 'Successfully deleted a client configuration.',\n    errorMessage: 'Failed to delete payment config. This error has been logged',\n  },\n  [UpdateActionNames.submitOpayoTransaction]: {\n    api: ApiNames.payments,\n    path: PathNames.opayoTransactions,\n    errorMessage: 'Failed to submit payment transaction. This error has been logged',\n  },\n  [UpdateActionNames.getOpayoMerchantKey]: {\n    api: ApiNames.payments,\n    path: PathNames.opayoMerchantKeys,\n    errorMessage: 'Failed to configure app for payments. This error has been logged',\n  },\n  [UpdateActionNames.createAuthClient]: {\n    api: ApiNames.platform,\n    path: PathNames.authClient,\n    errorMessage: 'Failed to create new auth credentials. This error has been logged',\n  },\n  [UpdateActionNames.deleteAuthClient]: {\n    api: ApiNames.platform,\n    path: PathNames.authClient,\n    errorMessage: 'Failed to delete old auth credentials. This error has been logged',\n  },\n  [UpdateActionNames.deleteUserPassword]: {\n    api: ApiNames.platform,\n    path: PathNames.userByIdPassword,\n    successMessage: 'Successfully reset password.',\n    errorMessage: 'Failed to reset password.',\n  },\n  [UpdateActionNames.deleteUserSuppressionList]: {\n    api: ApiNames.platform,\n    path: PathNames.userEmailSuppressions,\n    successMessage: 'Successfully removed user from list.',\n    errorMessage: 'Failed to remove user from list.',\n  },\n  [UpdateActionNames.removeMemberFromGroup]: {\n    api: ApiNames.platform,\n    path: PathNames.groupIdMembersDelete,\n    successMessage: 'Successfully removed user from group.',\n    errorMessage: 'Failed to remove user from group.',\n  },\n  [UpdateActionNames.addMemberToGroup]: {\n    api: ApiNames.platform,\n    path: PathNames.groupIdMembers,\n    successMessage: 'Successfully added user to group.',\n    errorMessage: 'Failed to remove user from group.',\n  },\n  [UpdateActionNames.updatePlatformConfig]: {\n    api: ApiNames.platform,\n    path: PathNames.getOrgConfig,\n    successMessage: 'Successfully updated platform config.',\n    errorMessage: 'Failed to update platform config.',\n  },\n  [UpdateActionNames.updateApp]: {\n    api: ApiNames.platform,\n    path: PathNames.appsId,\n    successMessage: 'Successfully updated app',\n    errorMessage: 'Failed to update app',\n  },\n  [UpdateActionNames.updateInstallation]: {\n    api: ApiNames.platform,\n    path: PathNames.installationsId,\n    successMessage: 'Successfully updated installation',\n    errorMessage: 'Failed to update installation',\n  },\n}\n","import React, {\n  ChangeEvent,\n  Dispatch,\n  FC,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useState,\n  ForwardedRef,\n  forwardRef,\n  InputHTMLAttributes,\n} from 'react'\nimport debounce from 'just-debounce-it'\nimport {\n  elMb5,\n  InputGroup,\n  InputWrapFull,\n  Loader,\n  MultiSelectInput,\n  MultiSelectOption,\n  PersistentNotification,\n} from '@reapit/elements'\nimport { useReapitGet, GetAction } from '@reapit/use-reapit-data'\nimport { ReapitConnectBrowserSession } from '@reapit/connect-session'\n\nexport interface SearchableMultiSelectProps extends InputHTMLAttributes<HTMLInputElement> {\n  id: string // The Id to be applied to the MultiSelect\n  errorString: string // The error message you get from React Hook Form\n  defaultList: any[] // Default selected values eg a list of Apps\n  currentValues: string[] // The current selected values for the MultiSelect eg from React Hook Form getValues().foo\n  reapitConnectBrowserSession: ReapitConnectBrowserSession // RC session object\n  valueKey: string // The key in the fetched object to set as the value for a single selected item eg 'id'\n  nameKey: string // The key in the fetched object to set as the display name for a single selected item eg 'name'\n  searchKey: string // The query string key to filter the API on eg 'appName' - will be the value of the text input\n  dataListKey: string // The accessor for the fetched list eg 'data' or '_embedded'\n  action: GetAction // A useReapitGet action eg getActions[GetActionNames.getInstallations]\n  label?: string // The Label to be applied to the Search input\n  queryParams?: Object // Any addtional query params eg pageSize or clientId\n  noneSelectedLabel?: string // An optional label for the multi select if no items are selected\n}\n\n/**\n * example usage with React Hook Form\n \n  <SearchableMultiSelect\n    id=\"app-ids-select\"\n    label=\"Search Apps\"\n    errorString={errors.appIds?.message ?? ''}\n    defaultList={[]} // pass a prefetched list of app models here if you have pre-selected apps\n    currentValues={getValues().appIds?.split(',')?.filter(Boolean)}\n    reapitConnectBrowserSession={reapitConnectBrowserSession}\n    valueKey=\"id\"\n    nameKey=\"name\"\n    searchKey=\"appName\"\n    dataListKey=\"data\"\n    action={getActions[GetActionNames.getApps]}\n    queryParams={{ pageSize: 100 }}\n    noneSelectedLabel=\"No apps selected\"\n    {...register('appIds')}\n  />\n */\n\nexport const handleSetInitialOptions =\n  (defaultList: any, nameKey: string, valueKey: string, setOptions: Dispatch<SetStateAction<MultiSelectOption[]>>) =>\n  () => {\n    if (defaultList.length) {\n      const initialOptions = defaultList.map((item) => ({ value: item[valueKey], name: item[nameKey] }))\n\n      if (initialOptions.length) setOptions(initialOptions)\n    }\n  }\n\nexport const handleSetNewOptions =\n  (\n    currentValues: string[],\n    options: MultiSelectOption[],\n    data: any[],\n    nameKey: string,\n    valueKey: string,\n    setOptions: Dispatch<SetStateAction<MultiSelectOption[]>>,\n  ) =>\n  () => {\n    const newSelectedOptions = options.filter((option) => currentValues.includes(option.value))\n    const newFetchedOptions = data.map((item) => ({ value: item[valueKey], name: item[nameKey] }))\n    const newOptions = [...newSelectedOptions, ...newFetchedOptions]\n    const uniqueOptions = [...new Set([...newOptions.map((option) => JSON.stringify(option))])].map((jsonOption) =>\n      JSON.parse(jsonOption),\n    )\n\n    if (uniqueOptions.length) setOptions(uniqueOptions)\n  }\n\nexport const SearchableMultiSelect: FC<SearchableMultiSelectProps> = forwardRef(\n  (\n    {\n      label,\n      errorString,\n      defaultList,\n      currentValues,\n      noneSelectedLabel,\n      queryParams,\n      reapitConnectBrowserSession,\n      action,\n      valueKey,\n      nameKey,\n      dataListKey,\n      searchKey,\n      ...rest\n    },\n    ref: ForwardedRef<InputHTMLAttributes<HTMLInputElement>>,\n  ) => {\n    const [searchString, setSearchString] = useState<string>('')\n    const [options, setOptions] = useState<MultiSelectOption[]>([])\n    const debouncedSearch = useCallback(\n      debounce((event: ChangeEvent<HTMLInputElement>) => setSearchString(event.target.value), 500),\n      [500],\n    )\n    const params = queryParams ?? {}\n\n    const [response, loading] = useReapitGet<any>({\n      reapitConnectBrowserSession,\n      action,\n      queryParams: {\n        ...params,\n        [searchKey]: searchString,\n      },\n      fetchWhenTrue: [searchString],\n    })\n\n    const data = response ? response[dataListKey] : []\n    const defaultValues = defaultList.map((item) => item[valueKey]).filter(Boolean)\n\n    useEffect(handleSetInitialOptions(defaultList, nameKey, valueKey, setOptions), [defaultList])\n\n    useEffect(handleSetNewOptions(currentValues, options, data, nameKey, valueKey, setOptions), [\n      searchString,\n      response,\n    ])\n\n    return (\n      <InputWrapFull>\n        <InputGroup\n          className={elMb5}\n          onChange={debouncedSearch}\n          icon=\"searchSystem\"\n          placeholder=\"Search\"\n          label={label ?? 'Search'}\n        />\n        {loading && <Loader className={elMb5} />}\n        <MultiSelectInput\n          className={elMb5}\n          noneSelectedLabel={noneSelectedLabel ? noneSelectedLabel : 'No items selected'}\n          defaultValues={[...new Set(defaultValues)]}\n          options={options}\n          ref={ref}\n          {...rest}\n        />\n        {errorString && (\n          <PersistentNotification isFullWidth isExpanded intent=\"danger\" isInline>\n            {errorString}\n          </PersistentNotification>\n        )}\n        {response && !data.length && (\n          <PersistentNotification isFullWidth isExpanded intent=\"primary\" isInline>\n            No results found for your search query\n          </PersistentNotification>\n        )}\n      </InputWrapFull>\n    )\n  },\n)\n","/* istanbul ignore file */\n// Not possible to test this file without stubbing public keys. Obviously can't include these in the\n// project for security reasons and using random strings would be basically worthless as a test.\n// Given code comes from AWS, seems reasonable to trust the implementation.\nimport 'isomorphic-fetch'\nimport { LoginIdentity } from '../types'\n// We wanted to use idtoken-verifier, currently using bashleigh-idtoken-verifier\n// as the types are incorrect in root package\nimport IdTokenVerifier from 'idtoken-verifier'\nimport decode from 'jwt-decode'\n\n// Util to verify integrity of AWS tokens for client side applications. Allows Connect Session module to check a\n// ID Token for validity of claims. See Connect Session for usage, not intended for external users.\n// See AWS Docs https://github.com/awslabs/aws-support-tools/tree/master/Cognito/decode-verify-jwt), code adapted from here.\n\ninterface Claim {\n  token_use: string\n  auth_time: number\n  iss: string\n  exp: number\n  username: string\n  client_id: string\n}\n\nexport type DecodedToken<T extends any> = {\n  aud: string\n} & T\n\nexport const connectSessionVerifyDecodeIdTokenWithPublicKeys = async (\n  token: string,\n): Promise<LoginIdentity | undefined> => {\n  try {\n    const decodedToken = decode<DecodedToken<any>>(token)\n    const aud: string | string[] = decodedToken.aud\n\n    const verifier = new IdTokenVerifier({\n      issuer: decodedToken.iss,\n      audience: Array.isArray(aud) ? aud[0] : aud,\n      leeway: 300,\n    })\n\n    const claim = (await new Promise<Claim>((resolve, reject) =>\n      verifier.verify(token, (err: Error | null, payload: object | null) => {\n        if (err) {\n          reject(err)\n        }\n        resolve(payload as Claim)\n      }),\n    )) as Claim\n    const currentSeconds = Math.floor(new Date().valueOf() / 1000)\n\n    // Allow 5 minutes to avoid CPU clock latency issues. See: https://github.com/reapit/foundations/issues/2467\n    // basically some Windows laptops calculate time not terribly accurately and can be out by as much as 2 or 3 mins\n    // based on testing so the currentSeconds are before the auth_time in AWS.\n    // Not ideal but prevents constant invalid id_token messages\n    if (currentSeconds > claim.exp + 300 || currentSeconds + 300 < claim.auth_time)\n      throw new Error('Id verification claim expired')\n    if (claim.token_use !== 'id') throw new Error('Id verification claim is not an id token')\n\n    return {\n      name: claim['name'],\n      email: claim['email'],\n      agencyCloudId: claim['custom:reapit:agencyCloudId'] || null,\n      developerId: claim['custom:reapit:developerId'] || null,\n      clientId: claim['custom:reapit:clientCode'] || null,\n      adminId: claim['custom:reapit:marketAdmin'] || null,\n      userCode: claim['custom:reapit:userCode'] || null,\n      groups: claim['cognito:groups'] || [],\n      orgName: claim['custom:reapit:orgName'] || null,\n      orgId: claim['custom:reapit:orgId'] || null,\n      offGroupIds: claim['custom:reapit:offGroupIds'] || null,\n      offGrouping: claim['custom:reapit:offGrouping'] && claim['custom:reapit:offGrouping'] === 'true' ? true : false,\n      offGroupName: claim['custom:reapit:offGroupName'] || null,\n      officeId: claim['custom:reapit:officeId'] || null,\n      orgProduct: claim['custom:reapit:orgProduct'] || null,\n    }\n  } catch (error) {\n    console.error('Reapit Connect Session error:', (error as any).message)\n  }\n}\n\nexport const connectSessionVerifyDecodeIdToken = async (token: string): Promise<LoginIdentity | undefined> => {\n  return connectSessionVerifyDecodeIdTokenWithPublicKeys(token)\n}\n","import 'isomorphic-fetch'\nimport {\n  ReapitConnectBrowserSessionInitializers,\n  ReapitConnectSession,\n  CoginitoAccess,\n  LoginIdentity,\n  CoginitoSession,\n} from '../types'\nimport { connectSessionVerifyDecodeIdToken } from '../utils/verify-decode-id-token'\nimport decode from 'jwt-decode'\nimport { DecodedToken } from '../utils'\nimport { v4 as uuid } from 'uuid'\n\nexport class ReapitConnectBrowserSession {\n  // Static constants\n  static GLOBAL_KEY = '__REAPIT_MARKETPLACE_GLOBALS__'\n  static REFRESH_TOKEN_KEY = 'REAPIT_REFRESH_TOKEN'\n  static USER_NAME_KEY = 'REAPIT_LAST_AUTH_USER'\n  static APP_DEFAULT_TIMEOUT = 10800000 // 3hrs in ms\n\n  // Private cached variables, I don't want users to reference these directly or it will get confusing.\n  // and cause bugs\n  private connectOAuthUrl: string\n  private connectClientId: string\n  private session: ReapitConnectSession | null\n  private connectLoginRedirectPath: string\n  private connectLogoutRedirectPath: string\n  private connectApplicationTimeout: number\n  private idleTimeoutCountdown: number\n  private refreshTokenStorage: Storage\n  private fetching: boolean\n\n  constructor({\n    connectClientId,\n    connectOAuthUrl,\n    connectLoginRedirectPath,\n    connectLogoutRedirectPath,\n    connectApplicationTimeout,\n  }: ReapitConnectBrowserSessionInitializers) {\n    // Instantiate my private variables from the constructor params\n    this.connectOAuthUrl = connectOAuthUrl\n    this.connectClientId = connectClientId\n    this.connectLoginRedirectPath = `${window.location.origin}${connectLoginRedirectPath || ''}`\n    this.connectLogoutRedirectPath = `${window.location.origin}${\n      connectLogoutRedirectPath || connectLogoutRedirectPath === '' ? connectLogoutRedirectPath : '/login'\n    }`\n    this.connectApplicationTimeout = connectApplicationTimeout ?? ReapitConnectBrowserSession.APP_DEFAULT_TIMEOUT\n    this.refreshTokenStorage = this.connectIsDesktop ? window.localStorage : window.sessionStorage\n    this.fetching = false\n    this.session = null\n    this.idleTimeoutCountdown = this.connectApplicationTimeout\n    this.connectBindPublicMethods()\n    this.setIdleTimeoutListeners()\n  }\n\n  // I bind the public methods to the class on instantiation, in the case they are called in a new\n  // closure - a good example of this behaviour is when we use the call effect in a saga\n  private connectBindPublicMethods() {\n    this.connectSession = this.connectSession.bind(this)\n    this.connectAuthorizeRedirect = this.connectAuthorizeRedirect.bind(this)\n    this.connectLoginRedirect = this.connectLoginRedirect.bind(this)\n    this.connectLogoutRedirect = this.connectLogoutRedirect.bind(this)\n    this.connectClearSession = this.connectClearSession.bind(this)\n  }\n\n  private setIdleTimeoutListeners() {\n    if (this.connectIsDesktop) return\n\n    const resetTimer = () => {\n      clearTimeout(this.idleTimeoutCountdown)\n      this.idleTimeoutCountdown = window.setTimeout(this.connectLogoutRedirect, this.connectApplicationTimeout)\n    }\n\n    document.onmousemove = resetTimer\n    document.onkeypress = resetTimer\n    document.ontouchstart = resetTimer\n  }\n\n  private get refreshToken(): string | null {\n    return (\n      this.session?.refreshToken ??\n      this.refreshTokenStorage.getItem(\n        `${ReapitConnectBrowserSession.REFRESH_TOKEN_KEY}_${this.userName}_${this.connectClientId}`,\n      )\n    )\n  }\n\n  private get userName(): string | null {\n    return (\n      this.session?.loginIdentity.email ??\n      this.refreshTokenStorage.getItem(`${ReapitConnectBrowserSession.USER_NAME_KEY}_${this.connectClientId}`)\n    )\n  }\n\n  private setRefreshToken(session: ReapitConnectSession) {\n    if (session.refreshToken && session.loginIdentity && session.loginIdentity.email) {\n      this.refreshTokenStorage.setItem(\n        `${ReapitConnectBrowserSession.REFRESH_TOKEN_KEY}_${session.loginIdentity.email}_${this.connectClientId}`,\n        session.refreshToken,\n      )\n    }\n    if (session.loginIdentity && session.loginIdentity.email) {\n      this.refreshTokenStorage.setItem(\n        `${ReapitConnectBrowserSession.USER_NAME_KEY}_${this.connectClientId}`,\n        session.loginIdentity.email,\n      )\n    }\n  }\n\n  private clearRefreshToken() {\n    this.refreshTokenStorage.removeItem(\n      `${ReapitConnectBrowserSession.REFRESH_TOKEN_KEY}_${this.userName}_${this.connectClientId}`,\n    )\n    this.refreshTokenStorage.removeItem(`${ReapitConnectBrowserSession.USER_NAME_KEY}_${this.connectClientId}`)\n  }\n\n  // See below, used to refresh session if I have a refresh token in local storage\n  private get tokenRefreshEndpoint() {\n    return `${this.connectOAuthUrl}/token?grant_type=refresh_token&client_id=${this.connectClientId}&refresh_token=${this.refreshToken}&redirect_uri=${this.connectLoginRedirectPath}`\n  }\n\n  // See below, used to refresh session if I have a code in the URL\n  private get tokenCodeEndpoint(): string {\n    return `${this.connectOAuthUrl}/token?grant_type=authorization_code&client_id=${this.connectClientId}&code=${this.authCode}&redirect_uri=${this.connectLoginRedirectPath}`\n  }\n\n  // Check on access token to see if has expired - they last 1hr only before I need to refresh\n  private get sessionExpired() {\n    if (this.session) {\n      const decoded = decode<DecodedToken<CoginitoAccess>>(this.session.accessToken)\n      const expiry = decoded['exp']\n      const fiveMinsFromNow = Math.round(new Date().getTime() / 1000) + 300\n      return expiry ? expiry < fiveMinsFromNow : true\n    }\n\n    return true\n  }\n\n  // Gets the auth code from the url of the given page\n  private get authCode(): string | null {\n    const params = new URLSearchParams(window.location.search)\n    const authorizationCode = params.get('code')\n\n    return authorizationCode || null\n  }\n\n  // Calls the token endpoint in Cognito with either a refresh token or a code, depending on what\n  // I have available in local storage or in the URL.\n  // See: https://docs.aws.amazon.com/cognito/latest/developerguide/token-endpoint.html\n  private async connectGetSession(url: string): Promise<ReapitConnectSession | void> {\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      } as RequestInit)\n      const session: CoginitoSession | undefined = await response.json()\n\n      if (!session || (session && session.error)) return this.handleError('Error fetching session from Reapit Connect ')\n\n      // I need to verify the identity claims I have just received from the server dwdqd\n      const loginIdentity: LoginIdentity | undefined = await connectSessionVerifyDecodeIdToken(session.id_token)\n\n      // If the idToken is invalid, don't return the session\n      if (!loginIdentity) return this.handleError('Login identity was not verified')\n\n      const { access_token, refresh_token, id_token } = session\n\n      return {\n        accessToken: access_token,\n        // I only get a new refresh token back when grant type is code. I only use grant type code\n        // when I don't have a session, so I can update the refresh token for code and when I have a\n        // session and am refereshing, I can recycle the old refresh token\n        refreshToken: refresh_token ? refresh_token : this.session ? this.session?.refreshToken : '',\n        idToken: id_token,\n        loginIdentity,\n      }\n    } catch (err) {\n      return this.handleError(`Reapit Connect Token Error ${(err as any).message}`)\n    }\n  }\n\n  private handleError(error: string | Error) {\n    this.clearRefreshToken()\n    typeof error === 'string' ? console.error('Reapit Connect Error:', error) : console.error(error)\n  }\n\n  // set a redirect URI to my page where I instantiated the flow, by decoding the state object\n  public get connectInternalRedirect() {\n    const params = new URLSearchParams(window.location.search)\n    const stateNonce = params.get('state')\n\n    if (!stateNonce) return null\n\n    const internalRedirectString = this.refreshTokenStorage.getItem(stateNonce)\n\n    if (internalRedirectString) {\n      return decodeURIComponent(internalRedirectString)\n    }\n    return null\n  }\n\n  // A convenience getter to check if my app has been loaded inside RPS / Desktop / Agency Cloud\n  public get connectIsDesktop() {\n    return Boolean(window[ReapitConnectBrowserSession.GLOBAL_KEY])\n  }\n\n  // A convenience getter to check if my app has a valid session\n  public get connectHasSession() {\n    return Boolean(this.session && !this.sessionExpired)\n  }\n\n  // Handles redirect to authorization endpoint - in most cases, I don't need to call in my app\n  // but made public if I want to override the redirect URI I specified in the constructor\n  public connectAuthorizeRedirect(redirectUri?: string): void {\n    const authRedirectUri = redirectUri || this.connectLoginRedirectPath\n    const params = new URLSearchParams(window.location.search)\n    params.delete('code')\n    const search = params ? `?${params.toString()}` : ''\n    const internalRedirectPath = encodeURIComponent(`${window.location.pathname}${search}`)\n    const stateNonce = uuid()\n    this.refreshTokenStorage.setItem(stateNonce, internalRedirectPath)\n\n    window.location.href = `${this.connectOAuthUrl}/authorize?response_type=code&client_id=${this.connectClientId}&redirect_uri=${authRedirectUri}&state=${stateNonce}`\n  }\n\n  // Handles redirect to login - defaults to constructor redirect uri but I can override if I like.\n  // Used as handler for login page button\n  public connectLoginRedirect(redirectUri?: string): void {\n    const loginRedirectUri = redirectUri || this.connectLoginRedirectPath\n    this.clearRefreshToken()\n    window.location.href = `${this.connectOAuthUrl}/login?response_type=code&client_id=${this.connectClientId}&redirect_uri=${loginRedirectUri}`\n  }\n\n  // Handles redirect to logout - defaults to constructor login uri but I can override if I like.\n  // Used as handler for logout menu button\n  public connectLogoutRedirect(redirectUri?: string): void {\n    const logoutRedirectUri = redirectUri || this.connectLogoutRedirectPath\n    this.clearRefreshToken()\n    window.location.href = `${this.connectOAuthUrl}/logout?client_id=${this.connectClientId}&logout_uri=${logoutRedirectUri}`\n  }\n\n  public connectClearSession(): void {\n    this.session = null\n  }\n\n  // The main method for fetching a session in an app.\n  public async connectSession(): Promise<ReapitConnectSession | void> {\n    // Ideally, if I have a valid session, just return it\n    if (!this.sessionExpired) {\n      return this.session as ReapitConnectSession\n    }\n\n    // Stops me from making multiple calls to the token endpoint\n    if (this.fetching) {\n      return\n    }\n\n    // I don't want to make more requests while I am in the OAuth Flow\n    this.fetching = true\n\n    try {\n      // See comment in connectGetSession method. If I have a refresh token, I want to use this in the\n      // first instance - get the refresh endpoint. Otherwise check to see if I have a code and get\n      // the code endpoint so I can exchange for a token\n      const endpoint = this.refreshToken ? this.tokenRefreshEndpoint : this.authCode ? this.tokenCodeEndpoint : null\n\n      // I don't have either a refresh token or a code so redirect to the authorization endpoint to get\n      // a code I can exchange for a token\n      if (!endpoint) {\n        return this.connectAuthorizeRedirect()\n      }\n\n      // Get a new session from the code or refresh token\n      const session = await this.connectGetSession(endpoint)\n\n      this.fetching = false\n\n      if (session) {\n        // Cache the session in memory for future use then return it to the user\n        this.session =\n          !session.refreshToken && this.refreshToken ? { ...session, refreshToken: this.refreshToken } : session\n        this.setRefreshToken(session)\n        return this.session\n      }\n\n      // The token endpoint failed to get a session so send me to login to get a new session\n      this.connectAuthorizeRedirect()\n    } catch (err) {\n      return this.handleError(`Reapit Connect Session error ${(err as any).message}`)\n    }\n  }\n}\n","import axios from 'axios'\nimport { CoginitoAccess, ReapitConnectServerSessionInitializers } from '../types'\nimport decode from 'jwt-decode'\nimport { DecodedToken } from '../utils'\n\nexport class ReapitConnectServerSession {\n  // Static constants\n  static TOKEN_EXPIRY = Math.round(new Date().getTime() / 1000) + 3300 // 55 minutes from now - expiry is 1hr, 5mins\n  // to allow for clock drift - unused, not removing as don't want to make any breaking changes\n\n  // Private cached variables, I don't want users to reference these directly or it will get confusing.\n  // and cause bugs\n  private connectOAuthUrl: string\n  private connectClientId: string\n  private connectClientSecret: string\n  private accessToken: string | null\n\n  constructor({ connectClientId, connectClientSecret, connectOAuthUrl }: ReapitConnectServerSessionInitializers) {\n    // Instantiate my private variables from either local storage or from the constructor params\n    this.connectOAuthUrl = connectOAuthUrl\n    this.connectClientId = connectClientId\n    this.connectClientSecret = connectClientSecret\n    this.accessToken = null\n    this.connectAccessToken = this.connectAccessToken.bind(this)\n  }\n\n  // Check on access token to see if has expired - they last 1hr only before I need to refresh\n  private get accessTokenExpired() {\n    if (this.accessToken) {\n      const decoded = decode<DecodedToken<CoginitoAccess>>(this.accessToken)\n      const expiry = decoded['exp']\n      // 5mins to allow for clock drift\n      const fiveMinsFromNow = Math.round(new Date().getTime() / 1000) + 300\n      return expiry ? expiry < fiveMinsFromNow : true\n    }\n\n    return true\n  }\n\n  // See: https://docs.aws.amazon.com/cognito/latest/developerguide/token-endpoint.html\n  private async connectGetAccessToken(): Promise<string | void> {\n    try {\n      const base64Encoded = Buffer.from(`${this.connectClientId}:${this.connectClientSecret}`).toString('base64')\n      const session = await axios.post(\n        `${this.connectOAuthUrl}/token?grant_type=client_credentials&client_id=${this.connectClientId}`,\n        {},\n        {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            Authorization: `Basic ${base64Encoded}`,\n          },\n        },\n      )\n\n      if (session.data.error) {\n        throw new Error(session.data.error)\n      }\n\n      if (session.data && session.data.access_token) {\n        return session.data.access_token\n      }\n      throw new Error('No access token returned by Reapit Connect')\n    } catch (error) {\n      console.error('Reapit Connect Token Error', (error as any).message)\n    }\n  }\n\n  // The main method for fetching an accessToken in an app.\n  public async connectAccessToken(): Promise<string | void> {\n    // Ideally, if I have a valid accessToken, just return it\n    if (!this.accessTokenExpired) {\n      return this.accessToken as string\n    }\n\n    try {\n      const accessToken = await this.connectGetAccessToken()\n\n      if (accessToken) {\n        // Cache the accessToken in memory for future use then return it to the user\n        this.accessToken = accessToken\n        return accessToken\n      }\n\n      throw new Error('No session returned from Reapit Connect')\n    } catch (error) {\n      console.error('Reapit Connect Session error', (error as any).message)\n    }\n  }\n}\n","import { styled } from '@linaria/react'\n\nexport const LoginContainer = styled.div`\n  min-width: 100vw;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n  background: url('./login-bg.svg') left center no-repeat;\n  background-size: cover;\n  height: 100vh;\n  overflow-y: auto;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    justify-content: center;\n  }\n`\n\nexport const LoginRoleTile = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem;\n  margin: 0.625rem;\n  border-radius: 0.25rem;\n  border: 1px solid var(--color-grey-light);\n  cursor: pointer;\n  box-shadow: 0px 2px 9px rgba(0, 0, 0, 0.08);\n\n  &:hover {\n    border: 1px solid var(--intent-secondary);\n  }\n\n  a {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n`\n\nexport const LoginContentWrapper = styled.div`\n  max-width: 27rem;\n  pointer-events: auto;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  margin: auto;\n  background-color: var(--color-white);\n  padding: 2rem;\n  box-shadow: 2px 4px 20px rgba(0, 0, 0, 0.05);\n  border-radius: 0.25rem;\n\n  img {\n    margin: 0 auto 3rem auto;\n    display: block;\n  }\n\n  @media (max-width: 768px) {\n    width: 100%;\n    margin: 0 auto;\n  }\n`\n","import React, { FC, useCallback } from 'react'\nimport { Button, ButtonGroup, Subtitle, FlexContainer, Icon, elMb7, BodyText } from '@reapit/elements'\nimport { LoginContainer, LoginContentWrapper } from './__styles__'\nimport { ReapitConnectBrowserSession } from '@reapit/connect-session'\n\nexport interface LoginProps {\n  appName: string\n  reapitConnectBrowserSession: ReapitConnectBrowserSession\n  redirectPath?: string\n}\n\nexport const handleLoginClick =\n  (reapitConnectBrowserSession: ReapitConnectBrowserSession, redirectPath?: string) => () => {\n    const redirect = redirectPath ? `${window.location.origin}${redirectPath}` : undefined\n    reapitConnectBrowserSession.connectLoginRedirect(redirect)\n  }\n\nexport const Login: FC<LoginProps> = ({ appName, reapitConnectBrowserSession, redirectPath }) => {\n  const loginUser = useCallback(handleLoginClick(reapitConnectBrowserSession, redirectPath), [])\n\n  return (\n    <LoginContainer>\n      <LoginContentWrapper>\n        <Icon className={elMb7} height=\"40px\" width=\"200px\" icon=\"reapitLogoInfographic\" />\n        <FlexContainer isFlexColumn>\n          <Subtitle hasCenteredText>Welcome</Subtitle>\n          <BodyText hasCenteredText>{appName}</BodyText>\n        </FlexContainer>\n        <ButtonGroup alignment=\"center\">\n          <Button onClick={loginUser} intent=\"primary\" size={3}>\n            Login With Reapit\n          </Button>\n        </ButtonGroup>\n      </LoginContentWrapper>\n    </LoginContainer>\n  )\n}\n\nexport default Login\n","export const Routes = {\n  ROOT: '/',\n  LOGIN: '/login',\n  APPROVALS: '/approvals',\n  USAGE: '/usage',\n  BILLING: '/billing',\n  APPS: '/apps',\n  DEV_MANAGEMENT: '/dev-management',\n  INSTALLATIONS: '/installations',\n  CUSTOMERS: '/customers',\n  AUTHENTICATION: '/authentication',\n  SUBSCRIPTIONS: '/subscriptions',\n  FOUR_O_FOUR: '/404',\n  OK: '/ok',\n  TRAFFIC: '/traffic',\n  IAAS: '/iaas',\n}\n\nexport default Routes\n","import { ReapitConnectBrowserSession } from '@reapit/connect-session'\nimport Routes from '../constants/routes'\n\n// Needs to be a singleton as the class is stateful\nexport const reapitConnectBrowserSession = new ReapitConnectBrowserSession({\n  connectClientId: process.env.connectClientId,\n  connectOAuthUrl: process.env.connectOAuthUrl,\n  connectLoginRedirectPath: Routes.APPS,\n  connectUserPoolId: process.env.connectUserPoolId,\n})\n","import React, { FC } from 'react'\nimport { Route, BrowserRouter, Routes } from 'react-router-dom'\nimport { catchChunkError, Login, OkayPage } from '@reapit/utils-react'\nimport RoutePaths from '../constants/routes'\nimport { createBrowserHistory, History } from 'history'\nimport { PageContainer, PersistentNotification } from '@reapit/elements'\nimport { reapitConnectBrowserSession } from './connect-session'\n\nexport const history: History = createBrowserHistory()\n\nconst PrivateRouteWrapper = React.lazy(() => catchChunkError(() => import('./private-route-wrapper')))\nconst ApprovalsPage = React.lazy(() => catchChunkError(() => import('../components/approvals')))\nconst DevsManagementPage = React.lazy(() => catchChunkError(() => import('../components/developers')))\nconst AppsManagementPage = React.lazy(() => catchChunkError(() => import('../components/apps')))\nconst InstallationsPage = React.lazy(() => catchChunkError(() => import('../components/installations')))\nconst BillingPage = React.lazy(() => catchChunkError(() => import('../components/billing')))\nconst CustomersPage = React.lazy(() => catchChunkError(() => import('../components/customers')))\nconst SubscriptionsPage = React.lazy(() => catchChunkError(() => import('../components/subscriptions')))\nconst UsagePage = React.lazy(() => catchChunkError(() => import('../components/usage')))\nconst TrafficPage = React.lazy(() => catchChunkError(() => import('../components/traffic')))\nconst IaaSPage = React.lazy(() => catchChunkError(() => import('../components/iaas')))\n\nexport const FourOFour: FC = () => (\n  <PageContainer>\n    <PersistentNotification isFullWidth isInline isExpanded intent=\"danger\">\n      Page not found\n    </PersistentNotification>\n  </PageContainer>\n)\n\nexport const RoutesComponent = () => {\n  return (\n    <Routes>\n      <Route path={RoutePaths.OK} element={<OkayPage />} />\n      <Route\n        path={RoutePaths.LOGIN}\n        element={\n          <Login\n            appName=\"Developer Admin Portal\"\n            reapitConnectBrowserSession={reapitConnectBrowserSession}\n            redirectPath={RoutePaths.APPROVALS}\n          />\n        }\n      />\n      <Route path={RoutePaths.FOUR_O_FOUR} element={<FourOFour />} />\n      <Route\n        path={RoutePaths.BILLING}\n        element={\n          <PrivateRouteWrapper>\n            <BillingPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.TRAFFIC}\n        element={\n          <PrivateRouteWrapper>\n            <TrafficPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.USAGE}\n        element={\n          <PrivateRouteWrapper>\n            <UsagePage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.APPROVALS}\n        element={\n          <PrivateRouteWrapper>\n            <ApprovalsPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.APPS}\n        element={\n          <PrivateRouteWrapper>\n            <AppsManagementPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.DEV_MANAGEMENT}\n        element={\n          <PrivateRouteWrapper>\n            <DevsManagementPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.INSTALLATIONS}\n        element={\n          <PrivateRouteWrapper>\n            <InstallationsPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.CUSTOMERS}\n        element={\n          <PrivateRouteWrapper>\n            <CustomersPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.SUBSCRIPTIONS}\n        element={\n          <PrivateRouteWrapper>\n            <SubscriptionsPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.IAAS}\n        element={\n          <PrivateRouteWrapper>\n            <IaaSPage />\n          </PrivateRouteWrapper>\n        }\n      />\n      <Route\n        path={RoutePaths.ROOT}\n        element={\n          <PrivateRouteWrapper>\n            <AppsManagementPage />\n          </PrivateRouteWrapper>\n        }\n      />\n    </Routes>\n  )\n}\n\nconst Router: FC = () => (\n  <BrowserRouter>\n    <RoutesComponent />\n  </BrowserRouter>\n)\n\nexport default Router\n","import '@reapit/elements/dist/index.css'\nimport React, { StrictMode } from 'react'\nimport Router from './router'\nimport { MediaStateProvider, NavStateProvider, SnackProvider } from '@reapit/elements'\nimport { injectSwitchModeToWindow } from '@reapit/utils-react'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools'\n\nconst queryClient = new QueryClient()\n\ninjectSwitchModeToWindow()\n\nconst App = () => (\n  <StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <SnackProvider>\n        <NavStateProvider>\n          <MediaStateProvider>\n            <Router />\n          </MediaStateProvider>\n        </NavStateProvider>\n      </SnackProvider>\n      <ReactQueryDevtools initialIsOpen={false} />\n    </QueryClientProvider>\n  </StrictMode>\n)\n\nexport default App\n"],"file":"assets/index-7tW5-Pg7.js"}