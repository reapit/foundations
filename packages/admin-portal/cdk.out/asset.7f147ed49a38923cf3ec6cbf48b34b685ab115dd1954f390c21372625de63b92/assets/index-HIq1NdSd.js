import{r as i,j as s,W as j,ac as f,a7 as p,a8 as l,ae as g,z as u,ab as b,am as w,an as o,ao as v,ap as F,aq as r,c as M,F as y}from"./vendor-troV5kp-.js";import{a as B}from"./developers-gaNWywzP.js";import{u as S,d as D}from"./index.esm-zVN26rm4.js";import{F as Y}from"./FileSaver.min-JSyqwKbI.js";import{F as C}from"./constants-PNvbKeey.js";import"./index-7tW5-Pg7.js";const t=(a,e)=>()=>{Y.saveAs(a,e)},d=(a,e)=>()=>{(async()=>{if(e)try{const n=await B({period:e});if(!n||n instanceof C)throw n;a(n)}catch(n){console.error(n)}})()},c=()=>{const[a,e]=i.useState(),[n,h]=i.useState(null),{register:m,handleSubmit:x}=S({mode:"onChange"});return i.useEffect(d(h,a==null?void 0:a.month),[a]),s.jsxs(j,{children:[s.jsx(f,{children:"Billing"}),s.jsx("form",{onChange:x(e),children:s.jsx(p,{className:l,children:s.jsx(g,{children:s.jsx(u,{...m("month"),label:"Month",type:"month"})})})}),n&&(a!=null&&a.month)?s.jsxs(b,{className:l,children:[s.jsxs(w,{children:[s.jsx(o,{children:"Period"}),s.jsx(o,{children:"Download Billing"})]}),s.jsx(v,{children:s.jsxs(F,{children:[s.jsx(r,{children:D(a.month).format("MMMM YYYY")}),s.jsx(r,{children:s.jsx(M,{onClick:t(n,`billing-developer-period-${a.month}.csv`),children:"Download"})})]})})]}):s.jsx(y,{intent:"primary",isExpanded:!0,isInline:!0,isFullWidth:!0,children:"No billing file available for download."})]})};export{c as AdminBilling,c as default,d as handleDownloadBillingPeriod,t as handleSaveFile};
