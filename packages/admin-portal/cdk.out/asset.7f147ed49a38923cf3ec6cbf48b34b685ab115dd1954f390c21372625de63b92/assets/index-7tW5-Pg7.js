function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/private-route-wrapper-diRSoV28.js","assets/vendor-troV5kp-.js","assets/navigation-NJEgAu2Y.js","assets/use-permissions-state-3iXP9x9E.js","assets/index--rtpHY-S.js","assets/use-reapit-update-Z5Casrho.js","assets/index.esm-zVN26rm4.js","assets/yup-pS53ROqe.js","assets/regexs-Ux5wzQ2i.js","assets/index-x06_CGx-.css","assets/index-Vq8NNhir.js","assets/index-7TJbm2qB.js","assets/index-tSHtSDOC.js","assets/index-1k5r5oX4.js","assets/FileSaver.min-JSyqwKbI.js","assets/create-subscriptions-uFj9BO_G.js","assets/index-fnGzF5Zn.js","assets/index-2BRT2d62.js","assets/index-PuzADKUO.js","assets/developers-gaNWywzP.js","assets/constants-PNvbKeey.js","assets/index-HIq1NdSd.js","assets/index-SIm5mzgA.js","assets/index-m7l-bdfe.css","assets/index-j05GjFSX.js","assets/index-csMvugsI.js","assets/index-3jfzv1lx.css","assets/index-DZudJoPt.js","assets/index-vWCVWIW0.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Et=Object.defineProperty;var _t=(U,P,O)=>P in U?Et(U,P,{enumerable:!0,configurable:!0,writable:!0,value:O}):U[P]=O;var m=(U,P,O)=>(_t(U,typeof P!="symbol"?P+"":P,O),O);import{r as u,v as Oe,U as Dt,j as o,M as xt,i as Ft,a as Be,c as z,h as X,x as jt,O as Ut,b as Ot,d as Z,I as Bt,P as Lt,e as Nt,f as $t,g as ee,R as Kt,k as Le,s as Gt,l as Wt,m as qt,q as zt,n as Vt,u as Yt,o as Ht,p as Jt,t as Ne,w as Qt,y as Xt,z as Zt,A as te,B as es,C as ts,F as se,D as re,E as ss,G as rs,H as as,J as $e,K as os,L as is,N as ns,Q as k,S as ps,T as cs,V as v,W as ls,X as ds,Y as gs,Z as hs,_ as us,$ as ms,a0 as fs,a1 as ys}from"./vendor-troV5kp-.js";let ae,oe,f,Ke,ie,Ge,ne,pe,ce,We,V,le,qe,de,ge,ws=(async()=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();const U="react-image-crop-global-styles",P="image-cropper-outer",O="image-cropper-inner",ze="image-cropper-content",Ve="image-cropper-crop-panel-wrapper",Ye="image-cropper-crop-panel",He="image-cropper-preview-wrapper",Je="image-cropper-preview",Qe=e=>({unit:"%",width:50,height:e?void 0:50,aspect:e}),Xe=(e,t)=>!t||!e?"":e.toDataURL("image/png"),Ze=({cropRatio:e,resizeDimensions:t,originWidth:a,originHeight:i})=>{const n=!t&&e>1,p=!t&&e<=1;return n?{outputWidth:a,outputHeight:a/e}:p?{outputHeight:i,outputWidth:i*e}:{outputWidth:t==null?void 0:t.width,outputHeight:t==null?void 0:t.height}},he=0,et=({completedCrop:e,previewCanvasRef:t,imgRef:a,resizeDimensions:i})=>()=>{if(!e||!t.current||!a.current)return;const n=a.current,p=t.current,c=n.naturalWidth,g=n.naturalHeight,l=c/n.width,h=g/n.height,d=e.width/e.height,{outputWidth:y,outputHeight:I}=Ze({cropRatio:d,resizeDimensions:i,originHeight:g,originWidth:c}),_=p.getContext("2d");_!==null&&(p.width=y,p.height=I,_.drawImage(n,e.x*l,e.y*h,e.width*l,e.height*h,he,he,y,I))},tt=e=>t=>{e.current=t},st=e=>t=>e(t),rt=e=>t=>e(t),at=({previewCanvasRef:e,completedCrop:t,onCropClick:a})=>()=>{a({previewCanvasRef:e,completedCrop:t})},ot=({setVisible:e,setFileName:t,setCroppedImage:a})=>()=>{t(""),a(""),e(!1)},it=({setCroppedImage:e,setVisible:t})=>({previewCanvasRef:a,completedCrop:i})=>{console.log(a,i);const n=Xe(a.current,i);e(n),t(!1)},nt=(e,t)=>a=>{if(a.target&&a.target.files&&a.target.files[0]){const i=a.target.files[0],n=new FileReader;n.readAsDataURL(i),n.onload=async()=>{const p=n.result;p&&typeof p=="string"&&(e(p),t(!0))},n.onerror=p=>{console.error(`file upload error: ${p}`)}}},pt=(e,t,a)=>()=>{(async()=>{const i=a&&t&&await a({imageData:t,name:Oe()});i&&i.Url&&e(i.Url)})().catch(i=>console.error(i))};u.forwardRef(({onFileView:e,onFileUpload:t,defaultValue:a,label:i,placeholderText:n,accept:p,id:c,aspect:g,resizeDimensions:l,...h},d)=>{const[y,I]=u.useState(a??""),[_,R]=u.useState(!1),[T,D]=u.useState(""),x=Qe(g),B=u.useRef(null),L=u.useRef(null),[E,$]=u.useState(x),[S,K]=u.useState(null),F=u.useMemo(()=>{var G,q;if(c)return c;const j=Oe();return((q=(G=window==null?void 0:window.process)==null?void 0:G.env)==null?void 0:q.NODE_ENV)==="test"?"test-static-id":j},[c]);u.useEffect(et({completedCrop:S,previewCanvasRef:L,imgRef:B,resizeDimensions:l}),[S]),u.useEffect(pt(I,T,t),[T]),u.useEffect(Dt(F,[y]),[y]),u.useEffect(()=>{a&&I(a)},[a]);const W=!!(S!=null&&S.width&&S.height);return o.jsxs(o.Fragment,{children:[o.jsxs(xt,{children:[i&&o.jsx(Ft,{children:i}),o.jsxs(Be,{isFlexAlignCenter:!0,children:[o.jsx(z,{className:X,type:"button",intent:"default",children:y?"Change":"Upload"}),o.jsx(jt,{accept:p,type:"file",onChange:nt(I,R)}),o.jsx(Ut,{id:F,...h,defaultValue:a,ref:d}),y?o.jsxs(Ot,{children:[e&&o.jsx(Z,{onClick:Bt(e,y),className:X,intent:"primary",icon:"view",fontSize:"1rem"}),o.jsx(Z,{onClick:Lt(I),className:X,intent:"primary",icon:"close",fontSize:"1rem"})]}):o.jsx(Nt,{hasGreyText:!0,hasNoMargin:!0,children:n??"Upload File"})]})]}),_&&o.jsx("div",{className:$t(U,P),children:o.jsxs("div",{className:O,children:[o.jsxs("div",{className:ze,children:[o.jsxs("div",{className:Ve,children:[o.jsx(ee,{children:"Crop Image"}),o.jsx(Kt,{ruleOfThirds:!0,className:Ye,src:y,onImageLoaded:tt(B),crop:E,onChange:st($),onComplete:rt(K)})]}),o.jsxs("div",{className:He,children:[o.jsx(ee,{children:"Preview"}),W&&o.jsx("canvas",{ref:L,className:Je})]})]}),o.jsxs(Le,{alignment:"right",children:[o.jsx(z,{intent:"default",type:"button",onClick:ot({setVisible:R,setFileName:I,setCroppedImage:D}),children:"Cancel"}),o.jsx(z,{intent:"primary",type:"button",disabled:!W,onClick:at({previewCanvasRef:L,completedCrop:S,onCropClick:it({setCroppedImage:D,setVisible:R})}),children:"Crop"})]})]})})]})});let b,ue,me,fe,C,N,ye,we,Ie,ve,be,Me;b=(e,t=3,a=500)=>new Promise((i,n)=>{e().then(i).catch(p=>{console.info(p),setTimeout(()=>{if(t===1){window.location.reload();return}b(e,t-1,a).then(i,n)},a)})}),ue="okay-wrapper",me="okay-content",fe=()=>o.jsx("div",{className:ue,children:o.jsx("div",{className:me,children:o.jsx("h5",{id:"ok-content",children:"It's ok, everything's fine \u{1F44D}"})})}),le=(e,t)=>{Gt("Error",{message:e.message??"No error message caputured",page:window.location.href,identity:(t==null?void 0:t.loginIdentity)??"No Session Logged",permissionGroups:(t==null?void 0:t.loginIdentity.groups)??[],accessToken:(t==null?void 0:t.accessToken)??"No Access Token Logged",idToken:(t==null?void 0:t.idToken)??"No Id Token Logged"}),t&&Wt({email:(t==null?void 0:t.loginIdentity.email)??"No email logged",username:(t==null?void 0:t.loginIdentity.name)??"No name logged",id:(t==null?void 0:t.loginIdentity.clientId)??"No client id logged"}),qt(e)},C="__REAPIT_MARKETPLACE_GLOBALS__",N="__REAPIT_MARKETPLACE_GLOBALS__",ye=e=>{if(!(!window||!window[C]))return e===void 0?window[C]:window[C][e]},we=(e={})=>{const t=JSON.parse(window.localStorage.getItem(N)),a=typeof t=="object"&&t!==null?{...t,...e}:{...e};return window.localStorage.setItem(N,JSON.stringify(a)),window[C]=a,window.location.reload(),a},Ie=()=>(window.localStorage.removeItem(N),window[C]=void 0,window.location.reload(),!0),ve=()=>{const e=JSON.parse(window.localStorage.getItem(N));if(typeof e=="object"&&e!==null){const t={...e};return window[C]=t,console.log(`window.${C} is set to`,JSON.parse(JSON.stringify(t))),t}return window.localStorage.removeItem(N),window[C]=void 0,!1},be=()=>{var e;Object.defineProperty(window,"desktopMode",{value:we}),Object.defineProperty(window,"webMode",{value:Ie}),((e=Object.getOwnPropertyDescriptor(window,C))==null?void 0:e.writable)!==!1&&ve()},ce="Missing valid Reapit Connect Session, please try logging in again if the problem persists",oe="ERR_NETWORK",pe=async(e,t)=>{var i;const a=(i=await e.connectSession())==null?void 0:i.accessToken;return a?{Authorization:`Bearer ${a}`,"api-version":"latest","Content-Type":"application/json",...t}:null},V=(e,t)=>{var d;const a=(d=e==null?void 0:e.response)==null?void 0:d.data,{description:i,title:n,message:p,errors:c}=a??{},g=i||n||p||(e!=null&&e.message?e.message:t||"An unknown error has occurred, please refresh the page and try again."),l=Array.isArray(c)?c==null?void 0:c.map(({field:y,message:I})=>`"${y}: ${I}"`):null,h=l?l.join(", "):"";return`${g} ${h}`},ne=(e,t,a)=>()=>{const{api:i,path:n}=e,p=a?Object.keys(a).reduce((g,l)=>g.replace(`{${l}}`,a[l]),n):n,c=zt.stringify(t,{encode:!1});return`${i}${p}${c?`?${c}`:""}`},Me=(e,t)=>e.reduce((a,i,n)=>n?`${a}&${t}=${i}`:String(i),""),qe=e=>Object.keys(e).reduce((t,a)=>{const i=e[a];return Array.isArray(i)?t[a]=Me(i,a):i&&(t[a]=String(i)),t},{}),ge=({reapitConnectBrowserSession:e,action:t,queryParams:a,uriParams:i,headers:n,fetchWhenTrue:p,onSuccess:c,onError:g,refetchOnWindowFocus:l,retry:h,withCredentials:d})=>{const{success:y,error:I}=Vt(),_=Yt(),R=Ht(),{successMessage:T,errorMessage:D}=t,x=u.useMemo(ne(t,a,i),[a,i,t]),B=p!=null&&p.length?(p==null?void 0:p.filter(Boolean).length)===p.length:!0,{data:L,error:E,isLoading:$,isRefetching:S,refetch:K}=Jt([x],{queryFn:async()=>{const j=await pe(e,n);if(!j)throw new Error("Missing valid Reapit Connect Session, please try logging in again.");return(await Ne.get(x,{headers:j,withCredentials:d})).data},onSuccess:()=>{c&&T&&c(T),!c&&T&&y(T)},onError:async j=>{const G=await e.connectSession(),q=j.message===ce,Tt=j.code===oe;if(q||Tt||!G)return R("/login");const Q=V(j,D);g&&g(Q),g||(I(Q),le(new Error(Q),G))},retry:h||1,refetchOnWindowFocus:!!l,enabled:B}),F=L||null,W=E?V(E,D):null;return[F,B&&$,W,K,S,()=>{_.removeQueries({queryKey:[x]})}]};var Se={appEnv:"local",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerPortalUri:"https://developers.dev.paas.reapit.cloud",appMarketUri:"https://marketplace.dev.paas.reapit.cloud"};const ct=e=>e.region&&(e.region==="uk"||e.region==="anz"),lt=()=>{if(Se.domainMappings){const e=JSON.parse(Se.domainMappings)[window.location.hostname];if(ct(e))return e.region}return"uk"},dt=lt(),gt=()=>dt==="anz"?"https://platform.au.dev.rc.reapit.cloud":"https://platform.dev.paas.reapit.cloud",r={platform:gt(),pipeline:"https://deployments.dev.paas.reapit.cloud",apiKey:"https://api-key.dev.paas.reapit.cloud/api-key",iaas:".dev.paas.reapit.cloud",appMarketCms:"https://marketplace-cms.dev.paas.reapit.cloud",payments:"https://payments-service.dev.paas.reapit.cloud"};let s;s=(e=>(e.dwAccounts="/dataMarketplace/accounts",e.dwDataSets="/dataMarketplace/datasets",e.dwShares="/dataMarketplace/shares",e.dwSharesId="/dataMarketplace/shares/{shareId}",e.dwShareRefresh="/dataMarketplace/shares/{shareId}/refresh",e.dwRequests="/dataMarketplace/requests",e.dwAccountsId="/dataMarketplace/accounts/{accountId}",e.apps="/marketplace/apps",e.appsId="/marketplace/apps/{appId}",e.installations="/marketplace/installations",e.getPipeline="/pipeline/{appId}",e.products="/marketplace/products",e.sandboxes="/marketplace/sandboxes",e.createPipeline="/pipeline",e.updatePipeline="/pipeline/{pipelineId}",e.getPipelineDeployments="/pipeline/{pipelineId}/pipeline-runner",e.createPipelineDeployments="/pipeline/{pipelineId}/pipeline-runner",e.appPermissions="/marketplace/scopes",e.getApiKeyByUserId="/user/{email}",e.createApiKeyByMember="/user",e.getMember="/marketplace/developers/{developerId}/members",e.deleteApiKey="/{apiKeyId}",e.billingDataByMonth="/trafficevents/billing/{month}/",e.getBillingDataByPeriod="/trafficevents/billing/",e.developerById="/marketplace/developers/{developerId}",e.customersById="/marketplace/customers/{customerId}",e.developers="/marketplace/developers",e.appSecretById="/marketplace/apps/{appId}/secret",e.desktopIntegrationTypes="/marketplace/desktopIntegrationTypes",e.appCategories="/marketplace/categories",e.appRevision="/marketplace/apps/{appId}/revisions",e.officeGroupId="/organisations/organisations/{orgId}/officegroups/{groupId}",e.fileUpload="/fileUpload",e.terminateInstallation="/marketplace/installations/{installationId}/terminate",e.appRevisions="/marketplace/apps/{appId}/revisions",e.cancelRevision="/marketplace/apps/{appId}/revisions/{revisionId}/reject",e.paginatePipeline="/pipeline",e.trafficStatistics="/trafficevents/trafficStatistics",e.memberById="/marketplace/developers/{developerId}/members/{memberId}",e.subscriptions="/marketplace/subscriptions",e.subscriptionsById="/marketplace/subscriptions/{subscriptionId}",e.webhooksPing="/webhooks/subscriptions/{subscriptionId}/ping",e.webhookSubscriptions="/webhooks/subscriptions",e.webhookSubscriptionsId="/webhooks/subscriptions/{webhookId}",e.webhookTopics="/webhooks/topics",e.webhookLogs="/webhooks/logs",e.memberInviteAccept="/marketplace/developers/{developerId}/members/{memberId}/accept",e.memberInviteReject="/marketplace/developers/{developerId}/members/{memberId}/reject",e.getPipelineEnvironment="/pipeline/{pipelineId}/parameter",e.upsertPipelineEnvironment="/pipeline/{pipelineId}/parameter",e.publicWebhookKey="/webhooks/signing",e.appConsents="/marketplace/apps/{appId}/revisions/{revisionId}/consents",e.appConsentResend="/marketplace/apps/{appId}/revisions/{revisionId}/consents/{consentId}/resend",e.appConsentApprove="/marketplace/apps/{appId}/revisions/{revisionId}/consents/{consentId}/approve",e.cmsConfig="/cms/config",e.cmsConfigLive="/",e.cmsConfigPost="/cms/config/{id}",e.propertyById="/properties/{propertyId}",e.properties="/properties",e.payments="/payments",e.paymentById="/payments/{paymentId}",e.appConsentApproveEmail="/marketplace/apps/{id}/revisions/{revisionId}/consents/{consentId}/resend",e.userInfo="/organisations/users/info",e.userById="/organisations/users/{userId}",e.appByIdFeature="/marketplace/apps/{appId}/feature",e.customers="/marketplace/customers",e.approvals="/marketplace/approvals",e.revisionById="/marketplace/apps/{appId}/revisions/{revisionId}",e.revisionApprove="/marketplace/apps/{appId}/revisions/{revisionId}/approve",e.revisionReject="/marketplace/apps/{appId}/revisions/{revisionId}/reject",e.users="/organisations/users",e.userAuthenticators="/organisations/users/{userId}/authenticators",e.userAuthenticatorById="/organisations/users/{userId}/authenticators/{authenticatorId}",e.userAuthenticatorVerify="/organisations/users/{userId}/authenticators/{authenticatorId}/verify",e.referralTypes="/referrals/types",e.orgGroups="/organisations/organisations/{orgId}/officegroups",e.paymentsConfigPrivate="/config/private/{clientCode}",e.paymentReceiptPrivate="/receipt/private/{paymentId}",e.paymentsSession="/session",e.paymentRequest="/request/{paymentId}",e.opayoTransactions="/opayo/private/transactions",e.opayoMerchantKeys="/opayo/private/merchant-session-keys",e.authClient="/marketplace/apps/{appId}/authClient",e.userGroups="/organisations/groups",e.userByIdPassword="/organisations/users/{userId}/password",e.userEmailSuppressions="/organisations/emailSuppressions/{userId}",e.orgs="/organisations/organisations",e.groupIdMembers="/organisations/groups/{groupId}/members",e.groupIdMembersDelete="/organisations/groups/{groupId}/members/{userId}",e.getOrgConfig="/organisations/organisations/{orgId}/configuration/platform",e.installationsId="/marketplace/installations/{installationId}",e))(s||{}),ae=(e=>(e.getApps="getApps",e.getPipeline="getPipeline",e.paginatePipeline="paginatePipeline",e.getPipelineDeployments="getPipelineDeployments",e.getProducts="getProducts",e.getSandboxes="getSandboxes",e.getAppPermissions="getAppPermissions",e.getApiKeysByUserId="getApiKeysByUserId",e.getMember="getMember",e.deleteApiKey="deleteApiKey",e.getBillingDataByMonth="getBillingDataByMonth",e.getBillingDataByPeriod="getBillingDataByPeriod",e.getInstallations="getInstallations",e.getDeveloperMembers="getDeveloperMembers",e.getCustomersById="getCustomersById",e.getAppById="getAppById",e.getAppSecret="getAppSecret",e.getDesktopIntegrationTypes="getDesktopIntegrationTypes",e.getAppCategories="getAppCategories",e.getAppRevisions="getAppRevisions",e.getDeveloper="getDeveloper",e.getTrafficStats="getTrafficStats",e.getSubscriptions="getSubscriptions",e.getWebhookSubscriptions="getWebhookSubscriptions",e.getWebhookTopics="getWebhookTopics",e.getWebhookLogs="getWebhookLogs",e.getPipelineEnvironment="getPipelineEnvironment",e.getPublicWebhookKey="getPublicWebhookKey",e.getRevisionConsents="getRevisionConsents",e.getAppMarketAdmin="getAppMarketAdmin",e.getAppMarketAdminLive="getAppMarketAdminLive",e.postAppMarketAdmin="postAppMarketAdmin",e.getPropertyById="getPropertyById",e.getProperties="getProperties",e.getPayments="getPayments",e.getPaymentById="getPaymentById",e.getPaymentWithPropertyById="getPaymentWithPropertyById",e.getUserInfo="getUserInfo",e.getUserById="getUserById",e.getCustomers="getCustomers",e.getDevelopers="getDevelopers",e.getApprovals="getApprovals",e.getRevisionById="getRevisionById",e.getDwAccounts="getDwAccounts",e.getDwAccountById="getDwAccountById",e.getDwDataSets="getDwDataSets",e.getDwShares="getDwShares",e.getUsers="getUsers",e.getUserAuthenticators="getUserAuthenticators",e.getReferralTypes="getReferralTypes",e.getGroupsByOrgId="getGroupsByOrgId",e.getPaymentsClientConfig="getPaymentsClientConfig",e.getUserGroups="getUserGroups",e.getUserSuppressionList="getUserSuppressionList",e.getOrgs="getOrgs",e.getOrgConfig="getOrgConfig",e))(ae||{}),We={getApps:{api:r.platform,path:s.apps,errorMessage:"Something went wrong fetching apps - this error has been logged"},getDwAccounts:{api:r.platform,path:s.dwAccounts,errorMessage:"Something went wrong fetching accounts - this error has been logged"},getDwDataSets:{api:r.platform,path:s.dwDataSets,errorMessage:"Something went wrong fetching data sets - this error has been logged"},getDwShares:{api:r.platform,path:s.dwShares,errorMessage:"Something went wrong fetching shares - this error has been logged"},getDwAccountById:{api:r.platform,path:s.dwAccountsId,errorMessage:"Something went wrong fetching account - this error has been logged"},getAppMarketAdmin:{api:r.appMarketCms,path:s.cmsConfig,errorMessage:"Something went wrong fetching config - this error has been logged"},getAppMarketAdminLive:{api:r.appMarketCms,path:s.cmsConfigLive,errorMessage:"Something went wrong fetching config - this error has been logged"},postAppMarketAdmin:{api:r.appMarketCms,path:s.cmsConfigPost,errorMessage:"Something went wrong updating config - this error has been logged"},getAppById:{api:r.platform,path:s.appsId,errorMessage:"Something went wrong fetching app details"},getPipeline:{api:r.pipeline,path:s.getPipeline},getPipelineDeployments:{api:r.pipeline,path:s.getPipelineDeployments},getProducts:{api:r.platform,path:s.products,errorMessage:"Something went wrong fetching products"},getSandboxes:{api:r.platform,path:s.sandboxes,errorMessage:"Something went wrong fetching sandboxes"},getAppPermissions:{api:r.platform,path:s.appPermissions,errorMessage:"Something went wrong fetching app permissions"},getApiKeysByUserId:{api:r.apiKey,path:s.getApiKeyByUserId},getMember:{api:r.platform,path:s.getMember},deleteApiKey:{api:r.apiKey,path:s.deleteApiKey},getBillingDataByMonth:{api:r.platform,path:s.billingDataByMonth,errorMessage:"Something went wrong fetching billing data"},getBillingDataByPeriod:{api:r.platform,path:s.getBillingDataByPeriod,errorMessage:"Something went wrong fetching billing data"},getInstallations:{api:r.platform,path:s.installations,errorMessage:"Something went wrong fetching installations"},getDeveloperMembers:{api:r.platform,path:s.getMember,errorMessage:"Something went wrong fetching developer org members"},getDeveloper:{api:r.platform,path:s.developerById,errorMessage:"Something went wrong fetching developer org"},getCustomersById:{api:r.platform,path:s.customersById,errorMessage:"Something went wrong fetching your customer information"},getAppSecret:{api:r.platform,path:s.appSecretById,errorMessage:"Something went wrong fetching your client secret"},getDesktopIntegrationTypes:{api:r.platform,path:s.desktopIntegrationTypes,errorMessage:"Something went wrong fetching the desktop integration options"},getAppCategories:{api:r.platform,path:s.appCategories,errorMessage:"Something went wrong fetching the category options"},getAppRevisions:{api:r.platform,path:s.appRevisions,errorMessage:"Something went wrong fetching app revisions"},paginatePipeline:{api:r.pipeline,path:s.paginatePipeline,errorMessage:"Something went wrong fetching pipelines"},getTrafficStats:{api:r.platform,path:s.trafficStatistics,errorMessage:"Something went wrong fetching API calls data"},getSubscriptions:{api:r.platform,path:s.subscriptions,errorMessage:"Something went wrong fetching subscriptions"},getWebhookSubscriptions:{api:r.platform,path:s.webhookSubscriptions,errorMessage:"Something went wrong fetching webhook subscriptions"},getWebhookTopics:{api:r.platform,path:s.webhookTopics,errorMessage:"Something went wrong fetching webhook topics"},getWebhookLogs:{api:r.platform,path:s.webhookLogs,errorMessage:"Something went wrong fetching webhook logs"},getPipelineEnvironment:{api:r.pipeline,path:s.getPipelineEnvironment},getPublicWebhookKey:{api:r.platform,path:s.publicWebhookKey},getRevisionConsents:{api:r.platform,path:s.appConsents,errorMessage:"Failed to fetch app revision consents"},getPropertyById:{api:r.platform,path:s.propertyById,errorMessage:"Failed to fetch property, this has been logged. Please try refreshing the page."},getProperties:{api:r.platform,path:s.properties,errorMessage:"Failed to fetch properties, this has been logged. Please try refreshing the page."},getPayments:{api:r.platform,path:s.payments,errorMessage:"Failed to fetch payments, this has been logged. Please try refreshing the page."},getPaymentById:{api:r.platform,path:s.paymentById,errorMessage:"Failed to fetch payment, this has been logged. Please try refreshing the page."},getPaymentWithPropertyById:{api:r.payments,path:s.paymentById,errorMessage:"Failed to fetch payment, this has been logged. Please try refreshing the page."},getUserInfo:{api:r.platform,path:s.userInfo,errorMessage:"Failed to fetch user info, this has been logged."},getUserById:{api:r.platform,path:s.userById,errorMessage:"Failed to fetch user info, this has been logged."},getCustomers:{api:r.platform,path:s.customers,errorMessage:"Failed to fetch customers, this has been logged."},getDevelopers:{api:r.platform,path:s.developers,errorMessage:"Failed to fetch developers, this has been logged."},getApprovals:{api:r.platform,path:s.approvals,errorMessage:"Failed to fetch approvals, this has been logged."},getRevisionById:{api:r.platform,path:s.revisionById,errorMessage:"Failed to fetch revision, this has been logged."},getUsers:{api:r.platform,path:s.users,errorMessage:"Failed to fetch users, this has been logged."},getUserAuthenticators:{api:r.platform,path:s.userAuthenticators,errorMessage:"Failed to fetch authenticators, this has been logged."},getReferralTypes:{api:r.platform,path:s.referralTypes,errorMessage:"Failed to fetch referrals, this has been logged."},getGroupsByOrgId:{api:r.platform,path:s.orgGroups,errorMessage:"Failed to fetch groups, this has been logged."},getPaymentsClientConfig:{api:r.payments,path:s.paymentsConfigPrivate,errorMessage:"Failed to fetch client config this has been logged."},getUserGroups:{api:r.platform,path:s.userGroups,errorMessage:"Failed to fetch groups, this has been logged."},getUserSuppressionList:{api:r.platform,path:s.userEmailSuppressions,errorMessage:"Failed to fetch email suppression list, this has been logged."},getOrgs:{api:r.platform,path:s.orgs,errorMessage:"Failed to fetch orgs list, this has been logged."},getOrgConfig:{api:r.platform,path:s.getOrgConfig,errorMessage:"Failed to fetch org config, this has been logged."}},ie=(e=>(e.updatePipeline="updatePipeline",e.createPipelineDeployment="createPipelineDeployment",e.createPipeline="createPipeline",e.createApp="createApp",e.createApiKeyByMember="createApiKeyByMember",e.updateDeveloper="updateDeveloper",e.deleteDeveloper="deleteDeveloper",e.updateCustomer="updateCustomer",e.createDeveloper="createDeveloper",e.deleteApp="deleteApp",e.createAppRevsion="createAppRevsion",e.deleteOfficeGroup="deleteOfficeGroup",e.deletePipeline="deletePipeline",e.fileUpload="fileUpload",e.terminateInstallation="terminateInstallation",e.cancelRevision="cancelRevision",e.updateMember="updateMember",e.deleteMember="deleteMember",e.inviteMember="inviteMember",e.deleteSubscription="deleteSubscription",e.createSubscription="createSubscription",e.pingWebhook="pingWebhook",e.createWebhook="createWebhook",e.updateWebhook="updateWebhook",e.deleteWebhook="deleteWebhook",e.acceptInviteMember="acceptInviteMember",e.rejectInviteMember="rejectInviteMember",e.upsertPipelineEnvironment="upsertPipelineEnvironment",e.createConsentEmails="createConsentEmails",e.resendConsentEmail="resendConsentEmail",e.approveConsent="approveConsent",e.installApp="installApp",e.appConsentApproveEmail="appConsentApproveEmail",e.updateUser="updateUser",e.featureApp="featureApp",e.unFeatureApp="unFeatureApp",e.approveRevision="approveRevision",e.rejectRevision="rejectRevision",e.createDwAccount="createDwAccount",e.updateDwAccount="updateDwAccount",e.deleteDwAccount="deleteDwAccount",e.createDwRequest="createDwRequest",e.deleteDwShare="deleteDwShare",e.refreshDwShare="refreshDwShare",e.createUserAuthenticator="createUserAuthenticator",e.verifyUserAuthenticator="verifyUserAuthenticator",e.deleteUserAuthenticator="deleteUserAuthenticator",e.submitPrivatePaymentReceipt="submitPrivatePaymentReceipt",e.privatePaymentUpdate="privatePaymentUpdate",e.paymentsSessionCreate="paymentsSessionCreate",e.paymentRequestCreate="paymentRequestCreate",e.paymentsClientConfigCreate="paymentsClientConfigCreate",e.paymentsClientConfigUpdate="paymentsClientConfigUpdate",e.paymentsClientConfigDelete="paymentsClientConfigDelete",e.getOpayoMerchantKey="getOpayoMerchantKey",e.submitOpayoTransaction="submitOpayoTransaction",e.createAuthClient="createAuthClient",e.deleteAuthClient="deleteAuthClient",e.deleteUserPassword="deleteUserPassword",e.deleteUserSuppressionList="deleteUserSuppressionList",e.removeMemberFromGroup="removeMemberFromGroup",e.addMemberToGroup="addMemberToGroup",e.updatePlatformConfig="updatePlatformConfig",e.updateApp="updateApp",e.updateInstallation="updateInstallation",e))(ie||{});let Ae,ke,Ce,Pe;Ge={updatePipeline:{api:r.pipeline,path:s.updatePipeline,errorMessage:"Something went wrong updating your pipleline, this has been logged. Please check for errors and resubmit.",successMessage:"Your pipeline has been successfully updated"},createPipeline:{api:r.pipeline,path:s.createPipeline,errorMessage:"Something went wrong creating your pipleline, this has been logged. Please check for errors and resubmit.",successMessage:"Your pipeline has been successfully created"},createPipelineDeployment:{api:r.pipeline,path:s.createPipelineDeployments},createApp:{api:r.platform,path:s.apps,errorMessage:"Something went wrong creating your app, please check for errors and resubmit.",successMessage:"Your app has been successfully created"},deleteApp:{api:r.platform,path:s.appsId,errorMessage:"Something went wrong deleting your app, please try again.",successMessage:"Your app has been successfully deleted"},createApiKeyByMember:{api:r.apiKey,path:s.createApiKeyByMember},updateDeveloper:{api:r.platform,path:s.developerById,errorMessage:"Developer update failed, please check for errors and try again.",successMessage:"Your developer record has been successfully updated"},deleteDeveloper:{api:r.platform,path:s.developerById,errorMessage:"Developer delete failed, please check for errors and try again.",successMessage:"Developer successfully deleted"},updateCustomer:{api:r.platform,path:s.customersById,errorMessage:"Update to terms failed, please try again"},createDeveloper:{api:r.platform,path:s.developers,errorMessage:"Failed to create developer organisation, please try again",successMessage:"Your developer account has been successfully created"},createAppRevsion:{api:r.platform,path:s.appRevision,errorMessage:"Failed to create an app revision, please check for errors and try again",successMessage:"App revision created successfully"},deleteOfficeGroup:{api:r.platform,path:s.officeGroupId,errorMessage:"Failed to delete this office group, please try again",successMessage:"Successfully deleted office group"},deletePipeline:{api:r.pipeline,path:s.getPipeline,errorMessage:"Failed to delete Pipeline",successMessage:"Pipeline deleting"},fileUpload:{api:r.platform,path:s.fileUpload,errorMessage:"Failed to upload one of your files"},terminateInstallation:{api:r.platform,path:s.terminateInstallation,errorMessage:"Failed to uninstall your app",successMessage:"App successfully uninstalled"},cancelRevision:{api:r.platform,path:s.cancelRevision,errorMessage:"Failed to cancel pending revision",successMessage:"Successfully cancelled pending revision"},updateMember:{api:r.platform,path:s.memberById,errorMessage:"Failed to update developer organisation member",successMessage:"Successfully updated developer organisation member"},deleteMember:{api:r.platform,path:s.memberById,errorMessage:"Failed to delete developer organisation member",successMessage:"Successfully developer developer organisation member"},inviteMember:{api:r.platform,path:s.getMember,errorMessage:"Failed to invite member, this has been logged. Please try again.",successMessage:"Successfully invited developer organisation member"},deleteSubscription:{api:r.platform,path:s.subscriptionsById,errorMessage:"Failed to cancel subscription, this has been logged. Please try again.",successMessage:"Successfully cancelled subscription"},createSubscription:{api:r.platform,path:s.subscriptions,errorMessage:"Failed to create subscription, this has been logged. Please try again.",successMessage:"Successfully created subscription"},pingWebhook:{api:r.platform,path:s.webhooksPing,errorMessage:"Failed to ping webhook, this has been logged. Please try again.",successMessage:"Successfully pinged webhook"},createWebhook:{api:r.platform,path:s.webhookSubscriptions,errorMessage:"Failed to create webhook, this has been logged. Please try again.",successMessage:"Successfully created webhook"},updateWebhook:{api:r.platform,path:s.webhookSubscriptionsId,errorMessage:"Failed to update webhook, this has been logged. Please try again.",successMessage:"Successfully updated webhook"},deleteWebhook:{api:r.platform,path:s.webhookSubscriptionsId,errorMessage:"Failed to delete webhook, this has been logged. Please try again.",successMessage:"Successfully deleted webhook"},acceptInviteMember:{api:r.platform,path:s.memberInviteAccept,errorMessage:"Failed to accept invite, this has been logged. Please try again.",successMessage:"Successfully accepted invite"},rejectInviteMember:{api:r.platform,path:s.memberInviteReject,errorMessage:"Failed to reject invite, this has been logged. Please try again.",successMessage:"Successfully rejected invite"},upsertPipelineEnvironment:{api:r.pipeline,path:s.upsertPipelineEnvironment,successMessage:"Added Environment variable",errorMessage:"Failed to add Environment variable"},createConsentEmails:{api:r.platform,path:s.appConsents,successMessage:"Sent consent request emails",errorMessage:"Failed to send consent request emails"},resendConsentEmail:{api:r.platform,path:s.appConsentResend,successMessage:"Resent consent request email",errorMessage:"Failed to resense consent request email"},approveConsent:{api:r.platform,path:s.appConsentApprove,successMessage:"App permission change request accepted",errorMessage:"Failed to accept app permission change, this has been logged. Please try again."},installApp:{api:r.platform,path:s.installations,successMessage:"Successfully installed app",errorMessage:"Failed to install app, this has been logged. Please try again."},appConsentApproveEmail:{api:r.platform,path:s.appConsentApproveEmail,successMessage:"Successfully sent email",errorMessage:"Failed to send to new email address. Please try again"},updateUser:{api:r.platform,path:s.userById,successMessage:"Successfully updated user info.",errorMessage:"Failed to update user info."},featureApp:{api:r.platform,path:s.appByIdFeature,successMessage:"Successfully updated app.",errorMessage:"Failed to update app."},unFeatureApp:{api:r.platform,path:s.appByIdFeature,successMessage:"Successfully updated app.",errorMessage:"Failed to update app."},approveRevision:{api:r.platform,path:s.revisionApprove,successMessage:"Successfully approved revision.",errorMessage:"Failed to approve revision."},rejectRevision:{api:r.platform,path:s.revisionReject,successMessage:"Successfully rejected revision.",errorMessage:"Failed to reject revision."},createDwAccount:{api:r.platform,path:s.dwAccounts,successMessage:"Successfully created account.",errorMessage:"Failed to create account."},updateDwAccount:{api:r.platform,path:s.dwAccountsId,successMessage:"Successfully updated account.",errorMessage:"Failed to update account."},deleteDwAccount:{api:r.platform,path:s.dwAccountsId,successMessage:"Successfully deleted account.",errorMessage:"Failed to delete account."},createDwRequest:{api:r.platform,path:s.dwRequests,successMessage:"Successfully created data share.",errorMessage:"Failed to create data share."},deleteDwShare:{api:r.platform,path:s.dwSharesId,successMessage:"Successfully deleted data share.",errorMessage:"Failed to delete data share."},refreshDwShare:{api:r.platform,path:s.dwShareRefresh,successMessage:"Successfully refreshed data share.",errorMessage:"Failed to refresh data share."},createUserAuthenticator:{api:r.platform,path:s.userAuthenticators,successMessage:"Successfully fetched QR code.",errorMessage:"Failed to fetch QR code. This error has been logged"},deleteUserAuthenticator:{api:r.platform,path:s.userAuthenticatorById,successMessage:"Successfully reset authenticator.",errorMessage:"Failed to reset authenticator. This error has been logged"},verifyUserAuthenticator:{api:r.platform,path:s.userAuthenticatorVerify,successMessage:"Successfully verified authenticator.",errorMessage:"Failed to verify authenticator. This error has been logged"},submitPrivatePaymentReceipt:{api:r.payments,path:s.paymentReceiptPrivate,successMessage:"Successfully sent receipt request.",errorMessage:"Failed to send receipt. This error has been logged"},privatePaymentUpdate:{api:r.platform,path:s.paymentById,errorMessage:"Failed to update payment request. This error has been logged"},paymentsSessionCreate:{api:r.payments,path:s.paymentsSession,errorMessage:"Failed to create payment request. This error has been logged"},paymentRequestCreate:{api:r.payments,path:s.paymentRequest,successMessage:"Successfully created payment request.",errorMessage:"Failed to create payment request. This error has been logged"},paymentsClientConfigCreate:{api:r.payments,path:s.paymentsConfigPrivate,successMessage:"Successfully created a client configuration.",errorMessage:"Failed to create payment config. This error has been logged"},paymentsClientConfigUpdate:{api:r.payments,path:s.paymentsConfigPrivate,successMessage:"Successfully updated a client configuration.",errorMessage:"Failed to update payment config. This error has been logged"},paymentsClientConfigDelete:{api:r.payments,path:s.paymentsConfigPrivate,successMessage:"Successfully deleted a client configuration.",errorMessage:"Failed to delete payment config. This error has been logged"},submitOpayoTransaction:{api:r.payments,path:s.opayoTransactions,errorMessage:"Failed to submit payment transaction. This error has been logged"},getOpayoMerchantKey:{api:r.payments,path:s.opayoMerchantKeys,errorMessage:"Failed to configure app for payments. This error has been logged"},createAuthClient:{api:r.platform,path:s.authClient,errorMessage:"Failed to create new auth credentials. This error has been logged"},deleteAuthClient:{api:r.platform,path:s.authClient,errorMessage:"Failed to delete old auth credentials. This error has been logged"},deleteUserPassword:{api:r.platform,path:s.userByIdPassword,successMessage:"Successfully reset password.",errorMessage:"Failed to reset password."},deleteUserSuppressionList:{api:r.platform,path:s.userEmailSuppressions,successMessage:"Successfully removed user from list.",errorMessage:"Failed to remove user from list."},removeMemberFromGroup:{api:r.platform,path:s.groupIdMembersDelete,successMessage:"Successfully removed user from group.",errorMessage:"Failed to remove user from group."},addMemberToGroup:{api:r.platform,path:s.groupIdMembers,successMessage:"Successfully added user to group.",errorMessage:"Failed to remove user from group."},updatePlatformConfig:{api:r.platform,path:s.getOrgConfig,successMessage:"Successfully updated platform config.",errorMessage:"Failed to update platform config."},updateApp:{api:r.platform,path:s.appsId,successMessage:"Successfully updated app",errorMessage:"Failed to update app"},updateInstallation:{api:r.platform,path:s.installationsId,successMessage:"Successfully updated installation",errorMessage:"Failed to update installation"}},Ae=(e,t,a,i)=>()=>{if(e.length){const n=e.map(p=>({value:p[a],name:p[t]}));n.length&&i(n)}},ke=(e,t,a,i,n,p)=>()=>{const c=t.filter(d=>e.includes(d.value)),g=a.map(d=>({value:d[n],name:d[i]})),l=[...c,...g],h=[...new Set([...l.map(d=>JSON.stringify(d))])].map(d=>JSON.parse(d));h.length&&p(h)},Ke=u.forwardRef(({label:e,errorString:t,defaultList:a,currentValues:i,noneSelectedLabel:n,queryParams:p,reapitConnectBrowserSession:c,action:g,valueKey:l,nameKey:h,dataListKey:d,searchKey:y,...I},_)=>{const[R,T]=u.useState(""),[D,x]=u.useState([]),B=u.useCallback(Qt(F=>T(F.target.value),500),[500]),L=p??{},[E,$]=ge({reapitConnectBrowserSession:c,action:g,queryParams:{...L,[y]:R},fetchWhenTrue:[R]}),S=E?E[d]:[],K=a.map(F=>F[l]).filter(Boolean);return u.useEffect(Ae(a,h,l,x),[a]),u.useEffect(ke(i,D,S,h,l,x),[R,E]),o.jsxs(Xt,{children:[o.jsx(Zt,{className:te,onChange:B,icon:"searchSystem",placeholder:"Search",label:e??"Search"}),$&&o.jsx(es,{className:te}),o.jsx(ts,{className:te,noneSelectedLabel:n||"No items selected",defaultValues:[...new Set(K)],options:D,ref:_,...I}),t&&o.jsx(se,{isFullWidth:!0,isExpanded:!0,intent:"danger",isInline:!0,children:t}),E&&!S.length&&o.jsx(se,{isFullWidth:!0,isExpanded:!0,intent:"primary",isInline:!0,children:"No results found for your search query"})]})}),Ce=async e=>{try{const t=re(e),a=t.aud,i=new ss({issuer:t.iss,audience:Array.isArray(a)?a[0]:a,leeway:300}),n=await new Promise((c,g)=>i.verify(e,(l,h)=>{l&&g(l),c(h)})),p=Math.floor(new Date().valueOf()/1e3);if(p>n.exp+300||p+300<n.auth_time)throw new Error("Id verification claim expired");if(n.token_use!=="id")throw new Error("Id verification claim is not an id token");return{name:n.name,email:n.email,agencyCloudId:n["custom:reapit:agencyCloudId"]||null,developerId:n["custom:reapit:developerId"]||null,clientId:n["custom:reapit:clientCode"]||null,adminId:n["custom:reapit:marketAdmin"]||null,userCode:n["custom:reapit:userCode"]||null,groups:n["cognito:groups"]||[],orgName:n["custom:reapit:orgName"]||null,orgId:n["custom:reapit:orgId"]||null,offGroupIds:n["custom:reapit:offGroupIds"]||null,offGrouping:!!(n["custom:reapit:offGrouping"]&&n["custom:reapit:offGrouping"]==="true"),offGroupName:n["custom:reapit:offGroupName"]||null,officeId:n["custom:reapit:officeId"]||null,orgProduct:n["custom:reapit:orgProduct"]||null}}catch(t){console.error("Reapit Connect Session error:",t.message)}},Pe=async e=>Ce(e);const w=class w{constructor({connectClientId:t,connectOAuthUrl:a,connectLoginRedirectPath:i,connectLogoutRedirectPath:n,connectApplicationTimeout:p}){m(this,"connectOAuthUrl");m(this,"connectClientId");m(this,"session");m(this,"connectLoginRedirectPath");m(this,"connectLogoutRedirectPath");m(this,"connectApplicationTimeout");m(this,"idleTimeoutCountdown");m(this,"refreshTokenStorage");m(this,"fetching");this.connectOAuthUrl=a,this.connectClientId=t,this.connectLoginRedirectPath=`${window.location.origin}${i||""}`,this.connectLogoutRedirectPath=`${window.location.origin}${n||n===""?n:"/login"}`,this.connectApplicationTimeout=p??w.APP_DEFAULT_TIMEOUT,this.refreshTokenStorage=this.connectIsDesktop?window.localStorage:window.sessionStorage,this.fetching=!1,this.session=null,this.idleTimeoutCountdown=this.connectApplicationTimeout,this.connectBindPublicMethods(),this.setIdleTimeoutListeners()}connectBindPublicMethods(){this.connectSession=this.connectSession.bind(this),this.connectAuthorizeRedirect=this.connectAuthorizeRedirect.bind(this),this.connectLoginRedirect=this.connectLoginRedirect.bind(this),this.connectLogoutRedirect=this.connectLogoutRedirect.bind(this),this.connectClearSession=this.connectClearSession.bind(this)}setIdleTimeoutListeners(){if(this.connectIsDesktop)return;const t=()=>{clearTimeout(this.idleTimeoutCountdown),this.idleTimeoutCountdown=window.setTimeout(this.connectLogoutRedirect,this.connectApplicationTimeout)};document.onmousemove=t,document.onkeypress=t,document.ontouchstart=t}get refreshToken(){var t;return((t=this.session)==null?void 0:t.refreshToken)??this.refreshTokenStorage.getItem(`${w.REFRESH_TOKEN_KEY}_${this.userName}_${this.connectClientId}`)}get userName(){var t;return((t=this.session)==null?void 0:t.loginIdentity.email)??this.refreshTokenStorage.getItem(`${w.USER_NAME_KEY}_${this.connectClientId}`)}setRefreshToken(t){t.refreshToken&&t.loginIdentity&&t.loginIdentity.email&&this.refreshTokenStorage.setItem(`${w.REFRESH_TOKEN_KEY}_${t.loginIdentity.email}_${this.connectClientId}`,t.refreshToken),t.loginIdentity&&t.loginIdentity.email&&this.refreshTokenStorage.setItem(`${w.USER_NAME_KEY}_${this.connectClientId}`,t.loginIdentity.email)}clearRefreshToken(){this.refreshTokenStorage.removeItem(`${w.REFRESH_TOKEN_KEY}_${this.userName}_${this.connectClientId}`),this.refreshTokenStorage.removeItem(`${w.USER_NAME_KEY}_${this.connectClientId}`)}get tokenRefreshEndpoint(){return`${this.connectOAuthUrl}/token?grant_type=refresh_token&client_id=${this.connectClientId}&refresh_token=${this.refreshToken}&redirect_uri=${this.connectLoginRedirectPath}`}get tokenCodeEndpoint(){return`${this.connectOAuthUrl}/token?grant_type=authorization_code&client_id=${this.connectClientId}&code=${this.authCode}&redirect_uri=${this.connectLoginRedirectPath}`}get sessionExpired(){if(this.session){const t=re(this.session.accessToken).exp,a=Math.round(new Date().getTime()/1e3)+300;return t?t<a:!0}return!0}get authCode(){return new URLSearchParams(window.location.search).get("code")||null}async connectGetSession(t){var a;try{const i=await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if(!i||i&&i.error)return this.handleError("Error fetching session from Reapit Connect ");const n=await Pe(i.id_token);if(!n)return this.handleError("Login identity was not verified");const{access_token:p,refresh_token:c,id_token:g}=i;return{accessToken:p,refreshToken:c||(this.session?(a=this.session)==null?void 0:a.refreshToken:""),idToken:g,loginIdentity:n}}catch(i){return this.handleError(`Reapit Connect Token Error ${i.message}`)}}handleError(t){this.clearRefreshToken(),typeof t=="string"?console.error("Reapit Connect Error:",t):console.error(t)}get connectInternalRedirect(){const t=new URLSearchParams(window.location.search).get("state");if(!t)return null;const a=this.refreshTokenStorage.getItem(t);return a?decodeURIComponent(a):null}get connectIsDesktop(){return!!window[w.GLOBAL_KEY]}get connectHasSession(){return!!(this.session&&!this.sessionExpired)}connectAuthorizeRedirect(t){const a=t||this.connectLoginRedirectPath,i=new URLSearchParams(window.location.search);i.delete("code");const n=i?`?${i.toString()}`:"",p=encodeURIComponent(`${window.location.pathname}${n}`),c=rs();this.refreshTokenStorage.setItem(c,p),window.location.href=`${this.connectOAuthUrl}/authorize?response_type=code&client_id=${this.connectClientId}&redirect_uri=${a}&state=${c}`}connectLoginRedirect(t){const a=t||this.connectLoginRedirectPath;this.clearRefreshToken(),window.location.href=`${this.connectOAuthUrl}/login?response_type=code&client_id=${this.connectClientId}&redirect_uri=${a}`}connectLogoutRedirect(t){const a=t||this.connectLogoutRedirectPath;this.clearRefreshToken(),window.location.href=`${this.connectOAuthUrl}/logout?client_id=${this.connectClientId}&logout_uri=${a}`}connectClearSession(){this.session=null}async connectSession(){if(!this.sessionExpired)return this.session;if(!this.fetching){this.fetching=!0;try{const t=this.refreshToken?this.tokenRefreshEndpoint:this.authCode?this.tokenCodeEndpoint:null;if(!t)return this.connectAuthorizeRedirect();const a=await this.connectGetSession(t);if(this.fetching=!1,a)return this.session=!a.refreshToken&&this.refreshToken?{...a,refreshToken:this.refreshToken}:a,this.setRefreshToken(a),this.session;this.connectAuthorizeRedirect()}catch(t){return this.handleError(`Reapit Connect Session error ${t.message}`)}}}};m(w,"GLOBAL_KEY","__REAPIT_MARKETPLACE_GLOBALS__"),m(w,"REFRESH_TOKEN_KEY","REAPIT_REFRESH_TOKEN"),m(w,"USER_NAME_KEY","REAPIT_LAST_AUTH_USER"),m(w,"APP_DEFAULT_TIMEOUT",108e5);let Y=w;class ht{constructor({connectClientId:t,connectClientSecret:a,connectOAuthUrl:i}){m(this,"connectOAuthUrl");m(this,"connectClientId");m(this,"connectClientSecret");m(this,"accessToken");this.connectOAuthUrl=i,this.connectClientId=t,this.connectClientSecret=a,this.accessToken=null,this.connectAccessToken=this.connectAccessToken.bind(this)}get accessTokenExpired(){if(this.accessToken){const t=re(this.accessToken).exp,a=Math.round(new Date().getTime()/1e3)+300;return t?t<a:!0}return!0}async connectGetAccessToken(){try{const t=as.from(`${this.connectClientId}:${this.connectClientSecret}`).toString("base64"),a=await Ne.post(`${this.connectOAuthUrl}/token?grant_type=client_credentials&client_id=${this.connectClientId}`,{},{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${t}`}});if(a.data.error)throw new Error(a.data.error);if(a.data&&a.data.access_token)return a.data.access_token;throw new Error("No access token returned by Reapit Connect")}catch(t){console.error("Reapit Connect Token Error",t.message)}}async connectAccessToken(){if(!this.accessTokenExpired)return this.accessToken;try{const t=await this.connectGetAccessToken();if(t)return this.accessToken=t,t;throw new Error("No session returned from Reapit Connect")}catch(t){console.error("Reapit Connect Session error",t.message)}}}m(ht,"TOKEN_EXPIRY",Math.round(new Date().getTime()/1e3)+3300);let Re,Te,Ee,_e,De,xe,H,M;Re=$e("div")({name:"LoginContainer",class:"login-container",propsAsIs:!1}),Te=$e("div")({name:"LoginContentWrapper",class:"login-content-wrapper",propsAsIs:!1}),Ee=(e,t)=>()=>{const a=t?`${window.location.origin}${t}`:void 0;e.connectLoginRedirect(a)},_e=({appName:e,reapitConnectBrowserSession:t,redirectPath:a})=>{const i=u.useCallback(Ee(t,a),[]);return o.jsx(Re,{children:o.jsxs(Te,{children:[o.jsx(Z,{className:os,height:"40px",width:"200px",icon:"reapitLogoInfographic"}),o.jsxs(Be,{isFlexColumn:!0,children:[o.jsx(ee,{hasCenteredText:!0,children:"Welcome"}),o.jsx(is,{hasCenteredText:!0,children:e})]}),o.jsx(Le,{alignment:"center",children:o.jsx(z,{onClick:i,intent:"primary",size:3,children:"Login With Reapit"})})]})})},De="modulepreload",xe=function(e){return"/"+e},H={},M=function(e,t,a){let i=Promise.resolve();if(t&&t.length>0){const n=document.getElementsByTagName("link");i=Promise.all(t.map(p=>{if(p=xe(p),p in H)return;H[p]=!0;const c=p.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(a)for(let h=n.length-1;h>=0;h--){const d=n[h];if(d.href===p&&(!c||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${g}`))return;const l=document.createElement("link");if(l.rel=c?"stylesheet":De,c||(l.as="script",l.crossOrigin=""),l.href=p,document.head.appendChild(l),c)return new Promise((h,d)=>{l.addEventListener("load",h),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${p}`)))})}))}return i.then(()=>e()).catch(n=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=n,window.dispatchEvent(p),!p.defaultPrevented)throw n})},f={ROOT:"/",LOGIN:"/login",APPROVALS:"/approvals",USAGE:"/usage",BILLING:"/billing",APPS:"/apps",DEV_MANAGEMENT:"/dev-management",INSTALLATIONS:"/installations",CUSTOMERS:"/customers",AUTHENTICATION:"/authentication",SUBSCRIPTIONS:"/subscriptions",FOUR_O_FOUR:"/404",OK:"/ok",TRAFFIC:"/traffic",IAAS:"/iaas"};var J={appEnv:"local",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerPortalUri:"https://developers.dev.paas.reapit.cloud",appMarketUri:"https://marketplace.dev.paas.reapit.cloud"};de=new Y({connectClientId:J.connectClientId,connectOAuthUrl:J.connectOAuthUrl,connectLoginRedirectPath:f.APPS,connectUserPoolId:J.connectUserPoolId}),ns();const A=k.lazy(()=>b(()=>M(()=>import("./private-route-wrapper-diRSoV28.js"),__vite__mapDeps([0,1,2,3])))),ut=k.lazy(()=>b(()=>M(()=>import("./index--rtpHY-S.js"),__vite__mapDeps([4,1,5,6,3,7,8,2,9])))),mt=k.lazy(()=>b(()=>M(()=>import("./index-Vq8NNhir.js"),__vite__mapDeps([10,1,11,6,12,13,14,15,5,3,7,8])))),Fe=k.lazy(()=>b(()=>M(()=>import("./index-fnGzF5Zn.js"),__vite__mapDeps([16,1,6,12,2,5,15,3,13,14])))),ft=k.lazy(()=>b(()=>M(()=>import("./index-2BRT2d62.js"),__vite__mapDeps([17,1,6,18,13,14,19,20,3,5,12,7])))),yt=k.lazy(()=>b(()=>M(()=>import("./index-HIq1NdSd.js"),__vite__mapDeps([21,1,19,6,20,14])))),wt=k.lazy(()=>b(()=>M(()=>import("./index-SIm5mzgA.js"),__vite__mapDeps([22,1,11,18,6,12,13,14,23])))),It=k.lazy(()=>b(()=>M(()=>import("./index-j05GjFSX.js"),__vite__mapDeps([24,1,11,6,5,12,13,14,3])))),vt=k.lazy(()=>b(()=>M(()=>import("./index-csMvugsI.js"),__vite__mapDeps([25,1,6,19,20,13,14,26])))),bt=k.lazy(()=>b(()=>M(()=>import("./index-DZudJoPt.js"),__vite__mapDeps([27,1,6,14,20])))),Mt=k.lazy(()=>b(()=>M(()=>import("./index-vWCVWIW0.js"),__vite__mapDeps([28,1,3,6,5,19,20])))),St=()=>o.jsx(ls,{children:o.jsx(se,{isFullWidth:!0,isInline:!0,isExpanded:!0,intent:"danger",children:"Page not found"})}),At=()=>o.jsxs(cs,{children:[o.jsx(v,{path:f.OK,element:o.jsx(fe,{})}),o.jsx(v,{path:f.LOGIN,element:o.jsx(_e,{appName:"Developer Admin Portal",reapitConnectBrowserSession:de,redirectPath:f.APPROVALS})}),o.jsx(v,{path:f.FOUR_O_FOUR,element:o.jsx(St,{})}),o.jsx(v,{path:f.BILLING,element:o.jsx(A,{children:o.jsx(yt,{})})}),o.jsx(v,{path:f.TRAFFIC,element:o.jsx(A,{children:o.jsx(bt,{})})}),o.jsx(v,{path:f.USAGE,element:o.jsx(A,{children:o.jsx(vt,{})})}),o.jsx(v,{path:f.APPROVALS,element:o.jsx(A,{children:o.jsx(ut,{})})}),o.jsx(v,{path:f.APPS,element:o.jsx(A,{children:o.jsx(Fe,{})})}),o.jsx(v,{path:f.DEV_MANAGEMENT,element:o.jsx(A,{children:o.jsx(mt,{})})}),o.jsx(v,{path:f.INSTALLATIONS,element:o.jsx(A,{children:o.jsx(ft,{})})}),o.jsx(v,{path:f.CUSTOMERS,element:o.jsx(A,{children:o.jsx(wt,{})})}),o.jsx(v,{path:f.SUBSCRIPTIONS,element:o.jsx(A,{children:o.jsx(It,{})})}),o.jsx(v,{path:f.IAAS,element:o.jsx(A,{children:o.jsx(Mt,{})})}),o.jsx(v,{path:f.ROOT,element:o.jsx(A,{children:o.jsx(Fe,{})})})]}),kt=()=>o.jsx(ps,{children:o.jsx(At,{})}),Ct=new ds;be();const Pt=()=>o.jsx(u.StrictMode,{children:o.jsxs(gs,{client:Ct,children:[o.jsx(hs,{children:o.jsx(us,{children:o.jsx(ms,{children:o.jsx(kt,{})})})}),o.jsx(fs,{initialIsOpen:!1})]})}),je=document.querySelector("#root"),Rt=ye(),Ue=document.querySelector("html");Rt&&Ue&&Ue.classList.add("is-desktop"),window.location.href.includes("developer")&&(document.title="Developers"),je&&ys(je).render(o.jsx(Pt,{}))})();export{ae as G,oe as N,f as R,Ke as S,ie as U,ws as __tla,Ge as a,ne as b,pe as c,ce as d,We as g,V as h,le as l,qe as o,de as r,ge as u};
