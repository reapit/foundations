import{r as t,j as a,W as m,ac as x,a7 as j,a8 as o,ae as u,z as v,ab as w,am as y,an as n,ao as U,ap as g,aq as i,c as F,F as M}from"./vendor-troV5kp-.js";import{u as T,d as b}from"./index.esm-zVN26rm4.js";import{F as k}from"./FileSaver.min-JSyqwKbI.js";import{g as C,a as D,U as E,F as P}from"./constants-PNvbKeey.js";import{r as S,l as A}from"./index-7tW5-Pg7.js";var Y={appEnv:"local",sentryDsn:"",connectClientId:"5g5gmhc2r11df5vqoavvdvef5",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerPortalUri:"https://developers.dev.paas.reapit.cloud",appMarketUri:"https://marketplace.dev.paas.reapit.cloud"};const q=async s=>{try{const e=await C(S,"2");if(e)return D({url:`${E.traffic}/${s}`,api:Y.platformApiUrl,method:"GET",headers:e})}catch(e){A(e)}},l=(s,e)=>()=>{k.saveAs(s,e)},c=(s,e)=>()=>{(async()=>{if(e)try{const r=await q(e);if(!r||r instanceof P)throw r;s(r)}catch(r){console.error(r)}})()},d=()=>{const[s,e]=t.useState(),[r,h]=t.useState(null),{register:f,handleSubmit:p}=T({mode:"onChange"});return t.useEffect(c(h,s==null?void 0:s.month),[s]),a.jsxs(m,{children:[a.jsx(x,{children:"Traffic"}),a.jsx("form",{onChange:p(e),children:a.jsx(j,{className:o,children:a.jsx(u,{children:a.jsx(v,{...f("month"),label:"Month",type:"month"})})})}),r&&(s!=null&&s.month)?a.jsxs(w,{className:o,children:[a.jsxs(y,{children:[a.jsx(n,{children:"Period"}),a.jsx(n,{children:"Download Traffic"})]}),a.jsx(U,{children:a.jsxs(g,{children:[a.jsx(i,{children:b(s.month).format("MMMM YYYY")}),a.jsx(i,{children:a.jsx(F,{onClick:l(r,`traffic-events-period-${s.month}.csv`),children:"Download"})})]})})]}):a.jsx(M,{intent:"primary",isExpanded:!0,isInline:!0,isFullWidth:!0,children:"No traffic file available for download."})]})};export{d as Traffic,d as default,c as handleDownloadTrafficPeriod,l as handleSaveFile};
