var d=Object.defineProperty;var y=(s,e,t)=>e in s?d(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>(y(s,typeof e!="symbol"?e+"":e,t),t);const f="2020-01-31",m=async(s,e=f)=>{const t=await s.connectSession();if(t&&t.accessToken)return{Authorization:`Bearer ${t.accessToken}`,"api-version":e,"Content-Type":"application/json"}};class i extends Error{constructor(t,r){super(t);n(this,"name");n(this,"status");this.message=t,this.response=r,Object.setPrototypeOf(this,new.target.prototype),this.name=this.constructor.name,this.status=this.constructor.status,this.message=t,Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor),this.response=r}}const h=async(s,{method:e,url:t})=>{const r=await(async()=>{try{return await s.json()}catch{return s}})(),o=new i(`Foundations API error: Status: ${s.status} Method: ${e} Path: ${t} ${JSON.stringify(r)}`);return o.status=s.status,o.response=r,o},l=async({api:s,url:e,method:t,body:r,headers:o})=>{const c=`${s}${e}`,a=await fetch(c,{headers:o,method:t,body:JSON.stringify(r)});if(a.status<400)try{return await a.blob()}catch(p){const u=new i("Can't convert response to blob. Error:",p.message);throw console.error(u.message),u}throw await h(a,{url:e,method:t})},w=async({api:s,url:e,method:t,body:r,headers:o})=>{const c=`${s}${e}`,a=await fetch(c,{headers:o,method:t,body:JSON.stringify(r)});if(a.status<400)try{return await a.json()}catch{return a.ok}throw await h(a,{url:e,method:t})},b={developers:"/marketplace/developers",customers:"/marketplace/customers",developer:"/marketplace/developer",traffic:"/trafficevents/trafficStatistics"};export{i as F,b as U,l as a,w as f,m as g};
