import{Q as o,r as a,j as i,a7 as A,W as g,X as d,ai as C}from"./vendor-ZH71Hs13.js";import{r as S}from"./index-DYGYHHRm.js";const u=e=>{const[s,n]=o.useState(null);o.useEffect(()=>{(async()=>{const l=await e.connectSession();l&&n(l)})().catch(l=>console.error(l))},[e]);const c=o.useCallback(()=>{e.connectAuthorizeRedirect()},[]),t=o.useCallback(()=>{e.connectLoginRedirect()},[]),r=o.useCallback(()=>{e.connectLogoutRedirect()},[]),p=e.connectIsDesktop,m=e.connectHasSession,R=e.connectInternalRedirect,x=e.connectClearSession;return{connectSession:s,connectAuthorizeRedirect:c,connectLoginRedirect:t,connectLogoutRedirect:r,connectInternalRedirect:R,connectIsDesktop:p,connectHasSession:m,connectClearSession:x}},b=e=>()=>{var c;const s=((c=e==null?void 0:e.loginIdentity)==null?void 0:c.groups)??[],n=s.includes("ReapitEmployeeFoundationsAdmin");return{hasReadAccess:s.includes("ReapitEmployee")&&!n,hasWriteAccess:n}},f=e=>()=>{const s=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(s)},j=(e,s)=>()=>{e(!s)},h=a.createContext({}),{Provider:k}=h,E=({children:e})=>{const{connectSession:s}=u(S),[n,c]=a.useState(!0),{hasReadAccess:t,hasWriteAccess:r}=a.useMemo(b(s),[s]);return a.useEffect(f(c),[]),s?!t&&!r?i.jsx(g,{children:i.jsx(d,{isFullWidth:!0,isInline:!0,isExpanded:!0,intent:"danger",children:"You do not have permission to access this application."})}):i.jsxs(k,{value:{hasReadAccess:t,hasWriteAccess:r},children:[t&&i.jsx(d,{className:C,onClick:j(c,n),isExpanded:n,intent:"primary",children:"You have read only access to the Admin Portal. This means some buttons and actions will be unavailable or disabled while using the app."}),e]}):i.jsx(A,{})},I=()=>a.useContext(h);export{E as P,I as a,u};
