import{r as o,j as e,a7 as C,ah as A,aj as I,ab as f,aA as D,aB as m,aD as R,aE as u,an as S,X as W,aF as _,W as q,am as H,aa as M,ao as w,ad as y,ae as U,af as X}from"./vendor-_Ftg20Hp.js";import{E as N}from"./index-Dc-_fPKY.js";import{c as J}from"./index-URb_F5BA.js";import{u as K}from"./index.esm-DOuwMxsP.js";import{u as F,r as P,g as T,G,o as Q}from"./index-CVVnuXMX.js";import{f as V}from"./index-C-eCv2z-.js";import{S as Y}from"./index-CKZRxNYs.js";import"./FileSaver.min-CvPjENXQ.js";const k="four-col-table",Z=({orgId:r})=>{var i,t;const[l,c]=o.useState(1),[h,n]=o.useState(12),[a,x]=F({reapitConnectBrowserSession:P,action:T[G.getGroupsByOrgId],queryParams:{pageSize:h,pageNumber:l},uriParams:{orgId:r},fetchWhenTrue:[r]});return e.jsx(N,{children:x?e.jsx(C,{}):(i=a==null?void 0:a._embedded)!=null&&i.length?e.jsxs(e.Fragment,{children:[e.jsx(A,{children:"Office Groups"}),e.jsxs(I,{className:f,children:[e.jsxs(D,{className:k,children:[e.jsx(m,{children:"Customer Id"}),e.jsx(m,{children:"Group Name"}),e.jsx(m,{children:"Office Ids"}),e.jsx(m,{children:"Status"})]}),(t=a==null?void 0:a._embedded)==null?void 0:t.map(({customerId:j,name:d,officeIds:s,status:g})=>e.jsxs(R,{className:k,children:[e.jsx(u,{children:j}),e.jsx(u,{children:d}),e.jsx(u,{children:s}),e.jsx(u,{children:g})]},d))]}),e.jsx(S,{callback:c,currentPage:l,numberPages:Math.ceil(((a==null?void 0:a.totalCount)??1)/12)}),e.jsx(Y,{area:"OFFICE_GROUPS",data:a,setPageSize:n})]}):e.jsx(W,{className:_,isInline:!0,isExpanded:!0,isFullWidth:!0,intent:"primary",children:"No office groups found for this organisation"})})},v=(r,l)=>()=>{l&&r(l)},O=()=>{var p;const[r,l]=o.useState(1),[c,h]=o.useState({}),[n,a]=o.useState(null),{name:x,agencyCloudId:i}=c,{register:t,handleSubmit:j}=K({mode:"onChange"}),d=Q(c),[s,g]=F({reapitConnectBrowserSession:P,action:T[G.getCustomers],queryParams:{...d,pageSize:12,pageNumber:r},fetchWhenTrue:[x||i]});return e.jsx(N,{children:e.jsxs(q,{children:[e.jsx(H,{children:"Customers"}),e.jsx("form",{onChange:j(V(h,500)),children:e.jsxs(M,{className:f,children:[e.jsx(w,{children:e.jsx(y,{...t("name"),label:"Customer Name",type:"search"})}),e.jsx(w,{children:e.jsx(y,{...t("agencyCloudId"),label:"Customer Code",type:"search"})})]})}),g?e.jsx(C,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:f,rows:(p=s==null?void 0:s.data)==null?void 0:p.map(({name:B,address:E,agencyCloudId:L,billingReference:z,id:b})=>({cells:[{label:"Customer Name",value:B,icon:"property",cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Agency Cloud Id",value:L,cellHasDarkText:!0,narrowTable:{showLabel:!0}},{label:"Customer Id",value:b,narrowTable:{showLabel:!0}},{label:"Customer Billing Reference",value:z||"-",narrowTable:{showLabel:!0}},{label:"Customer Address",value:J(E),narrowTable:{showLabel:!0}}],expandableContent:{content:e.jsxs(e.Fragment,{children:[e.jsx(U,{alignment:"center",children:e.jsx(X,{intent:"primary",onClick:v(a,b),children:"Fetch Office Groups"})}),n&&n===b&&e.jsx(Z,{orgId:n})]})}}))}),e.jsx(S,{callback:l,currentPage:r,numberPages:Math.ceil(((s==null?void 0:s.totalCount)??1)/12)})]})]})})};export{O as Customers,O as default,v as handleFetchGroups};
