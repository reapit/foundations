import{r as t,j as a,W as m,am as j,aa as u,ab as n,ao as x,ad as v,aj as w,aA as y,aB as o,aC as b,aD as M,aE as i,af as U,X as C}from"./vendor-_Ftg20Hp.js";import{u as D,d as E}from"./index.esm-DOuwMxsP.js";import{F}from"./FileSaver.min-CvPjENXQ.js";import{g as T,a as g,U as A,F as P}from"./constants-aos_c5Ih.js";import{r as S,l as k}from"./index-D0G8dB-d.js";var q={appEnv:"development",sentryDsn:"",connectClientId:"76q6dqj28batdlespqc36urn8b",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerPortalUri:"https://developers.dev.paas.reapit.cloud",appMarketUri:"https://marketplace.dev.paas.reapit.cloud"};const N=async e=>{try{const s=await T(S,"2");if(s)return g({url:`${A.traffic}/${e}`,api:q.platformApiUrl,method:"GET",headers:s})}catch(s){k(s)}},l=(e,s)=>()=>{F.saveAs(e,s)},c=(e,s)=>()=>{(async()=>{if(s)try{const r=await N(s);if(!r||r instanceof P)throw r;e(r)}catch(r){console.error(r)}})()},d=()=>{const[e,s]=t.useState(),[r,h]=t.useState(null),{register:p,handleSubmit:f}=D({mode:"onChange"});return t.useEffect(c(h,e==null?void 0:e.month),[e]),a.jsxs(m,{children:[a.jsx(j,{children:"Traffic"}),a.jsx("form",{onChange:f(s),children:a.jsx(u,{className:n,children:a.jsx(x,{children:a.jsx(v,{...p("month"),label:"Month",type:"month"})})})}),r&&(e!=null&&e.month)?a.jsxs(w,{className:n,children:[a.jsxs(y,{children:[a.jsx(o,{children:"Period"}),a.jsx(o,{children:"Download Traffic"})]}),a.jsx(b,{children:a.jsxs(M,{children:[a.jsx(i,{children:E(e.month).format("MMMM YYYY")}),a.jsx(i,{children:a.jsx(U,{onClick:l(r,`traffic-events-period-${e.month}.csv`),children:"Download"})})]})})]}):a.jsx(C,{intent:"primary",isExpanded:!0,isInline:!0,isFullWidth:!0,children:"No traffic file available for download."})]})};export{d as Traffic,d as default,c as handleDownloadTrafficPeriod,l as handleSaveFile};
