import{r as t,j as a,W as m,am as j,aa as u,ab as n,ao as x,ad as v,aj as w,aA as y,aB as o,aC as U,aD as b,aE as i,af as M,X as A}from"./vendor-ZH71Hs13.js";import{u as C,d as D}from"./index.esm-Ch-ie6LE.js";import{F as E}from"./FileSaver.min-BZwjJ9VL.js";import{g as F,a as T,U as g,F as P}from"./constants-aos_c5Ih.js";import{r as S,l as Y}from"./index-D0FSyh0V.js";var k={appEnv:"development",sentryDsn:"",connectClientId:"76q6dqj28batdlespqc36urn8b",connectOAuthUrl:"https://connect.dev.paas.reapit.cloud",connectUserPoolId:"eu-west-2_kiftR4qFc",platformApiUrl:"https://platform.dev.paas.reapit.cloud",developerPortalUri:"https://developers.dev.paas.reapit.cloud",appMarketUri:"https://marketplace.dev.paas.reapit.cloud"};const q=async s=>{try{const e=await F(S,"2");if(e)return T({url:`${g.traffic}/${s}`,api:k.platformApiUrl,method:"GET",headers:e})}catch(e){Y(e)}},l=(s,e)=>()=>{E.saveAs(s,e)},c=(s,e)=>()=>{(async()=>{if(e)try{const r=await q(e);if(!r||r instanceof P)throw r;s(r)}catch(r){console.error(r)}})()},d=()=>{const[s,e]=t.useState(),[r,h]=t.useState(null),{register:p,handleSubmit:f}=C({mode:"onChange"});return t.useEffect(c(h,s==null?void 0:s.month),[s]),a.jsxs(m,{children:[a.jsx(j,{children:"Traffic"}),a.jsx("form",{onChange:f(e),children:a.jsx(u,{className:n,children:a.jsx(x,{children:a.jsx(v,{...p("month"),label:"Month",type:"month"})})})}),r&&(s!=null&&s.month)?a.jsxs(w,{className:n,children:[a.jsxs(y,{children:[a.jsx(o,{children:"Period"}),a.jsx(o,{children:"Download Traffic"})]}),a.jsx(U,{children:a.jsxs(b,{children:[a.jsx(i,{children:D(s.month).format("MMMM YYYY")}),a.jsx(i,{children:a.jsx(M,{onClick:l(r,`traffic-events-period-${s.month}.csv`),children:"Download"})})]})})]}):a.jsx(A,{intent:"primary",isExpanded:!0,isInline:!0,isFullWidth:!0,children:"No traffic file available for download."})]})};export{d as Traffic,d as default,c as handleDownloadTrafficPeriod,l as handleSaveFile};
