import { attribute, table, autoGeneratedHashKey } from '@aws/dynamodb-data-mapper-annotations'

export interface AppsBrowseConfigItemContentInterface {
  brandColour?: string
  strapline?: string
  imageUrl?: string
  title?: string
  iconName?: string
}

export interface AppsBrowseConfigItemFiltersInterface {
  developerId?: string
  category?: string[]
  desktopIntegrationTypeId?: string[]
  id?: string[]
  appName?: string
  isFeatured?: boolean
  isFree?: boolean
}

export enum AppsBrowseConfigType {
  featuredHeroApps,
  heroApps,
  appsFilters,
  featuredApps,
  simpleApps,
}

export interface AppBrowseLiveDataInterface {
  timeFrom?: Date
  timeTo?: Date
  isLive?: boolean
}

export interface AppsBrowseConfigItemInterface {
  filters?: AppsBrowseConfigItemFiltersInterface
  content?: AppsBrowseConfigItemContentInterface
  configType: AppsBrowseConfigType
  live: AppBrowseLiveDataInterface
}

class AppBrowseLiveDataModel implements AppBrowseLiveDataInterface {
  @attribute()
  timeFrom?: Date

  @attribute()
  timeTo?: Date

  @attribute({ defaultProvider: () => false })
  isLive: boolean
}

class AppBrowseConfigContentModel implements AppsBrowseConfigItemContentInterface {
  @attribute()
  brandColour?: string

  @attribute()
  strapline?: string

  @attribute()
  imageUrl?: string

  @attribute()
  title?: string

  @attribute()
  iconName?: string
}

class AppsBrowseConfigItemFiltersModel implements AppsBrowseConfigItemFiltersInterface {
  @attribute()
  developerId?: string

  @attribute()
  category?: string[]

  @attribute()
  desktopIntegrationTypeId?: string[]

  @attribute()
  id?: string[]

  @attribute()
  appName?: string

  @attribute()
  isFeatured?: boolean

  @attribute()
  isFree?: boolean
}

@table(process.env.DYNAMO_MARKETPLACE_CMS_TABLE_NAME || 'Marketplace_Cms_Table')
export class MarketplaceAppModel implements AppsBrowseConfigItemInterface {
  @autoGeneratedHashKey()
  id?: string

  @attribute()
  name?: string

  @attribute()
  live: AppBrowseLiveDataModel

  @attribute()
  configType: AppsBrowseConfigType

  @attribute()
  content?: AppBrowseConfigContentModel

  @attribute()
  filters: AppsBrowseConfigItemFiltersModel
}
